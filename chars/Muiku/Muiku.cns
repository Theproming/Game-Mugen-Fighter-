;===================================================================================
;-------------- Constantes Combos Helpers Custom States ----------------------------
;===================================================================================

;Var List:

; - var(2) = Sparking 
; - Var(4) = Smash Hit
; - Var(5) = Clash of Gods
; - Var(6) = no aura
; - Var(7) = COLISIONADOR DE PARTICULAS 
; - Var(8) = VIEJAS CACHONDAS
; - Var(9) = IA
; - Var(22) = Selector/Color Efectos
; - Var(25) = ASSIST BLOCK
; - Var(26) = ASSIST CONFIG
; - Var(27) = Posicion HUD
; - Var(28) = ASSIST ON/OFF
; - var(29),Sparking Count
; - Var(41-43) = Basicos Suelo
; - var(47) = AutoCombos
; - fvar(33-34) = valores random   ||   Clash Dragon Rush 940
; - var(48) = 490 - 1300,1304 - 1800,1801
; - Var(49) = Angulo
; - Var(50) = Anims de daño
; - Var(52) = DANGER!!
; - Var(53) = Intros Especiales
; - Var(54) = Juggle
; - var(55) = Beam Charge n sh
; - var(56) = 1300,1304,1800,1801,1505,3000-3005
; - ;HELPER(6900),var(58) = Sparking 

[Data]
life = 1000
power = 6000
attack = 100
defence = 100
fall.defence_up = 50
liedown.time = 60
airjuggle = 21
sparkno = -1
guard.sparkno = -1
KO.echo = 0
volume = 30
IntPersistIndex = 22
FloatPersistIndex = 40
volumescale = 70

[Size]
xscale = 1
yscale = 1
ground.back = 14
ground.front = 14
air.back = 13
air.front = 13
height = 53
attack.dist = 160
proj.attack.dist = 90
proj.doscale = 0
head.pos = -1, -46
mid.pos = -1, -34
shadowoffset = 0
draw.offset = 0,0

[Velocity]
walk.fwd  = 2
walk.back = -1.4
run.fwd  = 0
run.back = 0
jump.neu = 0,-9
jump.back = -4
jump.fwd = 4
runjump.back = 0
runjump.fwd = 0
airjump.neu = 0,-5
airjump.back = -3
airjump.fwd = 3

[Movement]
airjump.num = 1
airjump.height = 35
yaccel = .4;38
stand.friction = .85
crouch.friction = .82

[Quotes]
victory0= "I think I'm finally getting the hang of this power now."
victory1= "This here's the power of Ultra Instinct."
victory2= "What's wrong? Is that all you've got?"
victory3= "I can't give in now. Everyone's counting on me..."
victory4= "I'm where I am today because all of my friends."
;===============================================================================
; Perder:
;-------------------------------------------------------------------------------
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 30
value = S0,29
volumescale = 100
channel = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem =2
value = S2,17
volumescale = 80
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem =2
value = S2,18
volumescale = 80

[State 0, Sangre]
type = Explod
trigger1 = !time
anim = 7007
pos = 8*const(size.xscale),-25*const(size.yscale)
postype = p1  ;p2,front,back,left,right
removetime = -2
facing = -1
pausemovetime = 999999
supermovetime = 999999
scale = .5*const(size.xscale),.5*const(size.yscale)
sprpriority = 1
ownpal = 1

[State 0, Aura]
type = Explod
trigger1 = time = 0
anim = 551
ID = 551
pos = 0,3*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.25*const(size.yscale)
sprpriority = 6
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
[State 0, Aura]
type = Explod
trigger1 = time = 0
anim = 551
ID = 551
pos = 0,3*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.25*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
[State 0, Aura]
type = Explod
trigger1 = time = 0
anim = 551
ID = 551
pos = 0,3*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.25*const(size.yscale)
sprpriority = 7
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33

[State 0, Land]
type = Explod
trigger1 = time = 0
anim = 7014
ID = 7014
pos = 0,1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = -6
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
remappal = 10,0+var(22)
[State 0, Land]
type = Explod
trigger1 = time = 0
anim = 7014
ID = 7014
pos = 0,1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = -5
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
trans = sub

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 =  time < 300
flag = roundnotover
ignorehitpause = 1

[State 170, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;===============================================================================
; Ganar:
;-------------------------------------------------------------------------------
[Statedef 180]
type = S
ctrl = 0
velset = 0,0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
triggerall = teammode != simul
trigger1 = !time
value = S950,cond(random<500,11,4)
volumescale = 100

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 0+var(11)
value = 0+var(11)
ignorehitpause = 1

[State 183, Zoom1]
type = Zoom
triggerall = teammode != simul
trigger1 = 1
pos = pos x *camerazoom ,(pos y *camerazoom)-1*const(size.yscale)
scale = 1.3/camerazoom
lag = .77
space = screen
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, Trans]
type = Explod
triggerall = teammode != simul
trigger1 = !time
anim = 18000
ID = 18000
pos= 160,Floor((1.33*GameHeight/GameWidth)*120)
scale=20,20
postype = back
facing = 1
bindtime = -1
removetime = -1
vel = 0,0
accel = 0,0
pausemovetime = 9999
supermovetime = 9999
sprpriority = 999999
ontop = 1
ownpal = 1
removeongethit = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = cond(teammode = simul,0,30)
value = 181
ctrl = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = roundnotover

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;-------------------------------------------------------------------------------
; Poses de Victoria
[Statedef 181]
type = S
ctrl = 0
velset = 0,0
sprpriority = 2

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = teammode != simul
trigger1 = !time
value = (180+var(11))+random%3
ignorehitpause = 1
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = teammode = simul
trigger1 = !time
value = (180+var(11))+random%2
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = teammode != simul
trigger1 = time = 0
anim = 18002
ID = 18002
pos = 0,-35*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 5
removeongethit = 0
ownpal = 1
remappal = 10,0+var(22)

[State 0, AssertSpecial]
type = AssertSpecial
triggerall = teammode != simul
trigger1 = 1
flag = nobardisplay
[State 0, AssertSpecial]
type = AssertSpecial
triggerall = teammode != simul
trigger1 = 1
flag = nofg

[State 0, PosSet]
type = PosSet
triggerall = teammode != simul
trigger1 = 1
x = 0
y = 0
ignorehitpause = 1
[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 1,1
ignorehitpause = 1

[State 183, Zoom1]
type = Zoom
triggerall = teammode != simul
trigger1 = 1
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom
scale = 2.1/camerazoom
lag = 0
space = screen
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, Trans]
type = Explod
triggerall = teammode != simul
trigger1 = !time
anim = 18001
ID = 18001
pos= 160,Floor((1.33*GameHeight/GameWidth)*120)
scale=20,20
postype = back
facing = 1
bindtime = -1
removetime = -2
vel = 0,0
accel = 0,0
pausemovetime = 9999
supermovetime = 9999
sprpriority = 999999
ontop = 1
ownpal = 1
removeongethit = 0
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 18000
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 600
flag = roundnotover
[State 0, AssertSpecial]
type = AssertSpecial
triggerall = teammode != simul
trigger1 = 1
flag = nomusic
ignorehitpause = 1

;voces-----------------------------------------------------------------------------------
[State 0, VarSet]
type = VarSet
triggerall = numenemy
triggerall = enemynear,name != "Jiren"
triggerall = enemynear,name != "Kefla"|| enemynear,name != "Kefla SSJ"|| enemynear,name != "Kefla (SSJ)"
triggerall = anim != 181
Trigger1 = time = 2
Fv = 33
value = 1+random% 4
[State 0, VarSet]
type = VarSet
triggerall = numenemy
triggerall = enemynear,name != "Jiren"
triggerall = enemynear,name != "Kefla"|| enemynear,name != "Kefla SSJ"|| enemynear,name != "Kefla (SSJ)"
triggerall = anim = 181
Trigger1 = time = 2
Fv = 33
value = 0

[State 0, PlaySnd]
type = PlaySnd
triggerall = numenemy
triggerall = enemynear,name != "Jiren"
triggerall = enemynear,name != "Kefla"|| enemynear,name != "Kefla SSJ"|| enemynear,name != "Kefla (SSJ)"
triggerall = anim != 181
Triggerall = Fvar(33) = 1
trigger1 = time = 20
value = S0,131
volumescale = 100
channel = 5

[State 0, PlaySnd]
type = PlaySnd
triggerall = numenemy
triggerall = enemynear,name != "Jiren"
triggerall = enemynear,name != "Kefla"|| enemynear,name != "Kefla SSJ"|| enemynear,name != "Kefla (SSJ)"
triggerall = anim != 181
Triggerall = Fvar(33) = 2
trigger1 = time = 30
value = S0,132
volumescale = 100
channel = 5

[State 0, PlaySnd]
type = PlaySnd
triggerall = numenemy
triggerall = enemynear,name != "Jiren"
triggerall = enemynear,name != "Kefla"|| enemynear,name != "Kefla SSJ"|| enemynear,name != "Kefla (SSJ)"
triggerall = anim != 181
Triggerall = Fvar(33) = 3
trigger1 = time = 30
value = S0,133
volumescale = 100
channel = 5

[State 0, PlaySnd]
type = PlaySnd
triggerall = numenemy
triggerall = enemynear,name != "Jiren"
triggerall = enemynear,name != "Kefla"|| enemynear,name != "Kefla SSJ"|| enemynear,name != "Kefla (SSJ)"
triggerall = anim != 181
Triggerall = Fvar(33) = 4
trigger1 = time = 30
value = S0,134
volumescale = 100
channel = 5

[State 0, PlaySnd]
type = PlaySnd
triggerall = numenemy
triggerall = enemynear,name = "Jiren"
triggerall = anim != 181
trigger1 = time = 30
value = S0,cond(roundno >1,161,(131+random%3))
volumescale = 100
channel = 5

[State 0, PlaySnd]
type = PlaySnd
triggerall = numenemy
triggerall = enemynear,name = "Kefla"|| enemynear,name = "Kefla SSJ"|| enemynear,name = "Kefla (SSJ)"
triggerall = anim != 181
trigger1 = time = 30
value = S0,cond(roundno >1,163,(131+random%3))
volumescale = 100
channel = 5

[State 0, PlaySnd]
type = PlaySnd
triggerall = numenemy
triggerall = anim = 181
trigger1 = time = 30
value = S0,cond(random <500,147,136)
volumescale = 100
channel = 5

[State 0, PlaySnd Win CONGRATULATIONS]
type = PlaySnd
triggerall = !numenemy
trigger1 = time = 30
value = S0,131+random%4
volumescale = 100
channel = 5
;voces-----------------------------------------------------------------------------------

[State 0, Explod]
type = Explod
trigger1 = !time && anim = 182
anim = 7019
ID = 7019
pos = 13*const(size.xscale),-42*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 101
pausemovetime = 0
scale = .05*const(size.xscale),.05*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
remappal = 0,39

[State 0, Explod]
type = Explod
trigger1 = !time && anim = 182
anim = 183
ID = 183
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
remappal = 0,39
[State 0, Explod]
type = Explod
trigger1 = !time && anim = 182
anim = 183
ID = 183
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = -2
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
remappal = 0,33
trans = sub

[State 0, Explod]
type = Explod
trigger1 = time=100 && anim = 182
anim = 184
ID = 184
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
remappal = 0,39
[State 0, Explod]
type = Explod
trigger1 = time=100 && anim = 182
anim = 184
ID = 184
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
remappal = 0,33
trans = sub

[State 0, FG]
type = Explod
triggerall = teammode != simul
trigger1 = !time
anim = 18022
ID = 18022
pos= 160,Floor((1.33*GameHeight/GameWidth)*120)
scale=.55,.45
postype = back
facing = facing
vfacing = 1
bindtime = -1
removetime = -1
vel = 0,0
accel = 0,0
pausemovetime = 9999
supermovetime = 9999
sprpriority = 211
ontop = 1
ownpal = 1
removeongethit = 0
persistent = 0
remappal =  10,0+var(22)

[State 0, TEXT]
type = Explod
triggerall = teammode != simul
trigger1 = !time
anim = 18021
ID = 18021
pos= 160,Floor((1.33*GameHeight/GameWidth)*120)
scale=.35,.25
postype = back
facing = facing
vfacing = 1
bindtime = -1
removetime = -1
vel = 0,0
accel = 0,0
pausemovetime = 9999
supermovetime = 9999
sprpriority = 210
ontop = 1
ownpal = 1
removeongethit = 0
persistent = 0
remappal =  10,0+var(22)

[State 0, BG]
type = Explod
triggerall = teammode != simul
trigger1 = !time
anim = 18020
ID = 18020
pos= 160,Floor((1.33*GameHeight/GameWidth)*120)
scale=.55,.45
postype = back
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
vel = 0,0
accel = 0,0
pausemovetime = 9999
supermovetime = 9999
sprpriority = -850
ontop = 0
ownpal = 1
removeongethit = 0
persistent = 0
remappal =  10,0+var(22)

[State 181, 1]
type = NotHitBy
trigger1 = 1
value = SCA
time = 1
;===============================================================================
; Introducción:
;-------------------------------------------------------------------------------
; PreIntro
[Statedef 190]
type = S
ctrl = 0
anim = 190
velset = 0,0
sprpriority = 2

;--------------selector
[State 0, VarSet]
type = VarSet
triggerall = ailevel = 0
trigger1 = time = 0
v = 22 
value = 0+palno
[State 0, RemapPal]
type = RemapPal
trigger1 = 1
source = 1,1
dest = 1,var(22)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
triggerall = teamside = 1
triggerall = ailevel > 0
trigger1 = time = 0
v = 22 
value = 1
[State 0, VarSet]
type = VarSet
triggerall = teamside = 2
triggerall = ailevel > 0
trigger1 = time = 0
v = 22 
value = cond((p2name = "Muiku"),2,1)
;--------------selector

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 190
elem = 1
ignorehitpause = 1

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

[State 190, 2]
type = ChangeState
trigger1 = Cond(teamside = 1,time > 5,enemynear,stateno = 0)
value = 191
ctrl = 0
;-------------------------------------------------------------------------------
; Intro
[Statedef 191]
type = S
ctrl = 0
anim = 190
velset = 0,0
sprpriority = 1

[State 0, Musica o similar]
type = PlaySnd
triggerall = teammode != simul
trigger1 = (enemynear,authorname != "Dano"||enemynear,authorname != "Doly P29"||enemynear,authorname != "Mugen_Dojo"||enemynear,authorname != "Mugen_Labs")&&(!time && enemynear,stateno = 0)
trigger2 = (enemynear,authorname = "Dano"||enemynear,authorname = "Doly P29"||enemynear,authorname = "Mugen_Dojo"||enemynear,authorname = "Mugen_Labs")&&(!time && enemynear,stateno = 190)
value = S950,cond(palno = 7,10,8+random%2)
volumescale = 500
channel = 11
[State 0, Nomusic]
type = Explod
triggerall = teammode != simul
trigger1 = (enemynear,authorname != "Dano"||enemynear,authorname != "Doly P29"||enemynear,authorname != "Mugen_Dojo"||enemynear,authorname != "Mugen_Labs")&&(!time && enemynear,stateno = 0)
trigger2 = (enemynear,authorname = "Dano"||enemynear,authorname = "Doly P29"||enemynear,authorname = "Mugen_Dojo"||enemynear,authorname = "Mugen_Labs")&&(!time && enemynear,stateno = 190)
anim = 9999
ID = 9501
pos = 0,0
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = 290
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
ownpal = 0
persistent = 0
removeongethit = 1
ignorehitpause = 1
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = numexplod(9501)
flag = nomusic
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = S7,3
volumescale = 80
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 55
value = S500,1
volumescale = 60
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 155
value = S7,2
volumescale = 80
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 160
value = S7,4
volumescale = 80
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 200
value = S500,2
volumescale = 80
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 250
value = S7,5
volumescale = 90
channel = 12

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 253
time = 18
freq = 90
ampl = -8
phase = 110
ignorehitpause = 1

[State 0, Land]
type = Explod
triggerall = time = [255,320]
trigger1 = timemod = 12,0
anim = 7014
ID = 7014
pos = 0,1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = -6
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
remappal = 10,0+var(22)

[State 0, Viento]
type = Explod
triggerall = time = [255,320]
trigger1 = timemod = 9,0
anim = 7022
ID = 7022
pos = 0,-1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .2*const(size.xscale),.2*const(size.yscale)
vel = -2,0
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
[State 0, Viento]
type = Explod
triggerall = time = [255,320]
trigger1 = timemod = 9,0
anim = 7022
ID = 7022
pos = 0,1
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .2*const(size.xscale),.2*const(size.yscale)
vel = 2,0
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)

[State 0, Aura]
type = Explod
trigger1 = time = 325
anim = 551
ID = 551
pos = 0,3*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.25*const(size.yscale)
sprpriority = 6
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
[State 0, Aura]
type = Explod
trigger1 = time = 325
anim = 551
ID = 551
pos = 0,3*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.25*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
[State 0, Aura]
type = Explod
trigger1 = time = 325
anim = 551
ID = 551
pos = 0,3*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.25*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33

[State 0, Explod]
type = Explod
trigger1 = time = 250
anim = 960
ID = 190
pos = 1*const(size.xscale),-29*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 80
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,33
trans = sub
[State 0, Explod]
type = Explod
trigger1 = time = 250
anim = 960
ID = 190
pos = 1*const(size.xscale),-29*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 80
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 6
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)

[State 0, Aura]
type = Explod
trigger1 = time = 250
anim = 550
ID = 190
pos = 0,-38*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = 80
pausemovetime = 0
scale = .35*const(size.xscale),.4*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
trans = addalpha 
alpha = 60,255
remappal = 10,0+var(22)
[State 0, Aura]
type = Explod
trigger1 = time = 250
anim = 550
ID = 190
pos = 0,-38*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = 80
pausemovetime = 0
scale = .35*const(size.xscale),.4*const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 1
trans = addalpha 
alpha = 195,255
remappal = 10,0+var(22)
[State 0, Aura]
type = Explod
trigger1 = time = 250
anim = 550
ID = 190
pos = 0,-38*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = 80
pausemovetime = 0
scale = .35*const(size.xscale),.4*const(size.yscale)
sprpriority = -1
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,33
trans = sub

[State 0, Land]
type = Explod
triggerall = time = [200,255]
trigger1 = timemod = 13,0
anim = 7014
ID = 7014
pos = 0,1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = -6
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
remappal = 0,38

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 220
value = S0,1
volumescale = 100
channel = 5

[State 0, Viento]
type = Explod
triggerall = time = [200,255]
trigger1 = timemod = 10,0
anim = 7022
ID = 7022
pos = 0,-1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .2*const(size.xscale),.2*const(size.yscale)
vel = -2,0
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,38
[State 0, Viento]
type = Explod
triggerall = time = [200,255]
trigger1 = timemod = 10,0
anim = 7022
ID = 7022
pos = 0,1
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .2*const(size.xscale),.2*const(size.yscale)
vel = 2,0
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,38
[State 0, EnvShake]
type = EnvShake
triggerall = time = [200,252]
trigger1 =  time%5
time = 5

[State 0, Explod]
type = Explod
trigger1 = time = 251
anim = 197
ID = 197
pos = 1*const(size.xscale),9*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .2*const(size.xscale),.3*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
remappal = 10,0+var(22)

[State 0, Explod]
type = Explod
trigger1 = time = 250
anim = 194
ID = 194
pos = 2*const(size.xscale),-35*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .5*const(size.xscale),.5*const(size.yscale)
sprpriority = 17
ontop = 1
ownpal = 1
remappal = 0,33
trans = sub
[State 0, Explod]
type = Explod
trigger1 = time = 250
anim = 194
ID = 194
pos = 2*const(size.xscale),-35*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .5*const(size.xscale),.5*const(size.yscale)
sprpriority = 18
ontop = 1
ownpal = 1
remappal = 10,0+var(22)

[State 0, Explod]
type = Explod
trigger1 = time = 204
anim = 196
ID = 196
pos = 0,15*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.24*const(size.yscale)
sprpriority = 10
ontop = 0
ownpal = 1
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = time = 204
anim = 196
ID = 196
pos = 0,15*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.24*const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
remappal = 0,33
trans = sub

[State 0, Explod]
type = Explod
trigger1 = time = 167
anim = 199
ID = 198
pos = 2*const(size.xscale),-35*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 12
ontop = 0
ownpal = 1
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = time = 167
anim = 198
ID = 198
pos = 2*const(size.xscale),-35*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = -12
ontop = 0
ownpal = 1
remappal = 10,0+var(22)

[State 0, Explod]
type = Explod
trigger1 = time = 137
anim = 193
ID = 193
pos = 0,-36*const(size.yscale)
postype = p1 
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .5*const(size.xscale),.5*const(size.yscale)
sprpriority = 6
ontop = 0
ownpal = 1
removeongethit = 0
remappal = 10,0+var(22)
supermovetime = 9999999
supermovetime = 9999999

[State 0, Land]
type = Explod
trigger1 = time = 80
anim = 7014
ID = 7014
pos = 0,1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .23*const(size.xscale),.23*const(size.yscale)
sprpriority = -10
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
remappal = 0,38
[State 0, Land]
type = PlaySnd
trigger1 = time = 80
value = S52,1
volume = 50

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 1011
ID = 1011
pos = -12*const(size.xscale),-60*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
removetime = -2
pausemovetime = 0
vel = .04*const(size.xscale),.12*const(size.yscale)
scale = .05*const(size.xscale),.05*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
persistent = 0
remappal = 10,0+var(22)

[State 0, Speedlines]
type = Explod
trigger1 = (enemynear,authorname != "Dano"||enemynear,authorname != "Doly P29"||enemynear,authorname != "Mugen_Dojo"||enemynear,authorname != "Mugen_Labs")&&(enemynear,stateno = 0)
trigger1 = time = 200
trigger2 = (enemynear,authorname = "Dano"||enemynear,authorname = "Doly P29"||enemynear,authorname = "Mugen_Dojo"||enemynear,authorname = "Mugen_Labs")&&(enemynear,stateno = 190)
trigger2 = time = 200
anim = 192
ID = 192
pos=160,Floor((1.33*GameHeight/GameWidth)*120)
scale=.54,.54
postype = back
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 9999
supermovetime = 9999
sprpriority = 9999
ontop = 1
ownpal = 1
persistent = 0
removeongethit = 0
remappal = 10,0+var(22)

[State 0, Helper]
type = Helper
triggerall = teammode != simul
trigger1 = (enemynear,authorname != "Dano"||enemynear,authorname != "Doly P29"||enemynear,authorname != "Mugen_Dojo"||enemynear,authorname != "Mugen_Labs")&&(!time && enemynear,stateno = 0)
trigger2 = (enemynear,authorname = "Dano"||enemynear,authorname = "Doly P29"||enemynear,authorname = "Mugen_Dojo"||enemynear,authorname = "Mugen_Labs")&&(!time && enemynear,stateno = 190)
helpertype = normal ;player
name = "zoom"
ID = 192
stateno = 192
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

;voces-----------------------------------------------------------------------------------

[State 0, Roundstart Grunt]
type = PlaySnd
triggerall = anim = 191
trigger1 = ailevel = 0 && command = "hold_s"
trigger2 = ailevel > 0 && fvar(33) > 0
value = S0,34+random%2
volumescale = 554
channel = 5
persistent = 0

[State 0, VarSet]
type = VarSet
triggerall = enemynear,name != "Jiren"
triggerall = enemynear,name != "Kefla"
triggerall = enemynear,name != "Kefla SSJ"
triggerall = enemynear,name != "Kefla (SSJ)"
Trigger1 = time = 2
Fv = 33
value = 1+random% 3
[State 0, VarSet]
type = VarSet
triggerall = enemynear,name = "Jiren"|| enemynear,name = "Kefla"|| enemynear,name = "Kefla SSJ"|| enemynear,name = "Kefla (SSJ)"
Trigger1 = time = 3
Fv = 33
value = 0

;----special intros
[State 0, PlaySnd]
type = PlaySnd
triggerall = enemynear,name = "Jiren"
Triggerall = Fvar(33) = 0
trigger1 = time = 340
value = S0,160
volumescale = 100
channel = 5

[State 0, PlaySnd]
type = PlaySnd
triggerall = enemynear,name = "Kefla"|| enemynear,name = "Kefla SSJ"|| enemynear,name = "Kefla (SSJ)"
Triggerall = Fvar(33) = 0
trigger1 = time = 340
value = S0,162
volumescale = 100
channel = 5
;----normals

[State 0, PlaySnd]
type = PlaySnd
Triggerall = Fvar(33) = 1
trigger1 = time = 340
value = S0,118
volumescale = 100
channel = 5

[State 0, PlaySnd]
type = PlaySnd
Triggerall = Fvar(33) = 2
trigger1 = time = 340
value = S0,119
volumescale = 100
channel = 5

[State 0, PlaySnd]
type = PlaySnd
Triggerall = Fvar(33) = 3
trigger1 = time = 340
value = S0,123
volumescale = 100
channel = 5
;----normals
;voces-----------------------------------------------------------------------------------

;selector--------------------------------------------------------------------------------
[State 0, VarSet]
type = VarSet
triggerall = ailevel = 0
trigger1 = !time;time = 0
v = 22 
value = 0+palno
[State 0, VarAdd]
type = VarAdd
triggerall = ailevel = 0
triggerall = time > 320
triggerall = anim = 190
trigger1 = command = "fwd"
v = 22
value = cond(var(22) = 22,-21,cond(var(22) = 0,2,1))
[State 0, VarAdd]
type = VarAdd
triggerall = ailevel = 0
triggerall = time > 320
triggerall = anim = 190
trigger1 = command = "back"
v = 22
value = cond(var(22) = 1,21,cond(var(22) = 0,22,-1))

[State 0, VarAdd]
type = VarAdd
triggerall = var(28) = 1
triggerall = ailevel = 0
triggerall = anim = 190 && time >10
trigger1 = command = "up"
v = 26
value = cond(var(26) = 10,-9,cond(var(26) = 0,2,1))
[State 0, VarAdd]
type = VarAdd
triggerall = var(28) = 1
triggerall = ailevel = 0
triggerall = anim = 190 && time >10
trigger1 = command = "down"
v = 26
value = cond(var(26) = 1,9,cond(var(26) = 0,10,-1))

[State 0, PlaySnd]
type = PlaySnd
triggerall = ailevel = 0
triggerall = anim = 190 && time >10
trigger1 = command = "down"
trigger2 = command = "up"
value = S5,9
volumescale = 50

[State 0, ASSIST CONFIG]
type = VarSet
triggerall = var(28) = 1
triggerall = ailevel = 0
trigger1 = !time
v = 26    
value = 1;1
; 1 for ALL
; 2 for Vegeta BE
; 3 for Ultimate Gohan
; 4 for Android 17
; 5 for Golden Frieza (Dead)
; 6 for Kuririn
; 7 for Android 18
; 8 for Piccolo
; 9 for Tien
; 10 for Gogeta B
;!!!!!!!!!!

[State 0, ASSIST AI]
type = VarSet
triggerall = var(28) = 1
triggerall = ailevel >0
trigger1 = !time
v = 26    
value = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = ailevel = 0
triggerall = time > 320
triggerall = anim = 190
trigger1 = command = "back"
trigger2 = command = "fwd"
value = S1,2
volumescale = 50
[State 0, Explod]
type = Explod
triggerall = ailevel = 0
triggerall = time > 320
triggerall = anim = 190
trigger1 = command = "back"
trigger2 = command = "fwd"
anim = 195
ID = 195
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1*const(size.xscale),1*const(size.yscale)
sprpriority = 3

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 191
triggerall = ailevel = 0
triggerall = time > 406
triggerall = anim = 190
trigger1 = command = "s"
trigger2 = time > cond(var(53) = 0,646,806)
value = 191

[State 0, VarSet]
type = VarSet
triggerall = teamside = 1
triggerall = ailevel > 0
trigger1 = time = 0
v = 22 
value = 1
[State 0, VarSet]
type = VarSet
triggerall = teamside = 2
triggerall = ailevel > 0
trigger1 = time = 0
v = 22 
value = cond((p2name = "Muiku"),2,1)
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = anim != 191
triggerall = ailevel > 0
trigger1 = time > cond(var(53) = 0,1000,520)
value = 191
;selector--------------------------------------------------------------------------------

[State 0, Intro Especial]
type = VarSet
trigger1 = enemynear,name = "Jiren"
trigger2 = enemynear,name = "Kefla"||enemynear,name = "Kefla SSJ"
v = 53    
value = 1
ignorehitpause = 1

[State 190, 2]
type = AssertSpecial
trigger1 = 1
flag = Intro

;----- FINAL
[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 191&&!animtime
value = S2,3;charge sound
volumescale = 20
[State 0, PlaySnd]
type = PlaySnd
trigger1 = anim = 191&&!animtime
value = S5,8;charge sound
volumescale = 80

[State 0, Aura]
type = Explod
trigger1 = anim = 191&&!animtime
anim = 551
ID = 551
pos = 0,3*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.25*const(size.yscale)
sprpriority = 6
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
[State 0, Aura]
type = Explod
trigger1 = anim = 191&&!animtime
anim = 551
ID = 551
pos = 0,3*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.25*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
[State 0, Aura]
type = Explod
trigger1 = anim = 191&&!animtime
anim = 551
ID = 551
pos = 0,3*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.25*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33

[State 0, Ondas]
type = Explod
trigger1 = anim = 191&&!animtime
anim = 7018
ID = 7018
pos = 0,0
postype = p1
scale = .3*const(size.xscale),.25*const(size.yscale)
sprpriority = -10
ontop = 0
ownpal = 1
removeongethit = 1
[State 0, Ondas]
type = Explod
trigger1 = anim = 191&&!animtime
anim = 8220
ID = 8220
pos = 0,0
postype = p1
scale = .5*const(size.xscale),.4*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1

[State 0, Tierra Pared]
type = Explod
trigger1 = anim = 191&&!animtime
anim = 8230
ID = 8230
pos = 0,1
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 0
trans = addalpha
alpha = 75,256

[State 0, EnvShake]
type = EnvShake
trigger1 = anim = 191&&!animtime
time = 8
;----- FINAL

[State 190, 4]
type = ChangeState
triggerall = anim = 191
trigger1 = animtime = 0
value = 0
;-------------------------------------------------------------------------------
; Zoom
[Statedef 192]
physics = N
type = S
ctrl = 0
anim = 9999
velset = 0,0
sprpriority = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0
ignorehitpause = 1

[State 183, Zoom1]
type = Zoom
triggerall = teammode != simul && enemy,teammode != simul 
trigger1 = parent,anim = 190
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom;(Pos X)* CameraZoom +80,(Pos Y -1)* CameraZoom
scale = 1.8+time*.0001/camerazoom
space = screen
ignorehitpause = 1
lag = .3
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom1]
type = Zoom
triggerall = teammode != simul && enemy,teammode != simul 
trigger1 = parent,anim = 191
pos = (Pos X),(Pos Y -1)
scale = 1
space = screen
ignorehitpause = 1
lag = .6
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, DestroySelf]
type = DestroySelf
trigger1 = parent,stateno != 191
ignorehitpause = 1
;===============================================================================
; Standing Attacks
;-------------------------------------------------------------------------------
; A - 1
[Statedef 200]
type    = S
movetype= A
physics = S
juggle  = 2
Velset = 0,0
ctrl = 0
anim = 200
poweradd = 80+(var(2)*20)
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,34
volumescale = 100
channel = 5

;_--------------------COMBO
[State 0, VarAdd]
type = VarAdd
triggerall = prevstateno!=200
trigger1 = !time
v = 41
value = 1
persistent = 0
;_--------------------COMB0

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 0, CLASH HIT]
type = HitOverride
triggerall = enemynear,facing != facing
triggerall = !cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x)
triggerall = (!enemynear,ishelper)
trigger1 = animelem = 4
attr = SCA,NA       
stateno = 8000
forceair = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,4
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Light
damage    = 10
guardflag = MA
pausetime = 6,7
guard.pausetime = 6,5
guard.hittime = 15
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,3
guardsound = S4,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 17
air.hittime = 35
ground.velocity = (-5*const(size.xscale))+var(54)*.01
air.velocity = (-1*const(size.xscale)),(-2-var(54)*.01)*const(size.yscale)
Fall = 0
air.fall = 1
fall.recover = 1
Envshake.time = 8

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 22*const(size.xscale),-33*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .2*const(size.xscale)
size.yscale = .2*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = 22*const(size.xscale),-33*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .2*const(size.xscale)
size.yscale = .2*const(size.yscale)
ignorehitpause = 1
persistent = 0

;----------------------------subspecials
[State 420, Down Z]
type = ChangeState
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && command = "holddown"  && movecontact
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/14 && p2bodydist x > 40
;trigger2 = p2bodydist y < -27
value = 420
[State 430, Fwd Z]
type = ChangeState
triggerall = power >= 200
trigger1 = ailevel = 0 && command = "z" && command = "holdfwd" && movecontact
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/22 && p2bodydist x < 80
value = 430
[State 400, Z]
type = ChangeState
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && movecontact
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/14 && p2bodydist x > 40
value = 400
;----------------------------subspecials

[State 300, Low A]
type = ChangeState
triggerall = var(44) = 0
trigger1 = ailevel = 0 && command = "a" && command = "holddown" && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/3 && enemynear,pos y >-8
;trigger3 = roundstate = 2 && ailevel > 0 && moveguarded && enemynear,statetype != C && enemynear,pos y>= -const(size.height)*.12 && random < (ailevel * 100)
;trigger3 = p2stateno = [120,155] 
value = 300
[State 200, Jab]
triggerall = prevstateno != 200
type = ChangeState
trigger1 = ailevel = 0 && command = "a" && command = "holdback" && movecontact
trigger2 = ailevel = 0 && command = "a" && command = "holdback" && time >= 8 && !movecontact
trigger3 = ailevel > 0  && movecontact && random < (ailevel * 100)/3
value = 200
[State 200, A - 2]
type = ChangeState
trigger1 = ailevel = 0 && command = "a" && movecontact
trigger2 = ailevel = 0 && command = "a" && time >= 9 && !movecontact
trigger3 = ailevel > 0  && movecontact && random < (ailevel * 100)/2
trigger4 = roundstate = 2 && time >= 9 && ailevel > 0 && random < (ailevel * 100)/4 && p2bodydist x > 60
value = 201

[State 310, Low B]
type = ChangeState
triggerall = var(45) = 0
trigger1 = ailevel = 0 && command = "b" && command = "holddown" && movecontact
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/13
;trigger3 = roundstate = 2 && ailevel > 0 && moveguarded && enemynear,statetype != C && enemynear,pos y>= -const(size.height)*.12 && random < (ailevel * 100)/2
;trigger3 = p2stateno = [120,155] 
value = 310
[State 210, B - 1]
type = ChangeState
trigger1 = ailevel = 0 && command = "b" && movecontact
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/13
value = cond(prevstateno = 210,211,210)

[State 320, Low C]
type = ChangeState
triggerall = var(46) = 0
trigger1 = ailevel = 0 && command = "c" && command = "holddown" && movecontact
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/15
;trigger3 = roundstate = 2 && ailevel > 0 && moveguarded && enemynear,statetype != C && enemynear,pos y>= -const(size.height)*.12 && random < (ailevel * 100)/2
;trigger3 = p2stateno = [120,155] 
value = 320
[State 220, C - 1]
type = ChangeState
trigger1 = ailevel = 0 && command = "c" && movecontact
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/5
value = 220

[State 40, Jump]
type = ChangeState
Trigger1 = cond(var(2)>0,movecontact,movehit)
trigger1 = ailevel = 0 && command = "up"
;Trigger2 = movehit
;trigger2 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/24
value = 40

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; A - 2
[Statedef 201]
type    = S
movetype= A
physics = S
juggle  = 0
Velset = 0,0
ctrl = 0
anim = 201
poweradd = 80+(var(2)*20)
facep2 = 1
sprpriority = 2

[State 0, Explod]
type = Explod
trigger1 = !numexplod(201)
persistent = 0
anim = 9999
ID = 201
pos = 0,0
postype = p1 
facing = 1
vfacing = 1
bindtime = 1
removetime = 35
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
ownpal = 0
removeongethit = 1
ignorehitpause = 0
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = movecontact
id = 201
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,35
volumescale = 100
channel = 5

;_--------------------COMBO
[State 0, VarAdd]
type = VarAdd
trigger1 = !time
v = 41
value = 1
persistent = 0
;_--------------------COMB0

[State 0, CLASH HIT]
type = HitOverride
triggerall = enemynear,facing != facing
triggerall = !cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x)
triggerall = (!enemynear,ishelper)
trigger1 = animelem = 7||animelem = 8
attr = SCA,NA       
stateno = 8010
forceair = 0
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 1||animelem = 2
helpertype = normal ;player
name = "soru"
ID = 6010
stateno = 6010
pos = (-9+random%19)*const(size.xscale),(-5-random%34)*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .14*const(size.xscale)
size.yscale = .09*const(size.yscale)
size.height = 90 ;Angle
persistent = 1
[State 0, Helper]
type = Helper
trigger1 = animelem = 1||animelem = 2
helpertype = normal ;player
name = "soru"
ID = 6010
stateno = 6010
pos = (-9+random%19)*const(size.xscale),(-5-random%44)*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .14*const(size.xscale)
size.yscale = .09*const(size.yscale)
size.height = 90 ;Angle
persistent = 1
[State 0, Helper]
type = Helper
trigger1 = animelem = 4||animelem = 5
helpertype = normal ;player
name = "soru"
ID = 6010
stateno = 6010
pos = (-9+random%19)*const(size.xscale),(-5-random%44)*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .09*const(size.xscale)
size.yscale = .09*const(size.yscale)
size.height = 98 ;Angle
persistent = 1
[State 0, Helper]
type = Helper
trigger1 = animelem = 4||animelem = 5
helpertype = normal ;player
name = "soru"
ID = 6010
stateno = 6010
pos = (-9+random%19)*const(size.xscale),(-5-random%44)*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .09*const(size.xscale)
size.yscale = .09*const(size.yscale)
size.height = 98 ;Angle
persistent = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -2
[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = 4*const(size.xscale)
y = 1.8*const(size.yscale)

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = (-2.5)*const(size.xscale)
y = -25*const(size.yscale)
ignorehitpause = 1
[State 0, NotHitBy]
type = NotHitBy
trigger1 = animelem = 2 || animelem = 3 || animelem = 4
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,11
volumescale = 70

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 3
statetype = A    
movetype = A       
physics = N         
ignorehitpause = 1
[State 0, PosSet]
type = PosSet
trigger1 = animelem = 9
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = animelem = 9
x = 1.2*const(size.xscale)
y = 0
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 9
statetype = S      
movetype = A        
physics = S        
ignorehitpause = 1

[State 0, Land]
type = Explod
trigger1 = animelem = 9
anim = 7014
ID = 7014
pos = 2*const(size.xscale),1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .23*const(size.xscale),.23*const(size.yscale)
sprpriority = -10
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
remappal = 0,38

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = animelem = 7
value = S5,2
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Medium
damage    = 12,2
guardflag = MA
pausetime = 5,7
guard.pausetime = 5,5
guard.hittime = 15
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,3+random%2
guardsound = S4,1
ground.type = High
ground.slidetime = 18
ground.hittime  = 18
air.hittime = 40
ground.velocity = (-4*const(size.xscale))
air.velocity = (-3*const(size.xscale))-var(54)*.01,(-2.3-var(54)*.01)*const(size.yscale)
Fall = 0
air.fall = 1
fall.recover = 0
Envshake.time = 9
ground.cornerpush.veloff = -6+var(41)*2

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 25*const(size.xscale),-13*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .23*const(size.xscale)
size.yscale = .23*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = 25*const(size.xscale),-13*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .23*const(size.xscale)
size.yscale = .23*const(size.yscale)
ignorehitpause = 1
persistent = 0

;----------------------------subspecials
[State 420, Down Z]
type = ChangeState
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && command = "holddown"  && movecontact
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/14 && p2bodydist x > 40
;trigger2 = p2bodydist y < -27
value = 420
[State 430, Fwd Z]
type = ChangeState
triggerall = power >= 200
trigger1 = ailevel = 0 && command = "z" && command = "holdfwd" && movecontact
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/22 && p2bodydist x < 80
value = 430
[State 400, Z]
type = ChangeState
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && movecontact
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/14 && p2bodydist x > 40
value = 400
;----------------------------subspecials

[State 310, Low B]
type = ChangeState
triggerall = var(45) = 0
trigger1 = ailevel = 0 && command = "b" && command = "holddown" && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/3 && enemynear,pos y >-10
trigger3 = roundstate = 2 && ailevel > 0 && moveguarded && enemynear,statetype != C && enemynear,pos y>= -const(size.height)*.12 && random < (ailevel * 100)/2 && enemynear,pos y >-10
trigger3 = p2stateno = [120,155] 
value = 310
[State 210, B - 1]
type = ChangeState
trigger1 = ailevel = 0 && command = "b" && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/4
value = cond(prevstateno = 210,211,210)
ctrl = 0

[State 300, Low A]
type = null
triggerall = var(45) = 0
trigger1 = ailevel = 0 && command = "a" && command = "holddown" && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/6
trigger3 = roundstate = 2 && ailevel > 0 && moveguarded && enemynear,statetype != C && enemynear,pos y>= -const(size.height)*.12 && random < (ailevel * 100)/2
trigger3 = p2stateno = [120,155] 
value = 300
[State 202, A - 3]
type = ChangeState
trigger1 = ailevel = 0 && command = "a" && movecontact
trigger2 = ailevel = 0 && command = "a" && time >= 17 && !movecontact
trigger3 = ailevel > 0  && movecontact && random < (ailevel * 100)/2
trigger4 = roundstate = 2 && time >= 17 && ailevel > 0 && random < (ailevel * 100)/4 && (p2bodydist x = [0,55])
value = 202
ctrl = 0

[State 320, Low C]
type = ChangeState
triggerall = var(46) = 0
trigger1 = ailevel = 0 && command = "c" && command = "holddown" && movecontact
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/16
;trigger3 = roundstate = 2 && ailevel > 0 && moveguarded && enemynear,statetype != C && enemynear,pos y>= -const(size.height)*.12 && random < (ailevel * 100)/2
;trigger3 = p2stateno = [120,155] 
value = 320
[State 220, C - 1]
type = ChangeState
trigger1 = ailevel = 0 && command = "c" && movecontact
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/18
value = 220
ctrl = 0

[State 40, Jump]
type = ChangeState
Trigger1 = cond(var(2)>0,movecontact,movehit)
trigger1 = ailevel = 0 && command = "up"
;Trigger2 = movehit
;trigger2 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/24
value = 40

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; A - 3
[Statedef 202]
type    = S
movetype= A
physics = N
juggle  = 0
Velset = 0,0
ctrl = 0
anim = 202
poweradd = 80+(var(2)*20)
sprpriority = 4

;_--------------------COMBO
[State 0, VarAdd]
type = VarAdd
trigger1 = !time
v = 41
value = 1
persistent = 0
;_--------------------COMB0

;-----------prev 201
[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
;-----------prev 201

[State 0, PlayerPush]
type = PlayerPush
triggerall = frontedgedist > 5
trigger1 = time < 24
value = 0
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
triggerall = vel x > -.05
trigger1 = p2bodydist x < -2
x = (-.100)+p2bodydist x*.0133

[State 0, Turn]
type = Turn
trigger1 = animtime = 0 && cond(facing = 1,pos x > enemynear,pos x +1,pos x < enemynear,pos x -1)
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem=4 && !movecontact
x = 2

[State 0, VelSet]
type = VelSet
trigger1 = time = 4
x = 5
[State 0, VelSet]
type = VelSet
triggerall = p2bodydist x = [-10,58]
trigger1 = time = 4
x = 5+p2bodydist x*.086
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 20
statetype = S       ;S,A,C,L
movetype = A       ;I,A,H
physics = S         ;A,C,S,N
ignorehitpause = 1
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = numexplod(201)
flag = unguardable
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,4
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, NT
animtype  = Light
damage    = 8
guardflag = MA
pausetime = 6,7
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S5,5
guardsound = S4,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 23
air.hittime = 35
ground.velocity = (4*const(size.xscale))-var(54)*.01
air.velocity = (1.8*const(size.xscale)),(-2.2)*const(size.yscale)
Fall = 0
air.fall = 1
fall.recover = 1
Envshake.time = 4
forcestand= 1
hitonce = 1
id =202;p2stateno = 34673
yaccel = .3
p2sprpriority = 3
p1sprpriority = 4
p2facing = 1

[State 0, TargetState]
type = TargetState
triggerall = movehit
triggerall = numtarget(202)
trigger1 = !target(202),ishelper
value = 34673
ID = 202
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 26*const(size.xscale),-39*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .2*const(size.xscale)
size.yscale = .2*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 016
stateno = 800
pos = 26*const(size.xscale),-39*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .2*const(size.xscale)
size.yscale = .2*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 203, A - 4]
type = ChangeState
trigger1 = movecontact && time >= 14 
;trigger3 = ailevel = 0 && command = "a" && time >= 17 && !movecontact
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/2
;trigger4 = roundstate = 2 && time >= 17 && ailevel > 0 && random < (ailevel * 100)/4 && p2bodydist x > 40
value = 203
[State 0, PosAdd]
type = PosAdd
trigger1 = movehit
x = 9
y = 0
ignorehitpause = 1
persistent = 0

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; A - 4
[Statedef 203]
type    = S
movetype= A
physics = S
juggle  = 0
Velset = 0,0
ctrl = 0
anim = 203
poweradd = 80+(var(2)*20)
facep2 = 1
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,36
volumescale = 100
channel = 5

;_--------------------COMBO
[State 0, VarAdd]
type = VarAdd
trigger1 = !time
v = 41
value = 1
persistent = 0
;_--------------------COMB0

[State 0, CLASH HIT]
type = HitOverride
triggerall = enemynear,facing != facing
triggerall = !cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x)
triggerall = (!enemynear,ishelper)
trigger1 = animelem = 5||animelem = 6
attr = SCA,NA       
stateno = 8000
forceair = 0
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -1
[State 0, VelSet]
type = VelSet
trigger1 = time = 6
x = 9

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,2
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Medium
damage    = 15
guardflag = MA
pausetime = 8,8
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,7+random%2
guardsound = S4,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 50
air.hittime = 50
ground.velocity = (-3*const(size.xscale))+var(54)*.01
air.velocity = (-2*const(size.xscale)),(-4)*const(size.yscale)
yaccel = .4
Fall = 0
forcestand = 1
forcenofall = 1
air.fall = 1
fall.recover = 1
Envshake.time = 12

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 18*const(size.xscale),-32*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .21*const(size.xscale)
size.yscale = .21*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = 18*const(size.xscale),-32*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .21*const(size.xscale)
size.yscale = .21*const(size.yscale)
ignorehitpause = 1
persistent = 0

;----------------------------subspecials
[State 420, Down Z]
type = ChangeState
triggerall = var(2)>0 ; Sparking
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && command = "holddown"  && movecontact
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/14 && p2bodydist x > 40
;trigger2 = p2bodydist y < -27
value = 420
[State 430, Fwd Z]
type = ChangeState
triggerall = var(2)>0 ; Sparking
triggerall = power >= 200
trigger1 = ailevel = 0 && command = "z" && command = "holdfwd" && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/17 && p2bodydist x < 80
trigger2 = power >= 1500
value = 430
[State 400, Z]
type = ChangeState
triggerall = var(2)>0 ; Sparking
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && movecontact
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/14 && p2bodydist x > 40
value = 400
;----------------------------subspecials

[State 310, Low B]
type = ChangeState
triggerall = var(2)>0 ; Sparking
triggerall = var(45) = 0
trigger1 = ailevel = 0 && command = "b" && command = "holddown" && movecontact
trigger2 = ailevel = 0 && command = "b" && command = "holddown"  && time >= 17 && !movecontact
trigger3 = ailevel > 0  && movecontact && random < (ailevel * 100)/3 && enemynear,pos y >-10
trigger4 = roundstate = 2 && time >= 17 && ailevel > 0 && random < (ailevel * 100)/16 && p2bodydist x >  50 && enemynear,pos y >-10
trigger5 = roundstate = 2 && ailevel > 0 && moveguarded && enemynear,statetype != C && enemynear,pos y>= -const(size.height)*.12 && random < (ailevel * 100)/2
trigger5 = (p2stateno = [120,155]) && enemynear,pos y >-10
value = 310
[State 211, B - 2]
type = ChangeState
triggerall = var(2)>0 ; Sparking
trigger1 = ailevel = 0 && command = "b" && movecontact
trigger2 = ailevel = 0 && command = "b" && time >= 17 && !movecontact
trigger3 = ailevel > 0  && movecontact && random < (ailevel * 100)/3
trigger4 = roundstate = 2 && time >= 17 && ailevel > 0 && random < (ailevel * 100)/15 && p2bodydist x >  50
value = 211

[State 204, A - 5]
type = ChangeState
trigger1 = movecontact && animelem = 8
value = 204

[State 220, C - 1]
type = ChangeState
triggerall = var(2)>0 ; Sparking
trigger1 = ailevel = 0 && command = "c" && movecontact
trigger2 = ailevel = 0 && command = "c" && time >= 17 && !movecontact
trigger3 = ailevel > 0  && movecontact && random < (ailevel * 100)/12
trigger4 = roundstate = 2 && time >= 17 && ailevel > 0 && random < (ailevel * 100)/17 && p2bodydist x >  50
value = 220

[State 40, Jump]
type = ChangeState
triggerall = var(2)>0 ; Sparking
Trigger1 = movecontact
trigger1 = ailevel = 0 && command = "up"
;Trigger2 = movehit
;trigger2 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/4
value = 40

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; A - 5
[Statedef 204]
type    = S
movetype= A
physics = S
juggle  = 0
Velset = -1,0
ctrl = 0
anim = 204
poweradd = 100+(var(2)*20)
facep2 = 1
sprpriority = 2

[State 0, Explod]
type = Explod
trigger1 = movehit
persistent = 0
anim = 9999
ID = 204
pos = 0,0
postype = p1 
facing = 1
vfacing = 1
bindtime = 1
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
ownpal = 0
removeongethit = 1
ignorehitpause = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,39
volumescale = 100
channel = 5

;_--------------------COMBO
[State 0, VarSet]
type = VarAdd
trigger1 = !time
v = 41
value = 5
persistent = 0
;_--------------------COMB0

[State 0, CLASH HIT]
type = HitOverride
triggerall = enemynear,facing != facing
triggerall = !cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x)
triggerall = (!enemynear,ishelper)
trigger1 = animelem = 6
attr = SCA,NA       
stateno = 8000
forceair = 0
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 2
x = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,2
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Up
damage    = 30
guardflag = MA
pausetime = 15,15
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,10
guardsound = S4,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 45
air.hittime = 45
ground.velocity = (-3*const(size.xscale))+var(54)*.01,-8*const(size.yscale)
air.velocity = (-4*const(size.xscale)),(-7.5)*const(size.yscale)
Fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 45
yaccel = .4
Envshake.time = 17
p2facing = 1

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 25*const(size.xscale),-37*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .25*const(size.xscale)
size.yscale = .24*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 25*const(size.xscale),-37*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .25*const(size.xscale)
size.yscale = .24*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
triggerall = teammode != simul && enemynear,teammode != simul
trigger1 = movehit = 1
helpertype = normal
name = "zoom"
ID = 9900
stateno = 9900
pos = 25*const(size.xscale),-37*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent = 0

;----------------------------subspecials
[State 420, Down Z]
type = ChangeState
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && command = "holddown"  && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/4 && p2bodydist x > 40
trigger2 = p2bodydist y < -15
value = 420
[State 430, Fwd Z]
type = ChangeState
triggerall = power >= 200
trigger1 = ailevel = 0 && command = "z" && command = "holdfwd" && movecontact
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/29 && p2bodydist x < 80
value = 430
[State 400, Z]
type = ChangeState
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && movecontact
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/14 && p2bodydist x > 40
value = 400
;----------------------------subspecials

[State 40, Jump]
type = ChangeState
;triggerall = var(2) >0
Trigger1 = movecontact
trigger1 = ailevel = 0 && command = "up"
Trigger2 = movehit
trigger2 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/4
value = 40

[State 950, A - 6]
type = ChangeState
triggerall = numhelper(953) = 0
trigger1 = ailevel = 0 && command = "a" && movecontact ;&& prevstateno = 203
trigger2 = ailevel > 0  && movehit && random < (ailevel * 100)/6
trigger3 = ailevel = 0 && command = "y" && movecontact
value = 950

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = cond(prevstateno = 901,50,0)
ctrl = 1
;-------------------------------------------------------------------------------
; P2 - 202
[Statedef 34673]
type    = S
movetype= H
physics = S
juggle  = 1
anim = 5000
ctrl = 0
sprpriority = 3
Facep2 = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = backedgebodydist < 40
x = 5
y = 0
ignorehitpause = 1
persistent = 0
[State 0, VelAdd]
type = VelAdd
trigger1 = frontedgebodydist < 40
x = -5
y = 0
ignorehitpause = 1
persistent = 0

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5300;+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time < 12
value = 0
ignorehitpause = 1

[State 200, End]
type = SelfState
trigger1 = time = 30
value = 5000
;-------------------------------------------------------------------------------
; B
[Statedef 210]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 210
poweradd = 100+(var(2)*20)
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,42
volumescale = 100
channel = 5

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 0, CLASH HIT]
type = HitOverride
triggerall = enemynear,facing != facing
triggerall = !cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x)
triggerall = (!enemynear,ishelper)
trigger1 = animelem = 5
attr = SCA,NA       
stateno = 8000
forceair = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 3
x = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 7
value = S5,2
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Medium
damage    = 14,2
guardflag = MA
pausetime = 6,7
guard.pausetime = 6,6
guard.hittime = 16
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,4+random%2
guardsound = S4,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
air.hittime = 50
ground.velocity = (-2*const(size.xscale))-var(54)*.01
air.velocity = (-1.4*const(size.xscale))-var(54)*.02,(-4+var(54)*.005)*const(size.yscale)
Fall = 0
air.fall = 1
fall.recover = 1
Envshake.time = 14
ground.cornerpush.veloff = -6
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -8
airguard.cornerpush.veloff = -9
yaccel = .4

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 34*const(size.xscale),-30*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .21*const(size.xscale)
size.yscale = .21*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = 34*const(size.xscale),-30*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .21*const(size.xscale)
size.yscale = .21*const(size.yscale)
ignorehitpause = 1
persistent = 0

;----------------------------subspecials
[State 420, Down Z]
type = ChangeState
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && command = "holddown"  && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/14 && p2bodydist x > 40
trigger2 = p2bodydist y < -27
value = 420
[State 430, Fwd Z]
type = ChangeState
triggerall = power >= 200
trigger1 = ailevel = 0 && command = "z" && command = "holdfwd" && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/22 && p2bodydist x < 80
value = 430
[State 400, Z]
type = ChangeState
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/14 && p2bodydist x > 40
value = 400
;----------------------------subspecials

[State 40, Jump]
type = ChangeState
Trigger1 = cond(var(2)>0,movecontact,movehit)
trigger1 = ailevel = 0 && command = "up"
Trigger2 = movehit 
trigger2 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/4 && prevstateno = 310
value = 40

[State 320, Low C]
type = ChangeState
triggerall = var(46) = 0
trigger1 = ailevel = 0 && command = "c" && command = "holddown" && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/7 && prevstateno = 310
value = 320
[State 211, C - 1]
type = ChangeState
trigger1 = ailevel = 0 && command = "c" && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/8 && prevstateno = 310
value = 220

[State 619, Fwd B]
type = ChangeState
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "b" && command = "holdfwd"
trigger2 = roundstate = 2 && ailevel > 0 && enemynear,statetype = C && enemynear,pos y>= -const(size.height)*.12 && random < (ailevel * 100)/5
trigger2 = p2stateno = [120,155] 
value = 619

[State 310, Low B]
type = ChangeState
triggerall = var(45) = 0
trigger1 = ailevel = 0 && command = "b" && command = "holddown" && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/5 && prevstateno = 201 && enemynear,pos y >-10
value = 310

[State 211, B - 2]
type = ChangeState
trigger1 = animelem = 7;ailevel = 0 && command = "hold_b" && time >= 12 ;&& !movecontact
value = 211

[State 0, Explod]
type = Explod
trigger1 = !numexplod(210) && movecontact
persistent = 0
anim = 9999
ID = 210
pos = 0,0
postype = p1 
facing = 1
vfacing = 1
bindtime = 1
removetime = 25
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
ownpal = 0
removeongethit = 1
ignorehitpause = 0

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; B - 2
[Statedef 211]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 211
poweradd = 100+(var(2)*20)
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time && prevstateno!= 210
value = S0,41
volumescale = 100
channel = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=4
value = S5,13
volumescale = 50
[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 7030
ID = 7030
pos = 25*const(size.xscale),0;-pos y
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = .16*const(size.xscale),.25*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
remappal = 0,35
[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 7030
ID = 7030
pos = 25*const(size.xscale),0;-pos y
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = .16*const(size.xscale),.2502*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 0
trans = sub

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 0, CLASH HIT]
type = HitOverride
triggerall = enemynear,facing != facing
triggerall = !cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x)
triggerall = (!enemynear,ishelper)
trigger1 = animelem = 4
attr = SCA,NA       
stateno = 8000
forceair = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -1
[State 0, VelSet]
type = VelSet
trigger1 = time = 2
x = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 7
value = S5,1
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Medium
damage    = 16,3
guardflag = MA
pausetime = 7,8
guard.pausetime = 7,7
guard.hittime = 16
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,6+random%2
guardsound = S4,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 20
air.hittime = 50
ground.velocity = (-3*const(size.xscale))-var(54)*.01
air.velocity = (-1.5*const(size.xscale))-var(54)*.02,(-3.9+var(54)*.0002)*const(size.yscale)
Fall = 0
air.fall = 1
fall.recover = 1
Envshake.time = 14
ground.cornerpush.veloff = -6
air.cornerpush.veloff = -5
guard.cornerpush.veloff = -8
airguard.cornerpush.veloff = -9
yaccel = .4

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 25*const(size.xscale),-3.5*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .22*const(size.xscale)
size.yscale = .22*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = 25*const(size.xscale),-3.5*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .22*const(size.xscale)
size.yscale = .22*const(size.yscale)
ignorehitpause = 1
persistent = 0

;----------------------------subspecials
[State 420, Down Z]
type = ChangeState
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && command = "holddown"  && (movecontact||numexplod(210))
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/14 && p2bodydist x > 40
;trigger2 = p2bodydist y < -27
value = 420
[State 430, Fwd Z]
type = ChangeState
triggerall = power >= 200
trigger1 = ailevel = 0 && command = "z" && command = "holdfwd" && (movecontact||numexplod(210))
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/8 && p2bodydist x < 80
trigger2 = power >= 1500
value = 430
[State 400, Z]
type = ChangeState
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && (movecontact||numexplod(210))
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/7 && p2bodydist x > 40
value = 400
;----------------------------subspecials

[State 40, Jump]
type = ChangeState
Trigger1 = cond(var(2)>0,(movecontact||numexplod(210)),(movehit||numexplod(210)))
trigger1 = ailevel = 0 && command = "up"
;Trigger2 = movehit
;trigger2 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/3
value = 40

[State 619, Fwd B]
type = ChangeState
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "b" && command = "holdfwd"
trigger2 = roundstate = 2 && ailevel > 0 && enemynear,statetype = C && enemynear,pos y>= -const(size.height)*.12 && random < (ailevel * 100)/5
trigger2 = p2stateno = [120,155] 
value = 619

[State 320, Low C]
type = ChangeState
triggerall = var(46) = 0
Triggerall = movecontact||numexplod(210)
trigger1 = ailevel = 0 && command = "c" && command = "holddown"
trigger2 = roundstate = 2 && ailevel > 0 && enemynear,pos y>= -const(size.height)*.35 && random < (ailevel * 100)/15
trigger3 = roundstate = 2 && ailevel > 0 && enemynear,statetype != C && enemynear,pos y>= -const(size.height)*.12 && random < (ailevel * 100)/2
trigger3 = p2stateno = [120,155] 
value = 320
[State 220, C]
type = ChangeState
Triggerall = movecontact||numexplod(210)
trigger1 = ailevel = 0 && command = "c" 
trigger2= ailevel > 0  && random < (ailevel * 100)/5
value = 220

[State 310, Low B]
type = ChangeState
triggerall = var(45) = 0
Triggerall = movecontact;||numexplod(210)
trigger1 = ailevel = 0 && command = "b" && command = "holddown"
trigger2 = ailevel = 0 && command = "b" 
trigger3 = roundstate = 2 && ailevel > 0 && enemynear,pos y>= -const(size.height)*.35 && random < (ailevel * 100)/3 && enemynear,pos y >-10
trigger4 = roundstate = 2 && ailevel > 0 && enemynear,statetype != C && enemynear,pos y>= -const(size.height)*.12 && random < (ailevel * 100)/2
trigger4 = (p2stateno = [120,155]) && enemynear,pos y >-10 
value = 310

[State 200, A] ; Sparking
type = ChangeState
triggerall = var(2)>0
Triggerall = movecontact||numexplod(210)
trigger1 = ailevel = 0 && command = "a" 
trigger2= ailevel > 0  && random < (ailevel * 100)/3
value = 204

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; C
[Statedef 220]
type    = S
movetype= A
physics = S
juggle  = 1
Velset = 0,0
ctrl = 0
anim = 220
poweradd = 100+(var(2)*20)
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,43
volumescale = 100
channel = 5

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 0, Viento Grande]
type = Explod
trigger1 = time = 10
anim = 7023
ID = 7023
pos = 6,0
postype = p1
scale = .3*const(size.xscale),.2*const(size.yscale)
sprpriority = 2
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,38
[State 0, EnvShake]
type = EnvShake
trigger1 = time = 10
time = 6
[State 0, AfterImage]
type = AfterImage
trigger1 = time = 10
time = 5
length = 10
palbright = 0,0,0
palcontrast = 100,100,100
paladd = 0,0,0
palmul = .90, .90, .90
timegap = 1
framegap = 1
trans = add
ignorehitpause = 1
persistent = 1
[State 0, Fly Lines]
type = Helper
triggerall = frontedgebodydist > 30
triggerall = time = [11,18]
trigger1 = timemod = 2,0
helpertype = normal
name = "Fly Lines"
ID = 6000
stateno = 6003
pos = -15+random%8*const(size.xscale),(-15-random%25)*const(size.yscale)
postype = p1
facing = 1
ownpal = 1
Size.Xscale = .155*const(size.xscale)
Size.Yscale = .12*const(size.yscale)
size.shadowoffset = 0;angulo


[State 0, CLASH HIT]
type = HitOverride
triggerall = enemynear,facing != facing
triggerall = !cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x)
triggerall = (!enemynear,ishelper)
trigger1 = animelem = 6
attr = SCA,NA       
stateno = 8000
forceair = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = cond(prevstateno = 60,1,-2.7)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 4
value = S5,4
volume = 50
[State 0, VelSet]
type = VelSet
trigger1 = time = 9
x = cond(prevstateno = 60,14,12)

[State 0, Explod]
type = Explod
trigger1 = animelem = 6
anim = 6999
ID = 6999
pos = 32*const(size.xscale),-36*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 5
angle = 30
removetime = -2
pausemovetime = 99
supermovetime = 99
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 200, 1]
type = HitDef
trigger1 = !movecontact
attr = S, NA
animtype  = Hard
damage    = 35,8
guardflag = MA
pausetime = 9,10
guard.pausetime = 9,8
guard.hittime = 16
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,9
guardsound = S4,1
ground.type = High
ground.slidetime = 20+var(4)*10
ground.hittime  = 23+var(4)*10
air.hittime = 40+var(4)*10
ground.velocity = -6+var(54)*.008,-3+var(54)*.008
air.velocity = -7+var(54)*.008,-6+var(54)*.1
Fall = 1
air.fall = 1
fall.recover = 0
Envshake.time =18
guard.cornerpush.veloff = -17
airguard.cornerpush.veloff = -14
ground.cornerpush.veloff = -22
air.cornerpush.veloff = -18
id = 1

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 32*const(size.xscale),-36*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .24*const(size.xscale)
size.yscale = .24*const(size.yscale)
ignorehitpause = 1
persistent = 0


;-------------------------------------
[State 0, Onda Fuerte]
type = Explod
trigger1 = movehit
persistent = 0
anim = 7006
pos = 32*const(size.xscale),-36*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .48*const(size.xscale),.48*const(size.yscale)
sprpriority = 5
ownpal = 1
angle = var(1)
ignorehitpause = 1
;remappal = 10,0+root,var(22)
[State 0, Sangre Fuerte]
type = Explod
triggerall = random < 450
trigger1 = movehit
persistent = 0
anim = cond(random < 500,7007,7008)
pos = 32*const(size.xscale),-36*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .21*const(size.xscale),.21*const(size.yscale)
sprpriority = -1;2+random%4
ownpal = 1
angle = var(1)
ignorehitpause = 1

[State 0, Hitspark Fuerte1]
type = Explod
trigger1 = movehit
persistent = 0
anim = 7010
pos = 32*const(size.xscale),-36*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .24*const(size.xscale),.24*const(size.yscale)
sprpriority = 10
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 156,256
remappal = 10,0+var(22)
ignorehitpause = 1
[State 0, Hitspark Fuerte1]
type = Explod
trigger1 = movehit
persistent = 0
anim = 7010
pos = 32*const(size.xscale),-36*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .24*const(size.xscale),.24*const(size.yscale)
sprpriority = 0
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 100,256
remappal = 10,0+var(22)
ignorehitpause = 1
[State 0, Hitspark Fuerte1SUB]
type = Explod
trigger1 = movehit
persistent = 0
anim = 7010
pos = 32*const(size.xscale),-36*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .24*const(size.xscale),.24*const(size.yscale)
sprpriority = -1
ownpal = 1
trans = sub
angle = var(1)
ignorehitpause = 1

[State 0, Hitspark Fuerte2]
type = Explod
trigger1 = movehit
persistent = 0
anim = 7011
pos = 32*const(size.xscale),-36*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .24*const(size.xscale),.24*const(size.yscale)
sprpriority = -11
ownpal = 1
angle = var(1)
trans = add
remappal = 10,0+var(22)
ignorehitpause = 1
[State 0, Hitspark Fuerte2SUB]
type = Explod
trigger1 = movehit
persistent = 0
anim = 7011
pos = 32*const(size.xscale),-36*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .24*const(size.xscale),.24*const(size.yscale)
sprpriority = -12
ownpal = 1
trans = sub
angle = var(1)
ignorehitpause = 1

[State 0, Hitspark Fuerte3]
type = Explod
trigger1 = movehit
persistent = 0
anim = 7013
pos = 32*const(size.xscale),-36*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .24*const(size.xscale),.24*const(size.yscale)
sprpriority = -15
ownpal = 1
angle = var(1)
trans = add
remappal = 0,40
ignorehitpause = 1
[State 0, Hitspark Fuerte3SUB]
type = Explod
trigger1 = movehit
persistent = 0
anim = 7013
pos = 32*const(size.xscale),-36*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .24*const(size.xscale),.24*const(size.yscale)
sprpriority = -16
ownpal = 1
trans = sub
angle = var(1)
ignorehitpause = 1
;-----------------------------------------


[State 0, Smash Hit]
type = VarSet
trigger1 = !movecontact
v = 4   
value = cond(numexplod(220),0,1)
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = var(4) = 1
triggerall = numtarget(1)
triggerall = movehit
trigger1 = !target(1),ishelper
value = 34674
ID = 1
ignorehitpause = 1
persistent = 0
[State 0, ChangeState]
type = ChangeState
triggerall = var(4) = 1
;triggerall = var(47) = 0
triggerall = numtarget(1)
triggerall = movehit ;= 1
triggerall = target(1),stateno = 34674
trigger1 = !target(1),ishelper
value = 221
ctrl = 0
ignorehitpause = 1

;----------------------------subspecials
[State 420, Down Z]
type = ChangeState
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && command = "holddown"  && movecontact
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/9 && p2bodydist x > 40
;trigger2 = p2bodydist y < -27
value = 420
[State 430, Fwd Z]
type = ChangeState
triggerall = power >= 200
trigger1 = ailevel = 0 && command = "z" && command = "holdfwd" && movecontact
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/6 && p2bodydist x < 80
;trigger2 = power >= 1500
value = 430
[State 400, Z]
type = ChangeState
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/4 && p2bodydist x > 40
value = 400
;----------------------------subspecials

[State 40, Jump]
type = ChangeState
Trigger1 = cond(var(2)>0,movecontact,movehit)
trigger1 = ailevel = 0 && command = "up"
;Trigger2 = movehit
;trigger2 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/14
value = 40

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; C Succes
[Statedef 221]
type    = S
movetype= A
physics = S
Velset = 0,0
ctrl = 0
poweradd = 20+(var(2)*10)
sprpriority = 3

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 25   
value = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 9999
ID = 220
pos = 0,0
postype = p1 
facing = 1
vfacing = 1
bindtime = 1
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
ownpal = 0
removeongethit = 1
ignorehitpause = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,8
volumescale = 100

[State 0, Polvo]
type = Explod
triggerall = time < 27
trigger1 = timemod = 3,0
anim = 7022
ID = 7022
pos = 11*const(size.xscale),0
postype = p1
scale = (.1+time*.01)*const(size.xscale),(.1+time*.01)*const(size.yscale)
sprpriority = 2+random%6
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,35
[State 0, Polvo]
type = Explod
triggerall = time < 27
trigger1 = timemod = 3,0
anim = 7022
ID = 7022
pos = 11*const(size.xscale),0
postype = p1
scale = (.1+time*.01)*const(size.xscale),(.1+time*.01)*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33

[State 0, Tierra]
type = Explod
triggerall = time < 27
trigger1 = timemod = 3,0
anim = 7018
ID = 7018
pos = 0,0
postype = p1
scale = .3*const(size.xscale),.2*const(size.yscale)
sprpriority = -10
ontop = 0
ownpal = 1
removeongethit = 1
[State 0, Piedras]
type = Explod
triggerall = time < 27
trigger1 = timemod = 3,0
anim = 8220
ID = 8220
pos = 0,0
postype = p1
scale = .3*const(size.xscale),.2*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
facing = cond(random < 500,1,-1)
removeongethit = 1

[State 183, Zoom1]
type = Zoom
triggerall = teammode != simul && enemynear,teammode != simul
trigger1 = time = [0,20]
pos = ((pos x)+facing*80 / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom;(pos x+facing*80)+vel x*.01,pos y +camerazoom
scale = 1.8
lag = .70
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom2]
type = Zoom
triggerall = teammode != simul && enemynear,teammode != simul
trigger1 = time = [20,30]
pos = pos x,pos y +camerazoom
scale = 1
lag = .85
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 0, PosAdd]
type = PosAdd
trigger1 = frontedgebodydist < 40
x = -3
y = 0
ignorehitpause = 1

[State 0, Speedlines]
type = Explod
trigger1 = !time
anim = 225
ID = 225
pos= 160,Floor((1.33*GameHeight/GameWidth)*120)
scale=.7,.6
postype = back
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
vel = 0,0
accel = 0,0
pausemovetime = 9999
supermovetime = 9999
sprpriority = 3
ontop = 1
ownpal = 1
removeongethit = 1
persistent = 0
remappal =  10,0+var(22)

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = target(1),stateno = 34674
trigger1 = time < 28
value = 220
elem = 7
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = !time
triggerall = numtarget(1)
trigger1 = !target(1),ishelper
value = 34674
ID = 1
ignorehitpause = 1
persistent = 0
[State 0, TargetBind]
type = TargetBind
triggerall = numtarget(1)
trigger1 = time < 27
time = 1
id = 1
pos = 22*const(size.xscale),-3*const(size.yscale)
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = time = 28
triggerall = numtarget(1)
trigger1 = !target(1),ishelper
value = 82741
ID = 1
ignorehitpause = 1
persistent = 0

;----------------------------subspecials
[State 420, Down Z]
type = ChangeState
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && command = "holddown" && time > 30
trigger2 = ailevel > 0  && time > 30 && random < (ailevel * 100)/9 && p2bodydist x > 40
trigger2 = p2bodydist y < -27 && frontedgedist < 80
value = 420
[State 430, Fwd Z]
type = ChangeState
triggerall = power >= 200
trigger1 = ailevel = 0 && command = "z" && command = "holdfwd" && time > 30
;trigger2 = ailevel > 0  && time > 30 && random < (ailevel * 100)/6 && p2bodydist x < 80
;trigger2 = power >= 1500
value = 430
[State 400, Z]
type = ChangeState
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && time > 30
;trigger2 = ailevel > 0  && time > 30 && random < (ailevel * 100)/4 && p2bodydist x > 40
value = 400
;----------------------------subspecials

[State 40, Jump]
type = ChangeState
Trigger1 = time > 30
trigger1 = ailevel = 0 && command = "up"
;Trigger2 = time > 30
;trigger2 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/24
value = 40

[State 950, C - 2]
type = ChangeState
trigger1 = ailevel = 0 && command = "c" && time > 30
trigger2 = ailevel > 0  && time > 30 && random < (ailevel * 100)/5
trigger3 = ailevel = 0 && command = "y" && time > 30
value = 950

[State 0, PosAdd]
type = PosAdd
triggerall = teammode != simul && enemynear,teammode != simul
trigger1 = !time && frontedgedist < 130
x = (-130)+frontedgedist
y = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = frontedgebodydist > 40
trigger1 = time < 28
x = 4+(time*.022)
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = time = 29
x = -12
y = 0
ignorehitpause = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; P2 - 221
[Statedef 34674]
type    = S
movetype= H
physics = S
juggle  = 1
anim = 5000
ctrl = 0
sprpriority = 2
Facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5030;+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 200, End]
type = SelfState
trigger1 = time = 34
value = 5050
;===============================================================================
; Low A 
;-------------------------------------------------------------------------------
[Statedef 300]
type    = C
movetype= A
physics = C
juggle  = 1
ctrl = 0
anim = cond(var(44)=0,300,301)
poweradd = 60+(var(2)*20)
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,36+var(44)
volumescale = 100
channel = 5

;_--------------------COMBO
[State 0, VarAdd]
type = VarAdd
trigger1 = !time
v = 44
value = 1
persistent = 0
;_--------------------COMB0

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 0, CLASH HIT]
type = HitOverride
triggerall = enemynear,facing != facing
triggerall = !cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x)
triggerall = (!enemynear,ishelper)
trigger1 = animelem = 4
attr = SCA,NA       
stateno = 8000
forceair = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelAdd
trigger1 = time = 0
x = 4-var(44)*2.5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 4
value = S5,4
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = C, NA
animtype  = Light
damage    = 12,1
hitflag = MAF
guardflag = L
pausetime = 5+var(41)*3,6+var(41)*4
guard.pausetime = 5,5
guard.hittime = 15
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,3+random%2
guardsound = S4,1
ground.type = high
ground.slidetime = 12
ground.hittime  = 17
ground.velocity = -2*const(size.xscale)
down.velocity = -.4*const(size.xscale),-3.7*const(size.yscale)
air.velocity = -2*const(size.xscale),(-2.6-var(54)*.01)*const(size.yscale)
Fall = 0
air.fall = 0
fall.recover = 0
Envshake.time = 5+var(41)*3

[State 0, Helper]
type = Helper
triggerall = var(44)=0
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 28*const(size.xscale),-5*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .18*const(size.xscale)+var(44)*.01
size.yscale = .18*const(size.yscale)+var(44)*.01
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
triggerall = var(44)=0
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = 28*const(size.xscale),-5*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .18*const(size.xscale)+var(44)*.01
size.yscale = .18*const(size.yscale)+var(44)*.013
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
triggerall = var(44)>0
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 35*const(size.xscale),-16*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .18*const(size.xscale)+var(44)*.01
size.yscale = .18*const(size.yscale)+var(44)*.01
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
triggerall = var(44)>0
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = 35*const(size.xscale),-16*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .18*const(size.xscale)+var(44)*.01
size.yscale = .18*const(size.yscale)+var(44)*.013
ignorehitpause = 1
persistent = 0
;----------------------------subspecials
[State 420, Down Z]
type = ChangeState
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && command = "holddown"  && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/14 && p2bodydist x > 40
trigger2 = p2bodydist y < -27
value = 420
[State 430, Fwd Z]
type = ChangeState
triggerall = power >= 200
trigger1 = ailevel = 0 && command = "z" && command = "holdfwd" && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/22 && p2bodydist x < 80
value = 430
[State 400, Z]
type = ChangeState
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/14 && p2bodydist x > 40
value = 400
;----------------------------subspecials

[State 300, Low A]
type = ChangeState
triggerall = var(44) < 2
trigger1 = ailevel = 0 && command = "a" && command = "holddown" && movecontact
trigger2 = ailevel = 0 && command = "a" && command = "holddown" && time >= 8 && !movecontact
trigger3 = ailevel > 0  && movecontact && random < (ailevel * 100)/2 && (p2dist x =[-1,28]) && enemynear,pos y >-12
trigger4 = roundstate = 2 && ailevel > 0 && moveguarded && enemynear,statetype != C && enemynear,pos y>= -const(size.height)*.12 && random < (ailevel * 100)
trigger4 = (p2stateno = [120,155]) && (p2dist x =[-1,28]) && enemynear,pos y >-9
value = 300
[State 200, A]
type = ChangeState
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "a" 
trigger2= ailevel > 0  && random < (ailevel * 100)/3
value = 200+var(41)

[State 310, Low B]
type = ChangeState
triggerall = var(45) = 0
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "b" && command = "holddown"
;trigger2 = roundstate = 2 && ailevel > 0 && enemynear,pos y>= -const(size.height)*.35 && random < (ailevel * 100)/6
trigger3 = roundstate = 2 && ailevel > 0 && enemynear,statetype != C && enemynear,pos y>= -const(size.height)*.12 && random < (ailevel * 100)/2
trigger3 = p2stateno = [120,155] 
value = 310
[State 210, B]
type = ChangeState
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "b" 
;trigger2= ailevel > 0  && random < (ailevel * 100)/16
value = 210

[State 320, Low C]
type = ChangeState
triggerall = var(46) = 0
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c" && command = "holddown"
;trigger2 = roundstate = 2 && ailevel > 0 && enemynear,pos y>= -const(size.height)*.35 && random < (ailevel * 100)/13
;trigger3 = roundstate = 2 && ailevel > 0 && enemynear,statetype != C && enemynear,pos y>= -const(size.height)*.05 && random < (ailevel * 100)/2
;trigger3 = p2stateno = [120,155] 
value = 320

[State 40, Jump]
type = ChangeState
Trigger1 = cond(var(2)>0,movecontact,movehit)
trigger1 = ailevel = 0 && command = "up"
;Trigger2 = movehit
;trigger2 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/24
value = 40

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;===============================================================================
; Low B 
;-------------------------------------------------------------------------------
[Statedef 310]
type    = C
movetype= A
physics = C
juggle  = 1
ctrl = 0
anim = 310
poweradd = 100+(var(2)*20)
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,50
volumescale = 100
channel = 5

;_--------------------COMBO
[State 0, VarAdd]
type = VarAdd
trigger1 = !time
v = 45
value = 1
persistent = 0
;_--------------------COMB0

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 0, B auto]
type = VarSet
trigger1 = prevstateno = 211
v = 47 
value = 2
ignorehitpause = 1
persistent = 0

[State 0, CLASH HIT]
type = HitOverride
triggerall = enemynear,facing != facing
triggerall = !cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x)
triggerall = (!enemynear,ishelper)
trigger1 = animelem = 5
attr = SCA,NA       
stateno = 8000
forceair = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelAdd
trigger1 = time = 0
x = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 4
value = S5,4
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = C, NA
animtype  = medium
ground.type = trip
damage    = 23,3
hitflag = MAF
guardflag = LA
pausetime = 8,12
guard.pausetime = 8,6
guard.hittime = 15
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,4+random%2
guardsound = S4,1
ground.type = high
ground.slidetime = 23
ground.hittime  = 26
ground.velocity = -1.4*const(size.xscale),-4*const(size.yscale)
down.velocity = -.4*const(size.xscale),-3.7*const(size.yscale)
air.velocity = -1.2*const(size.xscale),(-4-var(54)*.01)*const(size.yscale)
Fall = 0
air.fall = 1
fall.recover = 1
Envshake.time = 13
yaccel = .4

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 35*const(size.xscale),-4*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .18*const(size.xscale)
size.yscale = .18*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = 35*const(size.xscale),-4*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .18*const(size.xscale)
size.yscale = .18*const(size.yscale)
ignorehitpause = 1
persistent = 0

;----------------------------subspecials
[State 420, Down Z]
type = ChangeState
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && command = "holddown"  && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/7 && p2bodydist x > 40
trigger2 = p2bodydist y < -27
value = 420
[State 430, Fwd Z]
type = ChangeState
triggerall = power >= 200
trigger1 = ailevel = 0 && command = "z" && command = "holdfwd" && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/6 && p2bodydist x < 80
trigger2 = power >= 1500
value = 430
[State 400, Z]
type = ChangeState
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/11 && p2bodydist x > 40
value = 400
;----------------------------subspecials

[State 210, B] ;Sparking
type = ChangeState
triggerall = var(2) >0
triggerall = prevstateno != 211
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "b" 
trigger2= ailevel > 0  && random < (ailevel * 100)/4
value = cond(prevstateno=210,211,210)
[State 210, B] 
type = ChangeState
triggerall = var(2) = 0
triggerall = prevstateno != [210,211]
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "b" 
trigger2= ailevel > 0  && random < (ailevel * 100)/3
value = 210

[State 320, Low C]
type = ChangeState
triggerall = var(46) = 0
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c" && command = "holddown"
trigger2 = roundstate = 2 && ailevel > 0 && enemynear,pos y>= -const(size.height)*.35 && random < (ailevel * 100)/4 && (prevstateno =[210,211])
trigger3 = roundstate = 2 && ailevel > 0 && enemynear,statetype != C && enemynear,pos y>= -const(size.height)*.05 && random < (ailevel * 100)
trigger3 = p2stateno = [120,155] 
value = 320

[State 220, C]
type = ChangeState
triggerall = var(43) = 0
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c" 
trigger2 = roundstate = 2 && ailevel > 0 && enemynear,pos y>= -const(size.height)*.35 && random < (ailevel * 100)/6
value = 220

[State 40, Jump]
type = ChangeState
Trigger1 = cond(var(2)>0,movecontact,movehit)
trigger1 = ailevel = 0 && command = "up"
;Trigger2 = movehit
;trigger2 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/24
value = 40

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1
;===============================================================================
; Low C 
;-------------------------------------------------------------------------------
[Statedef 320]
type    = C
movetype= A
physics = C
juggle  = 0
ctrl = 0
anim = 320
poweradd = 60+(var(2)*20)
sprpriority = 2
facep2 = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,52
volumescale = 100
channel = 5

;_--------------------COMBO
[State 0, VarAdd]
type = VarAdd
trigger1 = !time
v = 46
value = 1
persistent = 0
;_--------------------COMB0

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time<17 && !movereversed
value = A,NA
time = 1
ignorehitpause = 1
[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SC,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

[State 0, CLASH HIT]
type = HitOverride
triggerall = enemynear,facing != facing
triggerall = !cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x)
triggerall = (!enemynear,ishelper)
trigger1 = animelem = 4
attr = SC,NA       
stateno = 8010
forceair = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelAdd
trigger1 = time = 5
x = 2.2
y = -3
[State 0, VelSet]
type = VelAdd
trigger1 = animelem = 5
x = -.3
y = -4
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 5
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = A         ;A,C,S,N
ignorehitpause = 1

[State 0, Viento Grande]
type = Explod
trigger1 = time = 4
anim = 7023
ID = 7023
pos = 0,2.5
postype = p1
scale = .3*const(size.xscale),.25*const(size.yscale)
sprpriority = 2
ontop = 0
ownpal = 1
removeongethit = 1
Facing = -1
remappal = 0,38
[State 0, Explod]
type = Explod
trigger1 = time = 4
anim = 7030
ID = 7030
pos = 0,0;-pos y
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
removetime = -2
pausemovetime = 0
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = 2
ontop = 0
ownpal = 1
removeongethit = 0
remappal = 0,38

[State 0, VelSet]
type = VelAdd
trigger1 = !movecontact && vel y > 0
y = -.2
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 4
value = S5,4
volume = 50

[State 0, Smash Hit]
type = VarSet
trigger1 = !movecontact
v = 4   
value = cond(enemynear,movetype = H,0,1)
ignorehitpause = 1

[State 0, Helper]
type = Helper
triggerall = var(4) = 1
triggerall = teammode != simul && enemynear,teammode != simul
trigger1 = movehit 
helpertype = normal
name = "zoom"
ID = 9900
stateno = 9900
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent = 0

[State 200, 1]
type = HitDef
trigger1 = !movecontact
attr = A, NA
animtype  = Medium
damage    = 11,6
guardflag = MA
pausetime = 18,20
guard.pausetime = 15,15
guard.hittime = 19
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,7
guardsound = S4,1
ground.type = high
ground.slidetime = 35
ground.hittime  = 36+var(4)*10
air.hittime = 45+var(4)*10
ground.velocity = -1*const(size.xscale),-3*const(size.yscale)
air.velocity = -2*const(size.xscale),-2*const(size.yscale);.3
Fall = 1
fall.recover = 1
fall.recovertime = 30
air.fall = 1 
Envshake.time = 16
down.bounce = 1
id = 4
yaccel = .39
nochainid = 320
[State 0, TargetBind]
type = TargetBind
trigger1 = movehit 
id = 4
pos = 15*const(size.xscale),-2*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 6999
ID = 6999
pos = 25*const(size.xscale),-33*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 5
angle = 43
removetime = -2
pausemovetime = 99
supermovetime = 99
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = moveguarded 
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 25*const(size.xscale),-33*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .22*const(size.xscale)
size.yscale = .24*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit 
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 25*const(size.xscale),-33*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .22*const(size.xscale)
size.yscale = .24*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = movecontact
value = 321
ctrl = 0
;-------------------------------------------------------------------------------
; Low C 2
[Statedef 321]
type    = A
movetype= A
physics = A
juggle  = 2
ctrl = 0
anim = 321
poweradd = 60+(var(2)*10)
velset = -.2,-4
sprpriority = 2
facep2 = 0

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 9999
ID = 320
pos = 0,0
postype = p1 
facing = 1
vfacing = 1
bindtime = 1
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
ownpal = 0
removeongethit = 1
ignorehitpause = 0

[State 0, CLASH HIT]
type = HitOverride
triggerall = enemynear,facing != facing
triggerall = !cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x)
triggerall = (!enemynear,ishelper)
trigger1 = animelem = 2
attr = SC,NA       
stateno = 8010
forceair = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = movecontact
x = .2
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelAdd
trigger1 = !movecontact && vel y > 0
y = -.2
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S5,3
volume = 50

[State 200, 1]
type = HitDef
triggerall = enemynear,statetype != C
trigger1 = !movecontact
attr = A, NA
animtype  = Medium
damage    = 20,4
guardflag = MA
pausetime = 11,13
guard.pausetime = 8,8
guard.hittime = 16
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,9
guardsound = S4,1
ground.type = High
ground.slidetime = 28
ground.hittime  = 36
guard.hittime = 9
air.hittime = 40
ground.velocity = -1*const(size.xscale),-7*const(size.yscale)
air.velocity = -2*const(size.xscale),-8*const(size.yscale);.3
Fall = 1
fall.recover = 1
air.fall = 1 
Envshake.time = 11
down.bounce = 1
id = 320
nochainid = 320

[State 0, Helper]
type = Helper
trigger1 = moveguarded
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 0,-33*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .33*const(size.xscale)
size.yscale = .35*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit 
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 0,-33*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .33*const(size.xscale)
size.yscale = .35*const(size.yscale)
ignorehitpause = 1
persistent = 0;-hitcount*8

[State 40, Jump]
type = ChangeState
Trigger1 = movecontact
trigger1 = ailevel = 0 && command = "up"
Trigger2 = movehit
trigger2 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/4
value = 45

[State 950, Y]
type = ChangeState
triggerall = numhelper(953) = 0
trigger1 = ailevel = 0 && command = "y" && movecontact 
trigger2 = ailevel = 0 && command = "c" && movecontact 
trigger3 = ailevel > 0  && movehit && random < (ailevel * 100)/4
value = 950

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 0
;===============================================================================
; Semi Specials
;-------------------------------------------------------------------------------
; Soaring Fist - 1
[Statedef 400]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 400
velset = 1,0
poweradd = -300
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,81
volumescale = 100
channel = 5

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = !time
helpertype = normal ;player
name = "limitador2seg"
ID = 401
stateno = 498
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S2,1
volumescale = 80
[State 0, Viento Grande]
type = Explod
trigger1 = time = 10
anim = 7023
ID = 7023
pos = 6,0
postype = p1
scale = .3*const(size.xscale),.2*const(size.yscale)
sprpriority = 2
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,38
[State 0, Fly Lines]
type = Helper
triggerall = time = [6,14]
trigger1 = timemod = 2,0
helpertype = normal
name = "Fly Lines"
ID = 6000
stateno = 6003
pos = (-15+random%8)*const(size.xscale),(-5-random%35)*const(size.yscale)
postype = p1
facing = 1
ownpal = 1
Size.Xscale = .155*const(size.xscale)
Size.Yscale = .12*const(size.yscale)
size.shadowoffset = 0;angulo
[State 0, Cum]
type = Explod
triggerall = time = [6,14]
trigger1 = timemod = 3,0
anim = 110
ID = 110
pos = (26+ceil(time*.5))*const(size.xscale),-24*const(size.yscale)
postype = p1
facing = 1
vfacing = cond(random < 500,1,-1)
bindtime = 0
removetime = -2
scale = .1*const(size.xscale),.09*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
vel = 6+time*.1,0
accel = 1.2+time*.2,0
removeongethit = 1
supermovetime = 99
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = time = 8
anim = 6999
ID = 6999
pos = 24*const(size.xscale),-23.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = -1
bindtime = 2
angle = 0
removetime = -2
pausemovetime = 99
supermovetime = 99
vel = 1,0
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 10
anim = 411
ID = 410
pos = 21*const(size.xscale),-23.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = cond(random < 500,1,-1)
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 5
ownpal = 1
removeongethit = 1
ontop = 0
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = time = 12
anim = 410
ID = 410
pos = 21*const(size.xscale),-23.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = cond(random < 500,1,-1)
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .32*const(size.xscale),.1*const(size.yscale)
sprpriority = 4
ownpal = 1
removeongethit = 1
ontop = 0
ignorehitpause = 1

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,NP        
hitflag = MAF        
guardflag = MA       
animtype = hard      
air.animtype = medium
damage = 15,10
pausetime = 9,14
guard.pausetime = 11,10
guard.hittime = 15
airguard.hittime = 15
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S7,28
guardsound = S4,0
ground.type = high    
ground.slidetime = 30
ground.hittime = 40
air.hittime = 65
guard.dist = 280
yaccel = .36
ground.velocity = -20,-1
guard.velocity = -10*const(size.xscale)
air.velocity = -15*const(size.xscale),-2
airguard.velocity = -8*const(size.xscale),-2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
fall.recover = 1
fall.recovertime = 35
down.bounce = 0
envshake.time = 18
;p2stateno = 82745
hitonce = 1
id = 3
p2facing = 1

[State 0, TargetState]
type = TargetState
triggerall = movehit
triggerall = NumTarget(3)
trigger1 = !target(3),ishelper
value = 82745
ID = 3
ignorehitpause = 1
persistent = 0

[State 0, TargetBind]
type = TargetBind
triggerall = movehit
triggerall = numtarget(3)
trigger1 = !target(3),ishelper
time = 1
id = 3
pos = (p2dist x)+cond(target(3),facing = 1,30,30),-3*const(size.yscale);(target(5),p2dist x)+cond(target(5),facing = 1,30,30)+vel x*.5,-3*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 0,-24*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .21*const(size.xscale)
size.yscale = .21*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
triggerall = numtarget(3)
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 022
stateno = 800
pos = 0,(-target(3),pos y)-23.5*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .21*const(size.xscale)
size.yscale = .21*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 950, Super Dash]
type = ChangeState
triggerall = numhelper(953) = 0
trigger1 = ailevel > 0  && movehit && random < (ailevel * 100)/12
trigger1 = p2bodydist x > 60 && frontedgedist < 90
trigger2 = ailevel = 0 && command = "y" && movecontact
value = 950

[State 430, Shining Soul]
type = ChangeState
triggerall = var(2)>0 ; Sparking
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && command = "holdfwd"  && movecontact
trigger2 = ailevel > 0  && movehit && random < (ailevel * 100)/14 && p2bodydist x < 30
trigger2 = frontedgedist < 70
value = 430
ignorehitpause = 0

[State 420, Down Z]
type = ChangeState
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && command = "holddown"  && movecontact
trigger2 = ailevel > 0  && movehit && random < (ailevel * 100)/14 && p2bodydist x < 70
trigger2 = p2dist y < -20 
value = 420
ignorehitpause = 0

[State 40, Jump]
type = ChangeState
Trigger1 = cond(var(2)>0,movecontact,movehit)
trigger1 = ailevel = 0 && command = "up"
;Trigger2 = movehit
;trigger2 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/14
value = 40

[State 200, End]
type = ChangeState
triggerall = !movehit
trigger1 = AnimTime = 0
value = 0
ctrl = 1
[State 200, End]
type = ChangeState
trigger1 = !numtarget(3)
trigger2 = numtarget(3)
trigger2 = target(3),ishelper
triggerall = movehit
value = 0
ctrl = 1
[State 200, End]
type = ChangeState
triggerall = numtarget(3)
triggerall = !target(3),ishelper
triggerall = movehit
trigger1 = time = 26
value = 401
ctrl = 0
;-------------------------------------------------------------------------------
; Soaring Fist - 2
[Statedef 401]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 2,0
ctrl = 0
anim = 401
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,86
volumescale = 100
channel = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 3 || time = 12
value = S2,1
volumescale = 80
[State 0, Viento Grande]
type = Explod
trigger1 = time = 3 || time = 12
anim = 7022
ID = 7022
pos = 0,0
postype = p1
scale = .2*const(size.xscale),.2*const(size.yscale)
sprpriority = 2
ontop = 0
ownpal = 1
vel = -.2,0
accel = -.01,0
removeongethit = 1
remappal = 0,38
[State 0, Fly Lines]
type = Helper
trigger1 = time = [2,6]
trigger1 = timemod = 1,0
trigger2 = time = [11,15]
trigger2 = timemod = 1,0
helpertype = normal
name = "Fly Lines"
ID = 6000
stateno = 6003
pos = (-15+random%8)*const(size.xscale),(-5-random%35)*const(size.yscale)
postype = p1
facing = 1
ownpal = 1
Size.Xscale = .155*const(size.xscale)
Size.Yscale = .12*const(size.yscale)
size.shadowoffset = 0;angulo

[State 0, Cum]
type = Explod
trigger1 = time = [2,6]
trigger1 = timemod = 2,0
trigger2 = time = [11,15]
trigger2 = timemod = 2,0
anim = 110
ID = 110
pos = (26+ceil(time*.5))*const(size.xscale),-23.5*const(size.yscale)
postype = p1
facing = 1
vfacing = cond(random < 500,1,-1)
bindtime = 0
removetime = -2
scale = .1*const(size.xscale),.09*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
vel = 6+time*.05,0
accel = 1.2+time*.2,0
removeongethit = 1
supermovetime = 99
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = time = 5 || time = 14
anim = 410
ID = 411
pos = 21*const(size.xscale),-23.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = cond(random < 500,1,-1)
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .32*const(size.xscale),.1*const(size.yscale)
sprpriority = 4
ownpal = 1
removeongethit = 1
ontop = 0
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = time = 3 || time = 12
anim = 411
ID = 411
pos = 21*const(size.xscale),-23.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = cond(random < 500,1,-1)
bindtime = -1
removetime = -2
pausemovetime = 0
scale = (.2+time*.01)*const(size.xscale),(.2+time*.01)*const(size.yscale)
sprpriority = 5
ownpal = 1
removeongethit = 1
ontop = 0
ignorehitpause = 1

[State 0, HitDef]
type = HitDef
trigger1 = animelem = 4|| animelem = 7
attr = S,NP        
hitflag = MAF      
guardflag = MA       
animtype = Up    
air.animtype = Back
damage = 6,5
pausetime = 5,8
guard.pausetime = 5,3
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S7,28
guardsound = S4,0
ground.type = high     
ground.slidetime = 30
ground.hittime = 40
air.hittime = 50
guard.dist = 280
ground.velocity = -20,-1
guard.velocity = -20*const(size.xscale)
air.velocity = -15*const(size.xscale),-2
airguard.velocity = -15*const(size.xscale),-2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
fall.recover = 1
fall.recovertime = 20
down.bounce = 0
chainid = 3
envshake.time = 12+hitcount*5
p2stateno = cond(hitcount > 0,82738,82745)
hitonce = 1
id = 3

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 0,(-target(3),pos y)-23.5*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .21*const(size.xscale)
size.yscale = .21*const(size.yscale)
ignorehitpause = 1
persistent = 5
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 022
stateno = 800
pos = 0,(-target(3),pos y)-23.5*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.21+hitcount*.02)*const(size.xscale)
size.yscale = (.21+hitcount*.02)*const(size.yscale)
ignorehitpause = 1
persistent = 5

[State 950, Super Dash]
type = ChangeState
triggerall = numhelper(953) = 0
triggerall = hitcount > 1
trigger1 = ailevel > 0  && movecontact && random < (ailevel * 100)/5
trigger1 = p2bodydist x > 60
trigger2 = ailevel = 0 && command = "y" && movecontact
value = 950

[State 430, Shining Soul]
type = ChangeState
triggerall = var(2)>0 ; Sparking
triggerall = hitcount > 1
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && command = "holdfwd"  && movecontact
trigger2 = ailevel > 0  && movehit && random < (ailevel * 100)/14 && p2bodydist x < 30
trigger2 = frontedgedist < 70
value = 430
ignorehitpause = 0

[State 420, Down Z]
type = ChangeState
triggerall = power >= 300
triggerall = hitcount > 1
trigger1 = ailevel = 0 && command = "z" && command = "holddown"  && movecontact
trigger2 = ailevel > 0  && movehit && random < (ailevel * 100)/14 && p2bodydist x < 70
trigger2 = p2dist y < -20 
value = 420
ignorehitpause = 0

[State 40, Jump]
type = ChangeState
Trigger1 = cond(var(2)>0,movecontact,movehit) && hitcount > 1
trigger1 = ailevel = 0 && command = "up"
;Trigger2 = movehit && hitcount > 1
;trigger2 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/14
value = 40

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; Down Z
[Statedef 420]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 420
poweradd = -300
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,83
volumescale = 100
channel = 5

[State 0, Explod]
type = Explod
triggerall = movehit
trigger1 = numtarget(420)
anim = 9999
ID = 420
pos = 0,0
postype = p1 
facing = 1
vfacing = 1
bindtime = 1
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
ownpal = 0
removeongethit = 1

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !time
value = A,NA
time = 13
ignorehitpause = 1
[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SC,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 3
value = S3,4
volumescale = 100
channel = 9

[State 0, Explod]
type = Explod
trigger1 = time = 7
anim = 411
ID = 421
pos = 21*const(size.xscale),-47*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .4*const(size.xscale),.3*const(size.yscale)
sprpriority = 5
ownpal = 1
removeongethit = 1
ontop = 0
ignorehitpause = 1
angle = 25
remappal = 11,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = time = 7
anim = 411
ID = 421
pos = 21*const(size.xscale),-47*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .4*const(size.xscale),.3*const(size.yscale)
sprpriority = -4
ownpal = 1
removeongethit = 1
ontop = 0
ignorehitpause = 1
angle = 25
remappal = 0,33
trans = sub

[State 0, Explod]
type = Explod
trigger1 = time = 9
anim = 421
ID = 421
pos = 21*const(size.xscale),-47*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .2*const(size.xscale),.18*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
angle = 25
remappal = 11,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = time = 9
anim = 421
ID = 421
pos = 21*const(size.xscale),-47*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .2*const(size.xscale),.18*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
angle = 25
remappal = 11,0+var(22)

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,NP        
hitflag = MAF        
guardflag = MA       
animtype = hard      
air.animtype = medium
damage = 40,9
pausetime = 8,12
guard.pausetime = 9,6
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,18
guardsound = S4,0
ground.type = trip      
ground.slidetime = 16
ground.hittime = 20
air.hittime = 70
guard.dist = 135
ground.velocity = -4,-6
guard.velocity = -12*const(size.xscale)
air.velocity = -9*const(size.xscale),-4
airguard.velocity = -15*const(size.xscale),-6
ground.cornerpush.veloff = -2
air.cornerpush.veloff = -6
guard.cornerpush.veloff = -4
airguard.cornerpush.veloff = -9
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 20
down.bounce = 0
envshake.time = 14
p2facing = 1
id = 420

[State 0, TargetState]
type = TargetState
triggerall = !numexplod(420)
triggerall = NumTarget(420)
triggerall = movehit
triggerall = target(420),movetype = H
trigger1 = !target(420),ishelper
value = 82750
ID = 420
ignorehitpause = 1
persistent = 0
[State 0, TargetBind]
type = TargetBind
triggerall = !numexplod(420)
triggerall = NumTarget(420)
triggerall = movehit
triggerall = target(420),movetype = H
trigger1 = !target(420),ishelper
time = 1
id = 420
pos = 30*const(size.xscale),-5*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 0,-25*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .21*const(size.xscale)
size.yscale = .21*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 023
stateno = 800
pos = 55*const(size.xscale),-62.5*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .21*const(size.xscale)
size.yscale = .21*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 950, Super Dash]
type = ChangeState
triggerall = numhelper(953) = 0
trigger1 = ailevel > 0  && movehit && random < (ailevel * 100)/2
trigger1 = p2bodydist x > 55
trigger2 = ailevel = 0 && command = "y" && movecontact
value = 950

[State 40, Jump]
type = ChangeState
Trigger1 = cond(var(2)>0,movecontact,movehit)
trigger1 = ailevel = 0 && command = "up"
Trigger2 = movehit
trigger2 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/3 && frontedgedist < 99
value = 40

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; Shining Soul
[Statedef 430]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 430
sprpriority = 2
poweradd = -200

; Super Armor
[State 0, FX]
type = Helper
trigger1 = !time
helpertype = Normal
name = "FX"
ID = 431
stateno = 431
pos = 999,999
postype = p1
facing = 1
pausemovetime = 999
supermovetime = 999
keyctrl = 0
ownpal = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time 
value = S0,82
volumescale = 100
channel = 5

[State 0, NotHitBy]
type = NotHitBy
trigger1 = numhelper(431)
value = SCA,NP,SP
time = 1
ignorehitpause = 1
[State 0, HitBy]
type = HitBy
trigger1 = numhelper(431)
value = SCA,NA,SA,HA,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 1
value = S7,12
volumescale = 90
channel = 9
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 9
value = S7,13
volumescale = 90
channel = 10

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 431
ID = 431
pos = 2.5*const(size.xscale),-37*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 36
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
remappal = 11,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 431
ID = 431
pos = 2.5*const(size.xscale),-37*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 36
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
remappal = 0,33
trans = sub

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 6
ID = 431
pos = 2.5*const(size.xscale),-32*const(size.yscale)
ignorehitpause = 1
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 7
ID = 431
pos = 2.5*const(size.xscale),-26*const(size.yscale)
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 9
anim = 411
ID = 432
pos = 26*const(size.xscale),-28*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .18*const(size.xscale),.16*const(size.yscale)
sprpriority = 5
ownpal = 1
removeongethit = 1
ontop = 0
ignorehitpause = 1
remappal = 11,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = animelem = 9
anim = 411
ID = 432
pos = 26*const(size.xscale),-28*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .18*const(size.xscale),.16*const(size.yscale)
sprpriority = -4
ownpal = 1
removeongethit = 1
ontop = 0
ignorehitpause = 1
remappal = 0,33
trans = sub

[State 0, Explod]
type = Explod
trigger1 = animelem = 9
anim = 411
ID = 432
pos = -19*const(size.xscale),-28*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .18*const(size.xscale),.16*const(size.yscale)
sprpriority = 5
ownpal = 1
removeongethit = 1
ontop = 0
ignorehitpause = 1
remappal = 11,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = animelem = 9
anim = 411
ID = 432
pos = -19*const(size.xscale),-28*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .18*const(size.xscale),.16*const(size.yscale)
sprpriority = -4
ownpal = 1
removeongethit = 1
ontop = 0
ignorehitpause = 1
remappal = 0,33
trans = sub

[State 0, Land]
type = Explod
trigger1 = animelem = 8
anim = 7014
ID = 7014
pos = 0,1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .3*const(size.xscale),.35*const(size.yscale)
sprpriority = -5
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
remappal = 11,0+var(22)
[State 0, Land]
type = Explod
trigger1 = animelem = 8
anim = 7014
ID = 7014
pos = 0,1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .3*const(size.xscale),.35*const(size.yscale)
sprpriority = -10
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
remappal = 0,33
trans = sub

[State 0, Helper]
type = Helper
trigger1 = animelem = 9
helpertype = normal ;player
name = "Blast1"
ID = 435
stateno = 435
pos = 26*const(size.xscale),-28*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
[State 0, Helper]
type = Helper
trigger1 = animelem = 9
helpertype = normal ;player
name = "Blast1"
ID = 435
stateno = 435
pos = -19*const(size.xscale),-28*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)

[State 0, HitDef]
type = HitDef
trigger1 = hitcount < 3
trigger1 =  animelem =2||animelem =4||animelem = 6
attr = S,NA        
hitflag = MAF        
guardflag = MA       
animtype = medium     
air.animtype = medium
damage = 5,2
pausetime = 2,5
guard.pausetime = 1,3
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,18
guardsound = S4,0
ground.type = high
ground.slidetime = 16
ground.hittime = 26
guard.hittime = 22
air.hittime = 30
airguard.hittime = 20
guard.dist = 50
ground.velocity = -3
guard.velocity = -5*const(size.xscale)
air.velocity = (cond(p2bodydist x > 3,.5,-1.5))*const(size.xscale),(cond(p2dist y > -36,-1.5,-.6))*const(size.yscale)
airguard.velocity = -6*const(size.xscale),-4
ground.cornerpush.veloff = -1
air.cornerpush.veloff = -1
guard.cornerpush.veloff = -7
airguard.cornerpush.veloff = -11
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 20
down.bounce = 0
envshake.time = 11
yaccel = .35

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 0,-35*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .17*const(size.xscale)
size.yscale = .17*const(size.yscale)
ignorehitpause = 1
persistent = 5
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 023
stateno = 800
pos = 0*const(size.xscale),-35*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .17*const(size.xscale)
size.yscale = .17*const(size.yscale)
ignorehitpause = 1
persistent = 5

[State 420, Down Z]
type = ChangeState
triggerall = hitcount>1
triggerall = power >= 300
trigger1 = ailevel = 0 && command = "z" && command = "holddown"  && movecontact
trigger2 = ailevel > 0  && movehit && random < (ailevel * 100)/14 && p2bodydist x < 70
trigger2 = p2dist y < -20 
value = 420
ignorehitpause = 0

[State 40, Jump]
type = ChangeState
Trigger1 = cond(var(2)>0,movecontact,movehit)
trigger1 = ailevel = 0 && command = "up"
Trigger2 = numhelper(435)
trigger2 = helper(435),movehit
trigger2 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/15 && hitcount >1
trigger2 = p2dist y <0
value = 40

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;===============================================================================
; Reflect VFX
;-------------------------------------------------------------------------------
[StateDef 431]
Type = S
Ctrl = 0
anim = 429
VelSet = 0,0
SprPriority = 0
MoveType = I
poweradd = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

[State 0, BindToRoot]
Type = BindToRoot
Trigger1 = 1
Time = -1
IgnoreHitPause = 1

[State 0, PlayerPush]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1

[State 0, Turn]
type = Turn
trigger1 = Facing != Root, Facing
IgnoreHitPause = 1

[State 0, ReversalDef]
type = ReversalDef
triggerall = !(prevstateno = 431&&time<8)
triggerall = !enemynear,movereversed
trigger1 = !time||1
reversal.attr = SCA,NP,SP
pausetime = 0,0
sparkno = -1
hitsound = S4,3+random%3
p1stateno = stateno
ignorehitpause = 1

[State 0, Aura]
type = Explod
triggerall = prevstateno=431
trigger1 = time = 0
anim = 790
ID = 790
pos = 2.5*const(size.xscale),-37*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .23*parent,const(size.xscale),.23*parent,const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,36
supermovetime = 30
[State 0, Aura]
type = Explod
triggerall = prevstateno=431
trigger1 = time = 0
anim = 790
ID = 790
pos = 2.5*const(size.xscale),-37*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .23*parent,const(size.xscale),.23*parent,const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33
supermovetime = 30

[State 0, AssertSpecial]
Type = AssertSpecial
Trigger1 = 1
Flag = Invisible
IgnoreHitPause = 1

[State 0, Helper]
type = Helper
triggerall = prevstateno = 431
trigger1 = !time
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 801
pos = 2.5*const(size.xscale),-37*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .24*const(size.xscale)
size.yscale = .24*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = Time && (Root, StateNO) != 430
trigger2 = time>0&&!time
IgnoreHitPause = 1
;-------------------------------------------------------------------------------
; Ki Blast
[Statedef 435]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 9,0
ctrl = 0
anim = 434
poweradd = 0
sprpriority = 2

;Active Damage Scaling
[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = 1
value = (cond(var(54) >= 70,.1,1-var(54)*.009))+var(2)*.2
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = !movecontact
trigger1 = 1
anim = 7020
ID = 7020
pos = 5*const(size.xscale),0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = .1*const(size.xscale),.15*const(size.yscale)
sprpriority = -2
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
angle = 90-vel y*3
remappal = 11,0+root,var(22)

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = A, NP
animtype  = Medium
damage    = 28,9
Hitflag = MAF
guardflag = MA
pausetime = 0,5
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = -1
guardsound = -1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3,-5
air.velocity = -3,-4
envshake.time = 11
Fall = 1
air.fall = 1
fall.recovertime = 4
PalFX.time = 17
PalFX.add = -200,-200,-200
PalFX.mul = 256,256,256
PalFX.sinadd = 50,50,50,30
PalFX.invertall = 0
PalFX.color = 256

[State 0, Explod]
type = Explod
trigger1 = timemod = 6,0
anim = 438
ID = 438
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 11,0+root,var(22)

[State 0, Glow]
type = Explod
trigger1 = !time
anim = 7019
ID = 435
pos = 0,-pos y
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .19*const(size.xscale),.03*const(size.yscale)
sprpriority = -6
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 11,0+root,var(22)

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 435
ID = 435
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 11,0+root,var(22)
[State 0, Explod]
type = Explod
trigger1 = !time
anim = 435
ID = 435
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = -4
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
trans = sub
remappal = 0,33

[State 0, VarSet]
type = VarSet
trigger1 = movecontact
v = 10    
value = 1
ignorehitpause = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = movecontact
id = 435
ignorehitpause = 1
[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -60
ignorehitpause = 1
removeexplods = 1
[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
trigger2 = frontedgedist < -2
value = 436
ctrl = 0
[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
stateno = 436
ignorehitpause = 1
;-------------------------------------------------------------------------------
; Ki Blast Explosion
[Statedef 436]
type    = A
movetype= I
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 433
poweradd = 0
sprpriority = 2

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 435
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = var(10)=0
statetype = A    
movetype = A      
physics = N         
ignorehitpause = 1

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = var(10)=0
attr = A, NP
animtype  = Medium
damage    = 28,9
Hitflag = MAF
guardflag = MA
pausetime = 0,5
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = -1
guardsound = -1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3,-4.5
air.velocity = -3,-4
envshake.time = 11
Fall = 1
air.fall = 1
fall.recovertime = 4
PalFX.time = 17
guard.dist = 30
PalFX.add = -200,-200,-200
PalFX.mul = 256,256,256
PalFX.sinadd = 50,50,50,30
PalFX.invertall = 0
PalFX.color = 256

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S7,1
volumescale = 70

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 436
ID = 436
pos = 8*const(size.xscale),0
postype = p1  ;p2,front,back,left,right
facing = cond(random < 500,-1,1)
vfacing = 1
bindtime = 0
removetime = -2
pausemovetime = 0
scale = const(size.xscale)*.75,const(size.yscale)*.75
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
angle = 0+random%180
remappal = 11,0+root,var(22)
[State 0, Explod]
type = Explod
trigger1 = !time
anim = 437
ID = 436
pos = 8*const(size.xscale),0
postype = p1  ;p2,front,back,left,right
facing = cond(random < 500,-1,1)
vfacing = 1
bindtime = 0
removetime = -2
pausemovetime = 0
scale = const(size.xscale)*.75,const(size.yscale)*.75
sprpriority = -4
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
trans = sub
angle = 0+random%180
remappal = 0,33

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 3
ignorehitpause = 1
;-------------------------------------------------------------------------------
; Secret Sensation
[Statedef 440]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 440
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S7,11
volumescale = 90
channel = 9

[State 0, Helper]
type = Helper
trigger1 = animtime = 0
helpertype = normal ;player
name = "limitador2seg"
ID = 442
stateno = 498
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, Helper]
type = Helper
triggerall = power < 5000
trigger1 = timemod = 12,0
helpertype = normal ;player
name = "aura c"
ID = 9925
stateno = 9925
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
sprpriority = 4
supermovetime = 99999999
pausemovetime = 99999999
size.xscale = 1;*const(size.xscale)
size.yscale = 1;*const(size.yscale)

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 445
ID = 445
pos = -1.2*const(size.xscale),-43*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 53
pausemovetime = 0
scale = .22*const(size.xscale),.42*const(size.yscale)
sprpriority = 9
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 0
trans = addalpha
alpha = 150,256
remappal = 10,0+var(22)

[State 0, Land]
type = Explod
trigger1 = time = 0
anim = 7014
ID = 7014
pos = -1,1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .23*const(size.xscale),.23*const(size.yscale)
sprpriority = -10
ontop = 0
ownpal = 1
supermovetime = 99
removeongethit = 1
ignorehitpause = 1
remappal = 10,0+var(22)

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 6   ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animtime = 0
v = 6   ;fv = 10
value = 0
ignorehitpause = 1

[State 0, ReversalDef]
type = ReversalDef
trigger1 = 1
reversal.attr = SCA,NA,SA,NP,SP   
p1stateno = cond(enemynear,pos y < -1,442,441)
ignorehitpause = 1
p2sprpriority = 2

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; Succes LAND
[Statedef 441]
type    = S
movetype= A
physics = N
ctrl = 0
anim = 441
poweradd = 0
sprpriority = 2
facep2 = 1

[State 0, Explod]
type = Explod
trigger1 = vel x > .4
anim = 7020
ID = 7020
pos = 3*const(size.xscale),-40*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = .03*const(size.xscale),.1*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
supermovetime = 30
angle = 90-vel y*3
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = vel x > .4
anim = 7020
ID = 7020
pos = 3*const(size.xscale),-40*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = .03*const(size.xscale),.1*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
supermovetime = 30
angle = 90-vel y*3
remappal = 10,0+var(22)

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 446
ID = 446
pos = -3*const(size.xscale),-32*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = !time
anim = 446
ID = 446
pos = -3*const(size.xscale),-32*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
remappal = 0,33
trans = sub

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 445
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(5) = 0
v = 5   
value = 1
ignorehitpause = 1
[State 0, VarAdd]
type = VarAdd
trigger1 = time = 2
v = 5
value = cond(var(5) = 12,-11,1)
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S8,var(5)
volumescale = 100

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 3+(p2dist x*.04);4
y = 0
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = vel x != 0
trigger1 = vel x > 0
x = -.05
y = 0
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = vel x != 0
trigger1 = cond(facing = 1,pos x > enemynear,pos x +20,pos x < enemynear,pos x -20)
x = -.2
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = cond(facing = 1,pos x > enemynear,pos x +20,pos x < enemynear,pos x -20)
trigger2 = vel x < 0
x = .3-time*.001
y = 0
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = animtime = 0 && cond(facing = 1,pos x > enemynear,pos x +1,pos x < enemynear,pos x -1)
ignorehitpause = 1

[State 441, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 46
movetime = 46
anim = -1
sound = -1
pos = 32,-80
darken = 0
unhittable = 1
[State 183, Zoom1]
type = Zoom
triggerall = p2bodydist x = [0,100]
trigger1 = time = [0,35]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom
scale = 1.6+time*.0001/camerazoom
space = screen
lag = .4
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom1]
type = Zoom
triggerall = p2bodydist x != [0,100]
trigger1 = time = [0,35]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom
scale = 1.6+time*.0001
space = screen
lag = .4
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom2]
type = Zoom
trigger1 = time = [35,45]
pos = pos x,pos y +camerazoom
scale = 1
lag = .7
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 1500, VarAdd]
type = VarAdd
trigger1 = time < 19 && Var(12) > -80
v = 12
value = -4
[State 1500, VarSet]
type = Varset
trigger1 = time = 20
v = 12
value = -80
[State 1500, VarSet]
type = Varset
trigger1 = time = 45
v = 12
value = 0
[State 1500, VarAdd]
type = VarAdd
triggerall = Var(12) < 0
trigger1 = time = [30,45]
v = 12
value = 4
[State 1500, BGColorFX]
type = BGPalFX
trigger1 = time > 0
time = 1
add = Var(12),Var(12),Var(12)
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !time
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 50
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !animtime
v = 6   ;fv = 10
value = 0
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; Succes AIR
[Statedef 442]
type    = S
movetype= A
physics = N
ctrl = 0
anim = 442
poweradd = 0
sprpriority = -2
facep2 = 1

[State 0, Explod]
type = Explod
trigger1 = vel x > .4
anim = 7020
ID = 7020
pos = 3*const(size.xscale),-43*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = .03*const(size.xscale),.1*const(size.yscale)
sprpriority = -1
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
supermovetime = 30
angle = ((atan((-1*Vel Y)/Vel X))*(360/(2*pi)))+90;90-vel y*3
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = vel x > .4
anim = 7020
ID = 7020
pos = 7.5*const(size.xscale),-43*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = .03*const(size.xscale),.1*const(size.yscale)
sprpriority = -1
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
supermovetime = 30
angle = ((atan((-1*Vel Y)/Vel X))*(360/(2*pi)))+90;90-vel y*3
remappal = 10,0+var(22)

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 446
ID = 446
pos = -1.5*const(size.xscale),-36*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = !time
anim = 446
ID = 446
pos = -1.5*const(size.xscale),-36*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
remappal = 0,33
trans = sub

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 445
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(5) = 0
v = 5   
value = 1
ignorehitpause = 1
[State 0, VarAdd]
type = VarAdd
trigger1 = time = 2
v = 5
value = cond(var(5) = 12,-11,1)
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S8,var(5)
volumescale = 100

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 3+(p2dist x*.04);4
y = 0
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = vel x != 0
trigger1 = vel x > 0
x = -.05
y = 0
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = vel x != 0
trigger1 = cond(facing = 1,pos x > enemynear,pos x +20,pos x < enemynear,pos x -20)
x = -.2
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = cond(facing = 1,pos x > enemynear,pos x +20,pos x < enemynear,pos x -20)
trigger2 = vel x < 0
x = .3-time*.001
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = p2bodydist y = [-90,90]
y = p2bodydist y / 8
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = p2bodydist y != [-90,90]
y = -3.5
ignorehitpause = 1
[State 0, PosSet]
type = PosSet
trigger1 = pos y > 0
y = 0
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = animtime = 0 && cond(facing = 1,pos x > enemynear,pos x +1,pos x < enemynear,pos x -1)
ignorehitpause = 1

[State 441, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 37
movetime = 37
anim = -1
sound = -1
pos = 32,-80
darken = 0
unhittable = 1
[State 183, Zoom1]
type = Zoom
triggerall = p2bodydist x = [0,100]
trigger1 = time = [0,25]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y +10) / (1/Camerazoom*1.5) * CameraZoom
scale = 1.6+time*.0001/camerazoom
space = screen
lag = .4
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom1]
type = Zoom
triggerall = p2bodydist x != [0,100]
trigger1 = time = [0,25]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y +10) / (1/Camerazoom*1.5) * CameraZoom
scale = 1.6+time*.0001
space = screen
lag = .4
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom2]
type = Zoom
trigger1 = time = [25,35]
pos = pos x,pos y +camerazoom
scale = 1
lag = .8
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 1500, VarAdd]
type = VarAdd
trigger1 = time < 19 && Var(12) > -80
v = 12
value = -8
[State 1500, VarSet]
type = Varset
trigger1 = time = 10
v = 12
value = -80
[State 1500, VarSet]
type = Varset
trigger1 = time = 35
v = 12
value = 0
[State 1500, VarAdd]
type = VarAdd
triggerall = Var(12) < 0
trigger1 = time = [20,35]
v = 12
value = 4
[State 1500, BGColorFX]
type = BGPalFX
trigger1 = time > 0
time = 1
add = Var(12),Var(12),Var(12)
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !time
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 40
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = !animtime
x = -.2
y = -3
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !animtime
v = 6   ;fv = 10
value = 0
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
; Reflect
[Statedef 490]
type    = S
movetype= I
physics = S
ctrl = 0
sprpriority = 2
poweradd = 0

; Super Armor
[State 0, FX]
type = Helper
trigger1 = !numhelper(491)
helpertype = Normal
name = "FX"
ID = 491
stateno = 491
pos = 999,999
postype = p1
facing = 1
pausemovetime = 999
supermovetime = 999
keyctrl = 0
ownpal = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP
time = 1
ignorehitpause = 1
[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!=490
value = 490
elem = 1
ignorehitpause = 1
persistent = 0

[State 0, limitar helpers]
type = Explod
triggerall = numhelper(491) && !numexplod(490)
trigger1 = helper(491),numhelper(492)>5
anim = 9999
ID = 490
pos = 0,0
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = 20
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
ownpal = 0
persistent = 5
removeongethit = 1
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = animelemtime(6)<0
triggerall = numhelper(491)
trigger1 = ailevel = 0
trigger1 = helper(491),var(10) =1 && command = "z"
trigger2 = ailevel > 0
trigger2 = helper(491),var(10) =1 && enemynear,movetype = A && !enemynear,movereversed
value = 490
elem = 1
ignorehitpause = 1
persistent = 4

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 1
ignorehitpause = 1
[State 0, PosFreeze]
type = PosFreeze
trigger1 = 1
value = 1
ignorehitpause = 1
;AAAAAAAAAAAAAAH

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 1
fv = 34    ;fv = 10
value = 0
ignorehitpause = 1
[State 0, VarAdd]
type = VarAdd
trigger1 = time
fv = 34 
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelemtime(6)<0
trigger1 = time%4=0
value = S7,28
volume = 40

[State 0, Explod]
type = Explod
trigger1 = animelemtime(6)<0
trigger1 = time%4=0
anim = 495
ID = 495
pos = (-2+random%11),(-10-fvar(34)*3)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 0,36
angle = -15+(fvar(34)*4)

[State 0, Aura]
type = Explod
trigger1 = animelemtime(6)<0
trigger1 = time%4=0
anim = 496
ID = 496
pos = 6*const(size.xscale),-26*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .37*const(size.xscale),.38*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,36
supermovetime = 30

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
; Reflect VFX
;-------------------------------------------------------------------------------
[StateDef 491]
Type = S
Ctrl = 0
anim = 490
VelSet = 0,0
SprPriority = 0
MoveType = I
poweradd = cond(prevstateno =491,150+(var(2)*50),0)

[State 0, VarSet]
type = VarSet
trigger1 = prevstateno = 491 && !time
v = 10    
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = root,animelem = 1
v = 10    
value = 0
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

[State 0, BindToRoot]
Type = BindToRoot
Trigger1 = 1
Time = -1
IgnoreHitPause = 1

[State 0, PlayerPush]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1

[State 0, Turn]
type = Turn
trigger1 = Facing != Root, Facing
IgnoreHitPause = 1

[State 0, ReversalDef]
type = ReversalDef
triggerall = !(prevstateno = 491&&time<8)
triggerall = !enemynear,movereversed
trigger1 = !time||1
reversal.attr = SCA,NA,NP,SA,SP,HA,HP
pausetime = 0,0
sparkno = -1
hitsound = S4,3+random%3
p1stateno = stateno
ignorehitpause = 1

[State 0, Aura]
type = Explod
triggerall = prevstateno=491
trigger1 = time = 0
anim = 790
ID = 790
pos = 1*parent,const(size.xscale),-26*parent,const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*parent,const(size.xscale),.23*parent,const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,36
supermovetime = 30
[State 0, Aura]
type = Explod
triggerall = prevstateno=491
trigger1 = time = 0
anim = 790
ID = 790
pos = 1*parent,const(size.xscale),-26*parent,const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*parent,const(size.xscale),.23*parent,const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33
supermovetime = 30

[State 0, AssertSpecial]
Type = AssertSpecial
Trigger1 = 1
Flag = Invisible
IgnoreHitPause = 1

[State 0, Helper]
type = Helper
triggerall = prevstateno = 491
trigger1 = !time
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 801
pos = 18*const(size.xscale),-28*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .21*const(size.xscale)
size.yscale = .21*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
triggerall = !root,numexplod(490)
triggerall = prevstateno = 491
triggerall = numhelper(492) < 8
trigger1 = time%2=0 && time < 10
helpertype = normal ;player
name = "Webosputo"
ID = 492
stateno = 492
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99
pausemovetime = 99
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)

[State 0, Land]
type = Explod
triggerall = prevstateno = 491
trigger1 = !time
anim = 7017
ID = 7017
pos = 0,1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .5*const(size.xscale),.4*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
remappal = 0,38

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = Time && (Root, StateNO) != 490
trigger2 = time>0&&!time
IgnoreHitPause = 1
;-------------------------------------------------------------------------------
; Reflect Wall
[StateDef 492]
type = S
moveType = I
Physics = S
anim = 492
ctrl = 0
sprpriority = 0

[State 492, VelSet]
Type = VelSet
trigger1 = !Time
x = 14.5
y = 0

[State 492, PlayerPush]
Type = PlayerPush
trigger1 = 1
value = Cond(frontedgedist < 50,0,1)

[State 492, NotHitBy]
Type = NotHitBy
trigger1 = 1
time  = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 492, DestroySelf]
Type = DestroySelf
trigger1= Time >= 15
trigger2 = root,stateno != 490
;-------------------------------------------------------------------------------
; Limitador 1 Seg
[Statedef 498]
type    = A
movetype= I
physics = N
anim = 9999

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 60
ignorehitpause = 1
;-------------------------------------------------------------------------------
; Limitador 2 Seg
[Statedef 499]
type    = A
movetype= I
physics = N
anim = 9999

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 120
ignorehitpause = 1
;===============================================================================
; Power Charge:
;-------------------------------------------------------------------------------
; Charge - Start
[Statedef 500]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = (500+random%2)+var(11)
sprpriority = 2

[State 0, Aura]
type = Explod
trigger1 = !time
anim = 552
ID = 552
pos = 0,1*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = 0
removetime = -2
pausemovetime = 0
scale = .45*const(size.xscale),.45*const(size.yscale)
sprpriority = 9
ontop = 0
ownpal = 1
removeongethit = 0
remappal = 10,0+var(22)

[State 0, Aura]
type = Explod
trigger1 = !time
anim = 553
ID = 553
pos = 2*const(size.xscale),12*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = 0
removetime = -2
pausemovetime = 0
scale = .65*const(size.xscale),1
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
vfacing = 1
remappal = 10,0+var(22)
[State 0, Aura]
type = Explod
trigger1 = !time
anim = 553
ID = 553
pos = 2*const(size.xscale),-500*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = 0
removetime = -2
pausemovetime = 0
scale = .65*const(size.xscale),1
sprpriority = 8
ontop = 0
ownpal = 1
vfacing = -1
removeongethit = 0
remappal = 10,0+var(22)

[State 0, Aura]
type = Explod
trigger1 = time = 0
anim = 551
ID = 550
pos = 0,3*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.28*const(size.yscale)
sprpriority = 6
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
[State 0, Aura]
type = Explod
trigger1 = time = 0
anim = 551
ID = 550
pos = 0,3*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.28*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
[State 0, Aura]
type = Explod
trigger1 = time = 0
anim = 551
ID = 550
pos = 0,3*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.28*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub

[State 0, Aura]
type = Explod
trigger1 = time = 3
anim = 550
ID = 550
pos = 0,-41*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .35*const(size.xscale),.43*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
trans = addalpha 
alpha = 60,255
remappal = 10,0+var(22)
[State 0, Aura]
type = Explod
trigger1 = time = 3
anim = 550
ID = 550
pos = 0,-41*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .35*const(size.xscale),.43*const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 1
trans = addalpha 
alpha = 195,255
remappal = 10,0+var(22)
[State 0, Aura]
type = Explod
trigger1 = time = 3
anim = 550
ID = 550
pos = 0,-41*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .35*const(size.xscale),.43*const(size.yscale)
sprpriority = -1
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,33
trans = sub

[State 0, Explod]
type = Explod
trigger1 = time = 2
anim = 960
ID = 550
pos = 1*const(size.xscale),-29*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .22*const(size.xscale),.26*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,33
trans = sub
[State 0, Explod]
type = Explod
trigger1 = time = 2
anim = 960
ID = 550
pos = 1*const(size.xscale),-29*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .22*const(size.xscale),.26*const(size.yscale)
sprpriority = 6
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)

[State 0, Helper]
type = Helper
trigger1 = timemod = 9,0
helpertype = normal ;player
name = "AfterImage"
ID = 9925
stateno = 9925
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
sprpriority = 4
supermovetime = 99999999
pausemovetime = 99999999
size.xscale = 1;*const(size.xscale)
size.yscale = 1;*const(size.yscale)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = timemod = 90,0
value = S500,3;charge sound
volumescale = 80
channel = 2
[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S500,4;charge sound
volumescale = 80
channel = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 3
value = S0,155
volumescale = 100
channel = 3

[State 0, Land]
type = Explod
trigger1 = timemod = 14,0
anim = 7014
ID = 7014
pos = 0,1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = -6
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
remappal = 0,38

[State 0, Viento]
type = Explod
trigger1 = time = 7
trigger2 = time > 7 && time%10 = 0
anim = 7022
ID = 550
pos = 0,-1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .2*const(size.xscale),.2*const(size.yscale)
vel = -2,0
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,38

[State 0, Viento]
type = Explod
trigger1 = time = 7
trigger2 = time > 7 && time%10 = 0
anim = 7022
ID = 550
pos = 0,1
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .2*const(size.xscale),.2*const(size.yscale)
vel = 2,0
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,38

[State 0, EnvShake]
type = EnvShake
triggerall = time >= 7
trigger1 = time%5 = 0
time = 5

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time >= 7
value = 11+var(2)*2

[State 200, End]
type = ChangeState
Triggerall = ailevel = 0
triggerall = time >= 12
trigger1 = command != "hold_s"
trigger2 = power >= cond(var(2)>0,6000,5000)
value = 501
;-------------------------------------------------------------------------------
; Charge - Fin
[Statedef 501]
type    = S
movetype= I
physics = S
juggle  = 1
velset = 0,0
ctrl = 0
anim = 502+var(11)
sprpriority = 2

[State 0, PowerAdd]
type = PowerAdd
trigger1 = !time
value = 50
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S2,3;charge sound
volumescale = 100
channel = 1

[State 0, Aura]
type = Explod
trigger1 = time = 0
anim = 551
ID = 551
pos = 0,3*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.25*const(size.yscale)
sprpriority = 6
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
[State 0, Aura]
type = Explod
trigger1 = time = 0
anim = 551
ID = 551
pos = 0,3*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.25*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
[State 0, Aura]
type = Explod
trigger1 = time = 0
anim = 551
ID = 551
pos = 0,3*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.25*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
; A Aire:
;-------------------------------------------------------------------------------
; A Aire - 1
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 600
poweradd = 100+(var(2)*20)
facep2 = 1
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,47
volumescale = 100
channel = 5

[State 0, VelSet]
type = VelSet
;triggerall = var(47)=1||numexplod(204)||numexplod(320)
triggerall = prevstateno = [600,620]
trigger1 = (!ailevel && command != "holddown") && !time 
trigger2 = (ailevel>0 && pos y <-20) && !time 
y = -3
ignorehitpause = 1
persistent = 0
[State 0, VelSet]
type = VelSet;Add
;triggerall = var(47)=1||numexplod(204)||numexplod(320)
triggerall = prevstateno = [600,620]
trigger1 = (!ailevel && command != "holddown") && !time 
trigger2 = (ailevel>0 && pos y <-20) && !time 
x = 3
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelAdd
triggerall = var(47)=1||numexplod(204)||numexplod(320)
triggerall = vel y > 0 && prevstateno != [600,711]
trigger1 = (!ailevel && command != "holddown") && !time
trigger2 = (ailevel>0 && pos y <-20) && !time  
x = .02
y = -.8
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = prevstateno = 951
x = 2
y = -3
ignorehitpause = 1
persistent = 0

[State 0, CLASH HIT]
type = HitOverride
triggerall = enemynear,facing != facing
triggerall = !cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x)
triggerall = (!enemynear,ishelper)
trigger1 = animelem = 4
attr = SCA,NA       
stateno = 8010
forceair = 0
ignorehitpause = 1

[State 0, VelSet]
type = null
triggerall = var(47)=1
trigger1 = vel y > 0 && prevstateno != [600,711]
x = .02
y = -.8
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,2
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = Light
damage    = 10-var(47),1
guardflag = MA
pausetime = 6,8
guard.pausetime = 6,7
guard.hittime = 16
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,3
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
air.hittime = 24
ground.velocity = -2*const(size.xscale),0
air.velocity = -.9*const(size.xscale),-2.2*const(size.yscale)
Fall = 0
air.fall = 1
fall.recover = 1
Envshake.time = 7

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 30*const(size.xscale),-33*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .18*const(size.xscale)
size.yscale = .18*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = 30*const(size.xscale),-33*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .18*const(size.xscale)
size.yscale = .18*const(size.yscale)
ignorehitpause = 1
persistent = 0

;-Ground
[State 220, C]
type = ChangeState
triggerall = pos y >= (-15*const(size.yscale)) && vel y >0
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c" 
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/4
value = 220
;-Ground

[State 620, C]
type = ChangeState
;triggerall = prevstateno != 610
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
;trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/3
value = 620

[State 610, B]
type = ChangeState
;triggerall = prevstateno != 610
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "b"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/3
trigger3 = ailevel = 0 && command = "a" && var(47) = 1 
trigger4 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100) && var(47) = 1 
value = 610
[State 0, VarSet]
type = VarSet
triggerall = command != "holdback"
triggerall = movecontact ;&& prevstateno != 610
trigger1 = !ailevel && command = "hold_a"
trigger2 = ailevel && random < 500
v = 47    
value = 1
ignorehitpause = 1
persistent = 0

[State 605, A]
type = ChangeState
triggerall = prevstateno != 605
Triggerall = movecontact
triggerall = var(47)!=1
trigger1 = ailevel = 0 && command = "a" && command = "holdback"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/4
value = 605

[State 650, Z]
type = ChangeState
triggerall = numhelper(651)<2
Triggerall = movecontact
triggerall = power >= 200
trigger1 = ailevel = 0 && command = "z"
;trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/26
value = 650

[State 45, Up ]
type = ChangeState
triggerall = !numexplod(45)
trigger1 = ailevel = 0 && command = "up" && cond(var(2)>0,movecontact,movehit)
;trigger2 = ailevel > 0  && movehit && random < (ailevel * 100)/2
;trigger2 = p2dist y < -10
value = 45

[State 71, Dash]
type = ChangeState
triggerall = var(2) >0
triggerall = !numexplod(71)
triggerall = !ailevel
Trigger1 = movecontact
trigger1 = command = "FF"
value = 71

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
; A Aire - 2
[Statedef 605]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 605
poweradd = 50+(var(2)*20)
facep2 = 0
sprpriority = 2

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = !time && prevstateno = 600
value = 605
elem = 2
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,38
volumescale = 100
channel = 5

[State 0, CLASH HIT]
type = HitOverride
triggerall = enemynear,facing != facing
triggerall = !cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x)
triggerall = (!enemynear,ishelper)
trigger1 = animelem = 4
attr = SCA,NA       
stateno = 8010
forceair = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = (!ailevel && command != "holddown") && !time 
trigger2 = (ailevel>0 && pos y <-20) && !time 
x = 2
y = -2;1.6/p2bodydist y*.01
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,3
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = Light
damage    = 12-var(47),1
guardflag = MA
pausetime = 6,8
guard.pausetime = 6,7
guard.hittime = 17
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,4
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 22
air.hittime = 30
ground.velocity = -2*const(size.xscale),0
air.velocity = -.11*const(size.xscale),-1*const(size.yscale)
Fall = 0
air.fall = 1
fall.recover = 1
Envshake.time = 11

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 28*const(size.xscale),-32*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .195*const(size.xscale)
size.yscale = .195*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = 28*const(size.xscale),-32*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .195*const(size.xscale)
size.yscale = .195*const(size.yscale)
ignorehitpause = 1
persistent = 0

;-Ground
[State 220, C]
type = ChangeState
triggerall = pos y >= (-15*const(size.yscale)) && vel y >0
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c" 
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/4
value = 220
;-Ground

[State 650, Z]
type = ChangeState
triggerall = numhelper(651)<2
Triggerall = movecontact
triggerall = power >= 200
trigger1 = ailevel = 0 && command = "z"
;trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/28
value = 650

[State 610, B]
type = ChangeState
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "b"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/2
trigger2 = !numhelper(651)
trigger3 = ailevel = 0 && command = "a" && var(47) = 1 
trigger4 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100) && var(47) = 1 
value = 610
[State 0, VarSet]
type = VarSet
triggerall = movecontact
trigger1 = !ailevel && command = "hold_a"
trigger2 = ailevel && random < 500
v = 47    
value = 1
ignorehitpause = 1
persistent = 0

[State 625, Down C]
type = ChangeState
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "holddown" && command = "c"
;trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/4
value = 625

[State 620, C]
type = ChangeState
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
;trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
;trigger4 = var(47) = 1 && roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/3
value = 620

[State 45, Up ]
type = ChangeState
triggerall = !numexplod(45)
trigger1 = ailevel = 0 && command = "up" && cond(var(2)>0,movecontact,movehit)
;trigger2 = ailevel > 0  && movehit && random < (ailevel * 100)/2
;trigger2 = p2dist y < -10
value = 45

[State 71, Dash]
type = ChangeState
triggerall = var(2) >0
triggerall = !numexplod(71)
triggerall = !ailevel
Trigger1 = movecontact
trigger1 = command = "FF"
value = 71

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;===============================================================================
; B Aire:
;-------------------------------------------------------------------------------
; B Aire - 1
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 610
poweradd = 100+(var(2)*20)
facep2 = 1
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,48
volumescale = 100
channel = 5

[State 0, CLASH HIT]
type = HitOverride
triggerall = enemynear,facing != facing
triggerall = !cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x)
triggerall = (!enemynear,ishelper)
trigger1 = animelem = 4
attr = SCA,NA       
stateno = 8010
forceair = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
;triggerall = var(47)=1||numexplod(204)||numexplod(320)
triggerall = prevstateno = [600,620]
trigger1 = (!ailevel && command != "holddown") && !time 
trigger2 = (ailevel>0 && pos y <-20) && !time 
y = -3
ignorehitpause = 1
persistent = 0
[State 0, VelSet]
type = VelSet;Add
;triggerall = var(47)=1||numexplod(204)||numexplod(320)
triggerall = prevstateno = [600,620]
trigger1 = (!ailevel && command != "holddown") && !time 
trigger2 = (ailevel>0 && pos y <-20) && !time 
x = 3
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelAdd
triggerall = var(47)=1||numexplod(204)||numexplod(320)
triggerall = vel y > 0 && prevstateno != [600,711]
trigger1 = (!ailevel && command != "holddown") && !time
trigger2 = (ailevel>0 && pos y <-20) && !time  
x = .02
y = -.8
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = prevstateno = 951
x = 2
y = -3
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,3
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movereversed
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = Medium
damage    = 20-var(47)*2,2
guardflag = MA
pausetime = 8,9
guard.pausetime = 8,7
guard.hittime = 14
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,5
guardsound = S4,1
ground.type = High
ground.slidetime = 21
ground.hittime  = 25
air.hittime = 26+cond((prevstateno = [600,605]),1,0)
ground.velocity = -2*const(size.xscale),0
air.velocity = -1.5*const(size.xscale),-3.5*const(size.yscale)
Fall = 0
air.fall = 1
fall.recover = 1
Envshake.time = 15
down.bounce = 1

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 36*const(size.xscale),-17*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .2*const(size.xscale)
size.yscale = .2*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = 36*const(size.xscale),-17*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .2*const(size.xscale)
size.yscale = .2*const(size.yscale)
ignorehitpause = 1
persistent = 0

;-Ground
[State 220, C]
type = ChangeState
triggerall = pos y >= (-15*const(size.yscale)) && vel y >0
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c" 
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/4
value = 220
;-Ground

[State 650, Z]
type = ChangeState
triggerall = numhelper(651)<2
Triggerall = movecontact
triggerall = power >= 200
trigger1 = ailevel = 0 && command = "z"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/4
value = 650

[State 600, A]
type = ChangeState
triggerall = var(47)!=1
triggerall = prevstateno != 605
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "a"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/4
value = cond(prevstateno = 600,605,600)

[State 625, Down C]
type = ChangeState
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "holddown" && command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100) && numexplod(45) && !numhelper(953)
trigger3 = var(47) = 1 && roundstate = 2 && ailevel > 0 && random < (ailevel * 110)
value = cond((numexplod(45)&&power<900),620,625)

[State 620, C]
type = ChangeState
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/2
trigger3 = var(47) = 1 && ailevel = 0 && command = "a"
trigger4 = var(47) = 1 && roundstate = 2 && ailevel > 0 && random < (ailevel * 110)/2
value = 620

[State 45, Up ]
type = ChangeState
triggerall = !numexplod(45)
trigger1 = ailevel = 0 && command = "up" && cond(var(2)>0,movecontact,movehit)
trigger2 = ailevel > 0  && movehit && random < (ailevel * 100)/2
trigger2 = p2dist y < -10
value = 45

[State 71, Dash]
type = ChangeState
triggerall = var(2) >0
triggerall = !numexplod(71)
triggerall = !ailevel
Trigger1 = movecontact
trigger1 = command = "FF"
value = 71
[State 71, Dash]
type = ChangeState
triggerall = var(2) >0
triggerall = !numexplod(71)
triggerall = ailevel > 0
Trigger1 = movecontact
trigger1 = roundstate = 2 && ailevel > 0 && p2bodydist x < 70 && random < (ailevel * 100)/4
value = 71

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
; C Aire:
;-------------------------------------------------------------------------------
; Fwd M Ground Version
[Statedef 619]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 619
poweradd = 100+(var(2)*20)
facep2 = 1
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,89
volumescale = 100
channel = 5

[State 0, CLASH HIT]
type = HitOverride
triggerall = enemynear,facing != facing
triggerall = !cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x)
triggerall = (!enemynear,ishelper)
trigger1 = animelem = 8
attr = SCA,NA       
stateno = 8010
forceair = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = movecontact
x = -.5
y = -1
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 10
y = -4
x = 4
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 11
value = S5,2
volume = 50
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 10
statetype = A       
movetype = A        
physics = A        
ignorehitpause = 1

[State 200, 1]
type = HitDef
triggerall = !movereversed
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = Medium
damage    = 25-var(47)*2,5
guardflag = HA
pausetime = 13,14
guard.pausetime = 12,9
guard.hittime = 14
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,8+random%2
guardsound = S4,1
ground.type = High
ground.slidetime = 28
ground.hittime  = 26
air.hittime = 50
air.hittime = 25
ground.velocity = -6*const(size.xscale);,8
air.velocity = -4*const(size.xscale),9*const(size.yscale);.3
Fall = 0
fall.recover = 1
air.fall = 1 
Envshake.time = 19
down.bounce = 1

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 21*const(size.xscale),-2*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .22*const(size.xscale)
size.yscale = .23*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = 21*const(size.xscale),-2*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .23*const(size.xscale)
size.yscale = .22*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
; Normal Air Version
[Statedef 620]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 620
poweradd = 100+(var(2)*20)
facep2 = 1
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,49
volumescale = 100
channel = 5

[State 0, CLASH HIT]
type = HitOverride
triggerall = enemynear,facing != facing
triggerall = !cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x)
triggerall = (!enemynear,ishelper)
trigger1 = animelem = 6
attr = SCA,NA       
stateno = 8010
forceair = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = prevstateno = [600,620];var(47)=1||numexplod(204)||numexplod(320)
triggerall = movecontact = 1
trigger1 = (!ailevel && command != "holddown") 
trigger2 = (ailevel>0 && pos y <-20) && !time 
x = -2
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelSet;Add
triggerall = prevstateno = [600,620]
trigger1 = (!ailevel && command != "holddown") && !time 
trigger2 = (ailevel>0 && pos y <-20) && !time 
x = 3
ignorehitpause = 1
persistent = 0
[State 0, VelSet]
type = VelSet
;triggerall = var(47)=1||numexplod(204)||numexplod(320)
triggerall = prevstateno = [600,620]
trigger1 = (!ailevel && command != "holddown") && !time 
trigger2 = (ailevel>0 && pos y <-20) && !time 
y = -3
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelAdd
triggerall = var(47)=1||numexplod(204)||numexplod(320)
triggerall = vel y > 0 && prevstateno != [600,711]
trigger1 = (!ailevel && command != "holddown") && !time
trigger2 = (ailevel>0 && pos y <-20) && !time  
x = .02
y = -.8
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = prevstateno = 951
x = 2
y = -3
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,2
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movereversed
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = Back
damage    = 25
guardflag = HA
pausetime = 13,15
guard.pausetime = 12,11
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,8+random%2
guardsound = S4,1
ground.type = High
ground.slidetime = 28
ground.hittime  = 35+var(4)*5
guard.hittime = 11+var(4)*5
air.hittime = 30+var(4)*8
airguard.hittime = 10
ground.velocity = -3*const(size.xscale);,8
air.velocity = -4*const(size.xscale),6*const(size.yscale);.3
Fall = 0
fall.recover = 1
air.fall = 1 
Envshake.time = 19
down.bounce = 1
id = 80
nochainid = 80
p2facing = 1

[State 0, TargetState]
type = TargetState
triggerall = time
triggerall = numtarget(80)
triggerall = movehit = 1 && numexplod(320)||numexplod(204)
trigger1 = !target(80),ishelper
value = 82735
ID = 80
persistent = 0
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 6
anim = 6999
ID = 6999
pos = 19*const(size.xscale),-2*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = -1
bindtime = 5
angle = 70
removetime = -2
pausemovetime = 99
supermovetime = 99
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 20*const(size.xscale),-2*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .22*const(size.xscale)
size.yscale = .23*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 20*const(size.xscale),-2*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .23*const(size.xscale)
size.yscale = .22*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
triggerall = numexplod(204)
triggerall = teammode != simul && enemynear,teammode != simul
trigger1 = movehit = 1
helpertype = normal
name = "zoom"
ID = 9900
stateno = 9900
pos = 15*const(size.xscale),-64*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
triggerall = !numexplod(204)
triggerall = var(4) = 1
triggerall = teammode != simul && enemynear,teammode != simul
trigger1 = movehit = 1
helpertype = normal
name = "zoom"
ID = 9900
stateno = 9900
pos = 15*const(size.xscale),-64*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent = 0

[State 0, Smash Hit]
type = VarSet
trigger1 = !movecontact
v = 4   
value = cond(enemynear,movetype = H,0,1)
ignorehitpause = 1

;-Ground
[State 220, C]
type = ChangeState
triggerall = pos y >= (-18*const(size.yscale)) && vel y >0
Triggerall = movecontact
trigger1 = ailevel = 0 && command = "c" 
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/4
value = 220
;-Ground

[State 650, Z]
type = ChangeState
triggerall = numhelper(651)<2
Triggerall = movecontact
triggerall = power >= 200
trigger1 = ailevel = 0 && command = "z"
;trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/10
value = 650

[State 45, Up ]
type = ChangeState
triggerall = !numexplod(45)
trigger1 = ailevel = 0 && command = "up" && cond(var(2)>0,movecontact,movehit)
;trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/2
value = 45

[State 71, Dash]
type = ChangeState
triggerall = var(2) >0
triggerall = !numexplod(71)
triggerall = !ailevel
Trigger1 = movecontact
trigger1 = command = "FF"
value = 71

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
; Down C Aire:
;-------------------------------------------------------------------------------
[Statedef 625]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 625
velset = cond(vel x>3,1,-1),-1
poweradd = 100+(var(2)*20)
facep2 = 1
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,53
volumescale = 100
channel = 5

[State 0, CLASH HIT]
type = HitOverride
triggerall = enemynear,facing != facing
triggerall = !cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x)
triggerall = (!enemynear,ishelper)
trigger1 = animelem = 4
attr = SCA,NA       
stateno = 8010
forceair = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 7
x = 6
y = -2
ignorehitpause = 1
persistent = 0
[State 0, VelSet]
type = VelSet
trigger1 = time = [10,22]
y = -.1
ignorehitpause = 1
persistent = 0
[State 0, VelSet]
type = VelSet
trigger1 = movecontact
x = -1
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = prevstateno = [600,620]
y = -3
ignorehitpause = 1
persistent = 0
[State 0, VelSet]
type = VelSet
trigger1 = prevstateno = [600,620]
x = -2
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = prevstateno = 951
x = -3
y = -2
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,6
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movereversed
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = Up
damage    = 20,2
guardflag = HA
pausetime = 12,11
guard.pausetime = 11,10
airguard.hittime = 9
guard.hittime = 13
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,6+random%2
guardsound = S4,1
ground.type = High
ground.slidetime = 25
ground.hittime  = 28
air.hittime = 60
ground.velocity = -3*const(size.xscale),-6*const(size.yscale)
air.velocity = -2*const(size.xscale),-7*const(size.yscale);.3
Fall = 1
fall.recover = 1
fall.recovertime = 11
air.fall = 1 
Envshake.time = 16
down.bounce = 1
y.accel = .45

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 6999
ID = 6999
pos = 16*const(size.xscale),-52*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
angle = 77
removetime = -2
pausemovetime = 99
supermovetime = 99
scale = .4*const(size.xscale),.3*const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 14*const(size.xscale),-52*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .21*const(size.xscale)
size.yscale = .22*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 14*const(size.xscale),-52*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .22*const(size.xscale)
size.yscale = .21*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 650, Z]
type = ChangeState
triggerall = numhelper(651)<2
Triggerall = movecontact
triggerall = power >= 200
trigger1 = ailevel = 0 && command = "z"
;trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/15
value = 650

[State 950, Y ]
type = ChangeState
triggerall = numhelper(953) = 0
triggerall = prevstateno != 951
trigger1 = ailevel = 0 && command = "y" && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/3 && numexplod(45)
value = 950
[State 0, VarSet]
type = VarSet
trigger1 = movecontact
v = 47    
value = 0
ignorehitpause = 1

[State 45, Up ]
type = ChangeState
triggerall = !numexplod(45)
trigger1 = ailevel = 0 && command = "up" && movecontact
trigger2 = ailevel > 0  && movecontact && random < (ailevel * 100)/2
value = 45

[State 71, Dash]
type = ChangeState
triggerall = var(2) >0
triggerall = !numexplod(71)
triggerall = !ailevel
Trigger1 = movecontact
trigger1 = command = "FF"
value = 71

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 0
;===============================================================================
; AIR SEMI SPECIALS
;===============================================================================
;-------------------------------------------------------------------------------
; Air Soaring Fist
[Statedef 650]
type    = A
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 650
velset = vel x*.4,vel y*.1
poweradd = -300
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,81
volumescale = 100
channel = 5

[State 0, Helper]
type = Helper
trigger1 = !animtime
helpertype = normal ;player
name = "limitador2seg"
ID = 651
stateno = 498
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = frontedgebodydist < 47 && movehit
x = -3
y = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = pos y >= -20
trigger2 = movecontact
y = 0
ignorehitpause = 1
[State 0, PosSet]
type = PosSet
trigger1 = pos y >= -10
y = -10
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 9
value = S2,1
volumescale = 80
[State 0, Fly Lines]
type = Helper
triggerall = time = [6,12]
trigger1 = timemod = 2,0
helpertype = normal
name = "Fly Lines"
ID = 6000
stateno = 6003
pos = (-15+random%8)*const(size.xscale),(-5-random%35)*const(size.yscale)
postype = p1
facing = 1
ownpal = 1
Size.Xscale = .155*const(size.xscale)
Size.Yscale = .12*const(size.yscale)
size.shadowoffset = 0;angulo
[State 0, Cum]
type = Explod
triggerall = time = [6,12]
trigger1 = timemod = 3,0
anim = 110
ID = 110
pos = (26+ceil(time*.5))*const(size.xscale),-29.5*const(size.yscale)
postype = p1
facing = 1
vfacing = cond(random < 500,1,-1)
bindtime = 0
removetime = -2
scale = .1*const(size.xscale),.09*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
vel = 6+time*.1,0
accel = 1.2+time*.2,0
removeongethit = 1
supermovetime = 99
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = time = 8
anim = 6999
ID = 6999
pos = 33*const(size.xscale),-29.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = -1
bindtime = 2
angle = 0
removetime = -2
pausemovetime = 99
supermovetime = 99
vel = 1,0
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 7
anim = 411
ID = 650
pos = 25*const(size.xscale),-29.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = cond(random < 500,1,-1)
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 5
ownpal = 1
removeongethit = 1
ontop = 0
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = time = 9
anim = 410
ID = 650
pos = 25*const(size.xscale),-29.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = cond(random < 500,1,-1)
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .32*const(size.xscale),.1*const(size.yscale)
sprpriority = 4
ownpal = 1
removeongethit = 1
ontop = 0
ignorehitpause = 1

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,NP        
hitflag = MAF        
guardflag = MA       
animtype = hard      
air.animtype = medium
damage = 15,10
pausetime = 9,18
guard.pausetime = 11,10
guard.hittime = 15
airguard.hittime = 11
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S7,28
guardsound = S4,0
ground.type = high
air.type = high      
ground.slidetime = 30
ground.hittime = 40
air.hittime = 50
guard.dist = 280
yaccel = .28
ground.velocity = -20,-1
guard.velocity = -10*const(size.xscale)
air.velocity = -15*const(size.xscale),-2
airguard.velocity = -8*const(size.xscale),-2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
fall.recover = 1
fall.recovertime = 40
down.bounce = 0
envshake.time = 18
;p2stateno = 82745
hitonce = 1
id = 5
p2facing = 1

[State 0, TargetState]
type = TargetState
triggerall = movehit
triggerall = NumTarget(5)
trigger1 = !target(5),ishelper
value = 82745
ID = 5
ignorehitpause = 1
persistent = 0

[State 0, TargetBind]
type = TargetBind
triggerall = movehit
triggerall = numtarget(5)
trigger1= !target(5),ishelper
time = 1
id = 5
pos = (p2dist x)+cond(target(5),facing = 1,30,30),-3*const(size.yscale);(target(5),p2dist x)+cond(target(5),facing = 1,30,30)+vel x*.5,-3*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 0,-24.5*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .21*const(size.xscale)
size.yscale = .21*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 022
stateno = 800
pos = 0,-24.5*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .21*const(size.xscale)
size.yscale = .21*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 950, Super Dash]
type = ChangeState
triggerall = numhelper(953) = 0
trigger1 = ailevel > 0  && movehit && random < (ailevel * 100)/12
trigger1 = p2bodydist x > 60 && frontedgedist < 90
trigger2 = ailevel = 0 && command = "y" && movecontact
value = 950

[State 71, Dash]
type = ChangeState
triggerall = var(2) >0
triggerall = !numexplod(71)
triggerall = !ailevel
Trigger1 = movecontact
trigger1 = command = "FF"
value = 71

[State 71, Dash]
type = ChangeState
triggerall = var(2) >0
triggerall = !numexplod(71)
triggerall = ailevel > 0
Triggerall = movehit
trigger1 = animelemtime(7)>0
trigger1 = roundstate = 2 && ailevel > 0 && p2bodydist x < 70 && random < (ailevel * 100)/4
value = 71

[State 45, Up ]
type = ChangeState
triggerall = !numexplod(45)
trigger1 = ailevel = 0 && command = "up" && cond(var(2)>0,movecontact,movehit)
;trigger2 = ailevel > 0  && movehit && random < (ailevel * 100)/2
;trigger2 = p2dist y < -10
value = 45

[State 200, End]
type = ChangeState
triggerall = !movehit
trigger1 = AnimTime = 0
value = 50
ctrl = 1
[State 200, End]
type = ChangeState
trigger1 = !numtarget(5)
trigger2 = numtarget(5)
trigger2 = target(5),ishelper
triggerall = movehit
value = 50
ctrl = 1
[State 200, End]
type = ChangeState
triggerall = numtarget(5)
triggerall = !target(5),ishelper
triggerall = movehit
trigger1 = time = 26
value = 651
ctrl = 0
;-------------------------------------------------------------------------------
; Air Soaring Fist - 2
[Statedef 651]
type    = A
movetype= A
physics = A
juggle  = 0
velset = 2,0
ctrl = 0
anim = 651
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,86
volumescale = 100
channel = 5

[State 0, PosAdd]
type = PosAdd
trigger1 = frontedgebodydist < 47
x = -2
y = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
y = .03
ignorehitpause = 1
[State 0, VelSet]
type = VelAdd
trigger1 = vel x > .3
x = -.1
ignorehitpause = 1
[State 0, PosSet]
type = PosSet
trigger1 = pos y >= -10
y = -10
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5 || time = 14
value = S2,1
volumescale = 80
[State 0, Fly Lines]
type = Helper
trigger1 = time = [2,7]
trigger1 = timemod = 1,0
trigger2 = time = [11,15]
trigger2 = timemod = 1,0
helpertype = normal
name = "Fly Lines"
ID = 6000
stateno = 6003
pos = (-15+random%8)*const(size.xscale),(-5-random%35)*const(size.yscale)
postype = p1
facing = 1
ownpal = 1
Size.Xscale = .155*const(size.xscale)
Size.Yscale = .12*const(size.yscale)
size.shadowoffset = 0;angulo

[State 0, Cum]
type = Explod
trigger1 = time = [2,6]
trigger1 = timemod = 2,0
trigger2 = time = [11,15]
trigger2 = timemod = 2,0
anim = 110
ID = 110
pos = (19+ceil(time*.5))*const(size.xscale),-33.5*const(size.yscale)
postype = p1
facing = 1
vfacing = cond(random < 500,1,-1)
bindtime = 0
removetime = -2
scale = .1*const(size.xscale),.09*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
vel = 6+time*.05,0
accel = 1.2+time*.2,0
removeongethit = 1
supermovetime = 99
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = time = 5 || time = 14
anim = 410
ID = 651
pos = 19*const(size.xscale),-33.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = cond(random < 500,1,-1)
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .32*const(size.xscale),.1*const(size.yscale)
sprpriority = 4
ownpal = 1
removeongethit = 1
ontop = 0
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = time = 3 || time = 12
anim = 411
ID = 651
pos = 19*const(size.xscale),-33.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = cond(random < 500,1,-1)
bindtime = -1
removetime = -2
pausemovetime = 0
scale = (.2+time*.01)*const(size.xscale),(.2+time*.01)*const(size.yscale)
sprpriority = 5
ownpal = 1
removeongethit = 1
ontop = 0
ignorehitpause = 1

[State 0, HitDef]
type = HitDef
trigger1 = animelem = 4|| animelem = 7
attr = S,NP        
hitflag = MAF        
guardflag = MA       
animtype = Up    
air.animtype = Back
damage = 6,5
pausetime = 5,8
guard.pausetime = 5,3
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S7,28
guardsound = S4,0
ground.type = high
air.type = high     
ground.slidetime = 30
ground.hittime = 40
air.hittime = 85
guard.dist = 280
ground.velocity = -20,-1
guard.velocity = -20*const(size.xscale)
air.velocity = -15*const(size.xscale),-2
airguard.velocity = -15*const(size.xscale),-2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
down.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
fall = 1
fall.recover = 1
fall.recovertime = 30
chainid = 5
id = 5
down.bounce = 0
envshake.time = 12+hitcount*5
p2stateno = cond(hitcount > 0,82738,82745)
hitonce = 1

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 0,-24.5*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .21*const(size.xscale)
size.yscale = .21*const(size.yscale)
ignorehitpause = 1
persistent = 5
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 022
stateno = 800
pos = 0,-24.5*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.21+hitcount*.02)*const(size.xscale)
size.yscale = (.21+hitcount*.02)*const(size.yscale)
ignorehitpause = 1
persistent = 5

[State 71, Dash]
type = ChangeState
triggerall = var(2) >0
triggerall = !numexplod(71)
triggerall = !ailevel
Trigger1 = !movecontact
trigger1 = command = "FF"
value = 71

[State 71, Dash]
type = ChangeState
triggerall = var(2) >0
triggerall = !numexplod(71)
triggerall = ailevel > 0
Triggerall = !movecontact
trigger1 = animelemtime(7)>0
trigger1 = roundstate = 2 && ailevel > 0 && p2bodydist x < 70 && random < (ailevel * 100)/4
value = 71

[State 71, Dash]
type = ChangeState
triggerall = var(2) >0
triggerall = !numexplod(71)
Triggerall = movecontact && hitcount >1
trigger1 = roundstate = 2 && ailevel > 0 && p2bodydist x < 70 && random < (ailevel * 100)/4
trigger2 = command = "FF"
value = 71

[State 45, Up ]
type = ChangeState
triggerall = !numexplod(45)
triggerall = hitcount > 1
trigger1 = ailevel = 0 && command = "up" && cond(var(2)>0,movecontact,movehit)
;trigger2 = ailevel > 0  && movehit && random < (ailevel * 100)/2
;trigger2 = p2dist y < -10
value = 45

[State 950, Super Dash]
type = ChangeState
triggerall = numhelper(953) = 0
triggerall = hitcount > 1
trigger1 = ailevel > 0  && movecontact && random < (ailevel * 100)/5
trigger1 = p2bodydist x > 60
trigger2 = ailevel = 0 && command = "y" && movecontact
value = 950

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;===============================================================================
; Helper de Conexiones:
;-------------------------------------------------------------------------------
[Statedef 700]
type    = S
movetype= I
physics = S
anim = 9999

[State 200, End]
type = Destroyself
trigger1 = time = 15 || root,time < 5
;-------------------------------------------------------------------------------
; Launcher 
[Statedef 710]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 710
poweradd = -250
sprpriority = 2

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
;Vanish
[Statedef 750]
type    = A
movetype= I
physics = N
juggle  = 0
velset = vel x*.5,vel y *.5
anim = cond(pos y < 0,751,750)
sprpriority = 2
poweradd = 0;-1000
ctrl = 0

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 4
v = 6   ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 5
v = 6   ;fv = 10
value = 0
ignorehitpause = 1

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 8
value = -1000
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = time = [2,8]
trigger2 = time = [13,19]
helpertype = normal ;player
name = "soru"
ID = 6010
stateno = 6010
pos = (-9+random%19)*const(size.xscale),(-5-random%44)*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .09*const(size.xscale)
size.yscale = .09*const(size.yscale)
size.height = 90 ;Angle
persistent = 1

[State 0, PosAdd]
type = PosAdd
triggerall = ailevel = 0
trigger1 = time = 8 && command = "holdfwd"
x = 90
persistent = 0
[State 0, PosAdd]
type = PosAdd
triggerall = ailevel = 0
trigger1 = time = 8 && command = "holdback"
trigger2 = time = 8 && command != "holdback" && command != "holdfwd"
x = -90
persistent = 0
[State 0, PosAdd]
type = PosAdd
triggerall = ailevel = 0
trigger1 = time = 8 && command = "holdup"
y = -90
persistent = 0
[State 0, PosAdd]
type = PosAdd
triggerall = ailevel = 0
trigger1 = time = 8 && command = "holddown"
y = cond( pos y >= -92,-pos y,90)
persistent = 0

[State 0, Turn]
type = Turn
trigger1 = time = 17 && cond(facing = 1,pos x > enemynear,pos x +1,pos x < enemynear,pos x -1)
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = time = 17 && !cond(facing = 1,pos x > enemynear,pos x +1,pos x < enemynear,pos x -1)
x = vel x*.7
y = vel y*.7
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = time = 17 && cond(facing = 1,pos x > enemynear,pos x +1,pos x < enemynear,pos x -1)
x = -vel x*.7
y = vel y*.7
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 6
value = S1,11
volumescale = 70
[State 0, VelSet]
type = VelSet
trigger1 = pos y >= -5
y = 0
ignorehitpause = 1

[State 200, End]
type = ChangeState
trigger1 = animtime = 0
value = cond(pos y < 0,50,0)
ctrl = 1
;-------------------------------------------------------------------------------
; Reversal Vanish
[Statedef 760]
type    = A
movetype= H
physics = N
juggle  = 0
velset = 0,0
anim = cond(pos y < 0,761,760)
sprpriority = 2
facep2 = 1
poweradd = -3000
ctrl = 0

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 2
v = 6   ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 3
v = 6   ;fv = 10
value = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 18
x = -.2
y = cond(pos y < 0,-3,0)
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = 1
helpertype = normal ;player
name = "soru"
ID = 6010
stateno = 6010
pos = (-9+random%19)*const(size.xscale),(-5-random%44)*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .09*const(size.xscale)
size.yscale = .09*const(size.yscale)
size.height = 90 ;Angle
persistent = 1
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = time = 6
x = cond(facing = 1, enemynear,pos x +40,enemynear,pos x -40)
y = cond( pos y < 0,enemynear, pos y +5,0)
persistent = 0
[State 0, PosSet]
type = PosSet
trigger1 = pos y > 0
y = 0
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = time = 6 && cond(facing = 1,pos x > enemynear,pos x +1,pos x < enemynear,pos x -1)
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time 
value = S1,11
volumescale = 70

[State 200, End]
type = ChangeState
trigger1 = animtime = 0
value = cond(pos y < 0,50,0)
ctrl = 1
;-------------------------------------------------------------------------------
; Attack Vanish
[Statedef 770]
type    = A
movetype= A
physics = N
velset = 0,0
anim = cond(random < 500,771,770)
sprpriority = 2
facep2 = 1
poweradd = cond((prevstateno =[5000,5150]),-3000,-1000)
ctrl = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = prevstateno =1325 && !time
x = -105
y = 0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,87
volumescale = 100
channel = 5

[State 0, Helper]
type = Helper
trigger1 = !time 
helpertype = normal ;player
name = "limitadorvanish"
ID = 771
stateno = 953
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

;charge
[State 0, Aura]
type = Explod
trigger1 = time = 0||time = 5
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,37
supermovetime = 30
pausemovetime = 99
[State 0, Aura]
type = Explod
trigger1 = time = 0||time = 5
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33
supermovetime = 30
pausemovetime = 99
;charge

[State 0, Pause]
type = Pause
trigger1 = enemynear,movetype=H||(prevstateno =[5000,5150])
triggerall = !time
time = 17
movetime = 17
persistent = 0

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 2
v = 6   ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 3
v = 6   ;fv = 10
value = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 15
x = 1;-.2
y = -1.5
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = time < 13
helpertype = normal ;player
name = "soru"
ID = 6010
stateno = 6010
pos = (-9+random%19)*const(size.xscale),(-5-random%44)*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .09*const(size.xscale)
size.yscale = .09*const(size.yscale)
size.height = 90 ;Angle
pausemovetime = 20
persistent = 1
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = time = 9
x = cond(facing = 1, enemynear,pos x +30,enemynear,pos x -30)
y = cond( enemynear,pos y > -5,0,enemynear, pos y)
persistent = 0
[State 0, PosSet]
type = PosSet
trigger1 = pos y > 0
y = 0
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = time = 9 && cond(facing = 1,pos x > enemynear,pos x +1,pos x < enemynear,pos x -1)
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time 
value = S1,11
volumescale = 70

[State 0, Explod]
type = Explod
trigger1 = !animtime
anim = 9999
ID = 770
pos = 0,0
postype = p1 
facing = 1
vfacing = 1
bindtime = 1
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
ownpal = 0
removeongethit = 1
ignorehitpause = 0

[State 0, Smash Hit]
type = VarSet
trigger1 = !movecontact
v = 4   
value = cond(numexplod(770),0,cond(enemynear,movetype = H,1,0))
ignorehitpause = 1

[State 200, 1]
type = HitDef
triggerall = !movereversed
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = HARD
damage    = 40,10
guardflag = MA
hitflag = MAF
pausetime = 15,13
guard.pausetime = 15,10
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,8
guardsound = S4,1
ground.type = High
ground.slidetime = 20
guard.hittime  = 17+var(4)*5
airguard.hittime = 17+var(4)*5
ground.hittime  = 25+var(4)*20
air.hittime = 25+var(4)*20
ground.velocity = -9*const(size.xscale),-2
air.velocity = -8*const(size.xscale),-2.6*const(size.yscale)
Fall = 1
air.fall = 1
kill = 0
fall.recover = 1
Envshake.time = 15
down.bounce = 1
hitonce = 1
yaccel = .35
id = 770
p2facing = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = time < 21
value = 0
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
triggerall = !movereversed
triggerall = !movecontact
trigger1 = enemynear,stateno = 82749; && time < 15
value = 0
movecamera = 1,1
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = var(4)=1
triggerall = time
triggerall = movehit
triggerall = numtarget(770)
trigger1 = !target(770),ishelper
value = 82758
ID = 770
ignorehitpause = 0
persistent = 0
[State 0, TargetBind]
type = TargetBind
triggerall = var(4)=1
triggerall = time
triggerall = movehit
triggerall = numtarget(770)
trigger1 = !target(770),ishelper
time = 1
id = 770
pos = 28*const(size.xscale),0
persistent = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 6
anim = 6999
ID = 6999
pos = 23*const(size.xscale),-22*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 5
angle = -1
removetime = -2
pausemovetime = 99
supermovetime = 99
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Helper]
type = Helper
triggerall = var(4)=1
triggerall = numtarget(770)
trigger1 = !target(770),ishelper
triggerall = movehit = 1
helpertype = normal
name = "zoom"
ID = 9900
stateno = 9900
pos = 15*const(size.xscale),-64*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 23*const(size.xscale),-22*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .25*const(size.xscale)
size.yscale = .2*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 23*const(size.xscale),-22*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .25*const(size.xscale)
size.yscale = .2*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 200, End]
type = ChangeState
trigger1 = animtime = 0
trigger2 = !ailevel && time = 16 && command = "vanishb" && var(2)>0
trigger3 = !ailevel && time = 16 && random<(ailevel*100)/5 && var(2)>0
value = 50;cond(pos y < 0,50,0)
ctrl = 1
;-------------------------------------------------------------------------------
; MultiHelper Hitspark Petamynx
;===============================================================================
[Statedef 800]
type = A
anim = 9999

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 1
value = random%360

;-------------------------------------
[State 0, Onda Grab]
type = Explod
triggerall = ishelper(016)
trigger1 = !time
anim = 7006
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1
angle = var(1)
remappal = 10,0+root,var(22)

[State 0, Hitspark Grab1]
type = Explod
triggerall = ishelper(016)
trigger1 = !time
anim = 7005
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 156,256
remappal = 0,33
[State 0, Hitspark Grab1]
type = Explod
triggerall = ishelper(016)
trigger1 = !time
anim = 7005
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 0
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 100,256
remappal = 0,33
[State 0, Hitspark Grab1SUB]
type = Explod
triggerall = ishelper(016)
trigger1 = !time
anim = 7005
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
ownpal = 1
trans = sub
angle = var(1)
;-----------------------------------------

;-------------------------------------
[State 0, Onda Clash Sword]
type = Explod
triggerall = ishelper(017)
trigger1 = !time
anim = 7006
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1
angle = var(1)

[State 0, Hitspark Clash Slash1]
type = Explod
triggerall = ishelper(017)
trigger1 = !time
anim = 7015
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 156,256
remappal = 0,34
[State 0, Hitspark Clash Slash1]
type = Explod
triggerall = ishelper(017)
trigger1 = !time
anim = 7015
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 0
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 100,256
remappal = 0,34
[State 0, Hitspark Clash Slash1SUB]
type = Explod
triggerall = ishelper(017)
trigger1 = !time
anim = 7015
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
ownpal = 1
trans = sub
angle = var(1)
;-----------------------------------------

;-------------------------------------
[State 0, Aire Clash]
type = Explod
triggerall = ishelper(018)
trigger1 = !time
anim = 7002
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1
angle = var(1)
[State 0, Onda Clash]
type = Explod
triggerall = ishelper(018)
trigger1 = !time
anim = 7006
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1
angle = var(1)

[State 0, Hitspark Clash1]
type = Explod
triggerall = ishelper(018)
trigger1 = !time
anim = 7010
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ownpal = 1
angle = var(1)
trans = addalpha
remappal = 0,34
alpha = 156,256
[State 0, Hitspark Clash1]
type = Explod
triggerall = ishelper(018)
trigger1 = !time
anim = 7010
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 0
ownpal = 1
angle = var(1)
trans = addalpha
remappal = 0,34
alpha = 100,256
[State 0, Hitspark Clash1SUB]
type = Explod
triggerall = ishelper(018)
trigger1 = !time
anim = 7010
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
ownpal = 1
trans = sub
angle = var(1)
;-----------------------------------------

;-------------------------------------
[State 0, Onda Guard]
type = Explod
triggerall = ishelper(019)
trigger1 = !time
anim = 7006
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*.8,const(size.yscale)
sprpriority = 5
ownpal = 1
angle = var(1)

[State 0, Hitspark Guard]
type = Explod
triggerall = ishelper(019)
trigger1 = !time
anim = 7000
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ownpal = 1
trans = addalpha
alpha = 156,256
remappal = 10,0+root,var(22);cond(root,stateno=490,0,10),cond(parent,stateno =490,36,0+root,var(22))
[State 0, Hitspark Guard]
type = Explod
triggerall = ishelper(019)
trigger1 = !time
anim = 7000
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 0
ownpal = 1
trans = addalpha
alpha = 100,256
remappal = 10,0+root,var(22);cond(root,stateno=490,0,10),cond(parent,stateno =490,36,0+root,var(22))
[State 0, Hitspark Guard1SUB]
type = Explod
triggerall = ishelper(019)
trigger1 = !time
anim = 7000
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
ownpal = 1
trans = sub
remappal = 0,33
;-----------------------------------------

;-------------------------------------
[State 0, Aire Base]
type = Explod
triggerall = root,stateno = 901||root,stateno = 940
triggerall = ishelper(020)
trigger1 = !time
anim = 7002
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1
angle = var(1)
[State 0, Impacto Base]
type = Explod
triggerall = root,stateno = 901|| (root,stateno = [1000,3010])||root,stateno = 940
triggerall = ishelper(020)
trigger1 = !time
anim = 7001
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*.3,const(size.yscale)*.3
sprpriority = -5
ownpal = 1
angle = var(1)
remappal = 0,40

[State 0, Onda Base]
type = Explod
triggerall = ishelper(020)
trigger1 = !time
anim = 7006
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1
angle = var(1)
[State 0, Sangre Base]
type = Explod
triggerall = random < 450
triggerall = ishelper(020)
trigger1 = !time
anim = cond(random < 500,7007,7008)
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*.9,const(size.yscale)*.9
sprpriority = -1;2+random%4
ownpal = 1
angle = var(1)

[State 0, Hitspark Base1]
type = Explod
triggerall = ishelper(020)
trigger1 = !time
anim = 7010
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 156,256
remappal = 10,0+root,var(22)
[State 0, Hitspark Base1]
type = Explod
triggerall = ishelper(020)
trigger1 = !time
anim = 7010
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 0
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 100,256
remappal = 10,0+root,var(22)
[State 0, Hitspark Base1SUB]
type = Explod
triggerall = ishelper(020)
trigger1 = !time
anim = 7010
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
ownpal = 1
trans = sub
angle = var(1)

[State 0, Hitspark Base2]
type = Explod
triggerall = ishelper(020)
trigger1 = !time
anim = 7011
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -10
ownpal = 1
angle = var(1)
trans = add
remappal = 10,0+root,var(22)
[State 0, Hitspark Base2SUB]
type = Explod
triggerall = ishelper(020)
trigger1 = !time
anim = 7011
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -11
ownpal = 1
trans = sub
angle = var(1)
;-----------------------------------------

;-----------------------------------------
[State 0, Onda Slash]
type = Explod
triggerall = ishelper(021)
trigger1 = !time
anim = 7006
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*1.6,const(size.yscale)*1.6
sprpriority = 5
ownpal = 1
angle = var(1)
[State 0, Sangre Slash]
type = Explod
triggerall = random < 650
triggerall = ishelper(021)
trigger1 = !time
anim = cond(random < 500,7007,7008)
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*.9,const(size.yscale)*.9
sprpriority = -1;2+random%4
ownpal = 1
angle = var(1)

[State 0, Hitspark Slash1]
type = Explod
triggerall = ishelper(021)
trigger1 = !time
anim = 7015
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 156,256
remappal = 0,33
[State 0, Hitspark Slash1]
type = Explod
triggerall = ishelper(021)
trigger1 = !time
anim = 7015
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 0
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 100,256
remappal = 0,33
[State 0, Hitspark Slash1SUB]
type = Explod
triggerall = ishelper(021)
trigger1 = !time
anim = 7015
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
ownpal = 1
trans = sub
angle = var(1)
;-----------------------------------------

;-------------------------------------
[State 0, Onda Mono]
type = Explod
triggerall = ishelper(022)
trigger1 = !time
anim = 7006
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = cond(root,stateno = 3005,const(size.yscale)*1.8,const(size.yscale)*1.2),cond(root,stateno = 3005,const(size.yscale)*.3,const(size.yscale)*1.3)
sprpriority = 5
ownpal = 1
angle = var(1)
remappal = 0,33
[State 0, Sangre Mono]
type = Explod
triggerall = random < 450
triggerall = ishelper(022)
trigger1 = !time
anim = cond(random < 500,7007,7008)
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*.9,const(size.yscale)*.9
sprpriority = -1;2+random%4
ownpal = 1
angle = var(1)
[State 0, Hitspark Mono 1]
type = Explod
triggerall = ishelper(022)
trigger1 = !time
anim = 7010
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 156,256
remappal = 0,33
[State 0, Hitspark Mono 1]
type = Explod
triggerall = ishelper(022)
trigger1 = !time
anim = 7010
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 0
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 100,256
remappal = 0,33
[State 0, Hitspark Mono 1SUB]
type = Explod
triggerall = ishelper(022)
trigger1 = !time
anim = 7010
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
ownpal = 1
trans = sub
angle = var(1)

[State 0, Hitspark Mono 2]
type = Explod
triggerall = ishelper(022)
trigger1 = !time
anim = 7011
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*1.2,const(size.yscale)*1.2
sprpriority = -10
ownpal = 1
angle = var(1)
trans = add
remappal = 0,33
[State 0, Hitspark Mono 2SUB]
type = Explod
triggerall = ishelper(022)
trigger1 = !time
anim = 7011
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*1.2,const(size.yscale)*1.2
sprpriority = -11
ownpal = 1
trans = sub
angle = var(1)
;-----------------------------------------

;-------------------------------------
[State 0, Onda Beam]
type = Explod
triggerall = ishelper(023)
trigger1 = !time
anim = 7006
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*2,const(size.yscale)*2
sprpriority = 10
ownpal = 1
angle = var(1)
remappal = 11,0+root,var(22)

[State 0, Hitspark Beam]
type = Explod
triggerall = ishelper(023)
trigger1 = !time
anim = 7011
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1
angle = var(1)
trans = add
remappal = 11,0+root,var(22)
[State 0, Hitspark BeamSUB]
type = Explod
triggerall = ishelper(023)
trigger1 = !time
anim = 7011
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -11
ownpal = 1
trans = sub
angle = var(1)
;-----------------------------------------

;-------------------------------------
[State 0, Onda Explosionm]
type = Explod
triggerall = ishelper(024)
trigger1 = !time
anim = 7006
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*2,const(size.yscale)*2
sprpriority = 13
ownpal = 1
angle = var(1)
remappal = 11,0+root,var(22)

[State 0, Hitspark Explosionm]
type = Explod
triggerall = ishelper(024)
trigger1 = !time
anim = 1616
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*.8,const(size.yscale)*.8
sprpriority = 15
ownpal = 1
angle = var(1)
trans = add
remappal = 11,0+root,var(22)
[State 0, Hitspark ExplosionmSUB]
type = Explod
triggerall = ishelper(024)
trigger1 = !time
anim = 1616
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*.8,const(size.yscale)*.8
sprpriority = 14
ownpal = 1
trans = sub
angle = var(1)
;-----------------------------------------

;-------------------------------------
[State 0, Aire Fuerte]
type = Explod
triggerall = root,stateno = [1000,3010]
triggerall = ishelper(025)
trigger1 = !time
anim = 7002
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1
angle = var(1)
[State 0, Onda Fuerte]
type = Explod
triggerall = ishelper(025)
trigger1 = !time
anim = 7006
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*2,const(size.yscale)*2
sprpriority = 5
ownpal = 1
angle = var(1)
;remappal = 10,0+root,var(22)
[State 0, Sangre Fuerte]
type = Explod
triggerall = random < 450
triggerall = ishelper(025)
trigger1 = !time
anim = cond(random < 500,7007,7008)
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*.9,const(size.yscale)*.9
sprpriority = -1;2+random%4
ownpal = 1
angle = var(1)

[State 0, Hitspark Fuerte1]
type = Explod
triggerall = ishelper(025)
trigger1 = !time
anim = 7010
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 156,256
remappal = 10,0+root,var(22)
[State 0, Hitspark Fuerte1]
type = Explod
triggerall = ishelper(025)
trigger1 = !time
anim = 7010
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 0
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 100,256
remappal = 10,0+root,var(22)
[State 0, Hitspark Fuerte1SUB]
type = Explod
triggerall = ishelper(025)
trigger1 = !time
anim = 7010
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
ownpal = 1
trans = sub
angle = var(1)

[State 0, Hitspark Fuerte2]
type = Explod
triggerall = ishelper(025)
trigger1 = !time
anim = 7011
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -11
ownpal = 1
angle = var(1)
trans = add
remappal = 10,0+root,var(22)
[State 0, Hitspark Fuerte2SUB]
type = Explod
triggerall = ishelper(025)
trigger1 = !time
anim = 7011
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -12
ownpal = 1
trans = sub
angle = var(1)

[State 0, Hitspark Fuerte3]
type = Explod
triggerall = ishelper(025)
trigger1 = !time
anim = 7013
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -15
ownpal = 1
angle = var(1)
trans = add
remappal = 0,40
[State 0, Hitspark Fuerte3SUB]
type = Explod
triggerall = ishelper(025)
trigger1 = !time
anim = 7013
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -16
ownpal = 1
trans = sub
angle = var(1)
;-----------------------------------------

;-------------------------------------
[State 0, Impacto Display]
type = Explod
triggerall = ishelper(026)
trigger1 = !time
anim = 7003
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -5
ownpal = 1
angle = var(1)
remappal = 10,0+root,var(22)
[State 0, Onda Display]
type = Explod
triggerall = ishelper(026)
trigger1 = !time
anim = 7006
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1
angle = var(1)
remappal = 10,0+root,var(22)

[State 0, Hitspark Display2]
type = Explod
triggerall = ishelper(026)
trigger1 = !time
anim = 7005
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*.9,const(size.yscale)*.9
sprpriority = 3
ownpal = 1
angle = var(1)
remappal = 0,33

[State 0, Hitspark Display]
type = Explod
triggerall = ishelper(026)
trigger1 = !time
anim = 7012
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 2
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 70,256
remappal = 0,33
[State 0, Hitspark Display]
type = Explod
triggerall = ishelper(026)
trigger1 = !time
anim = 7012
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -2
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 126,256
remappal = 0,33
[State 0, Hitspark Display]
type = Explod
triggerall = ishelper(026)
trigger1 = !time
anim = 7012
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -4
ownpal = 1
trans = sub
angle = var(1)
;-----------------------------------------

;-------------------------------------
[State 0, Onda]
type = Explod
triggerall = ishelper(027)
trigger1 = !time
anim = 7006
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1
angle = var(1)
remappal = 10,0+root,var(22)
;-----------------------------------------

;-------------------------------------
[State 0, Impacto Display2SDF]
type = Explod
triggerall = ishelper(028)
trigger1 = !time
anim = 7003
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -5
ownpal = 1
angle = var(1)
remappal = 10,0+root,var(22)
[State 0, Onda Display2SDF]
type = Explod
triggerall = ishelper(028)
trigger1 = !time
anim = 7006
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1
angle = var(1)
remappal = 10,0+root,var(22)


[State 0, Hitspark Display2SDF]
type = Explod
triggerall = ishelper(028)
trigger1 = !time
anim = 7001
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*.4,const(size.yscale)*.4
sprpriority = -3
ownpal = 1
angle = var(1)
remappal = 0,40

[State 0, Hitspark DisplaySDF]
type = Explod
triggerall = ishelper(028)
trigger1 = !time
anim = 7012
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 6
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 126,256
remappal = 10,0+root,var(22)
[State 0, Hitspark DisplaySDF]
type = Explod
triggerall = ishelper(028)
trigger1 = !time
anim = 7012
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -2
ownpal = 1
angle = var(1)
remappal = 10,0+root,var(22)
[State 0, Hitspark DisplaySDF]
type = Explod
triggerall = ishelper(028)
trigger1 = !time
anim = 7012
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -4
ownpal = 1
trans = sub
angle = var(1)
;-----------------------------------------

;-----------------------------------------
[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 2
ignorehitpause = 1
;------------------------------------------

;-------------------------------------------------------------------------------
; MultiHelper Hitspark Assist
;===============================================================================
[Statedef 801]
type = A
anim = 9999

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 1
value = random%360

;-------------------------------------
[State 0, Onda Guard]
type = Explod
triggerall = ishelper(018)
trigger1 = !time
anim = 7006
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*.8,const(size.yscale)
sprpriority = 5
ownpal = 1
angle = var(1)

[State 0, Hitspark Guard]
type = Explod
triggerall = ishelper(018)
trigger1 = !time
anim = 7000
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ownpal = 1
trans = addalpha
alpha = 156,256
remappal = 0,36
[State 0, Hitspark Guard]
type = Explod
triggerall = ishelper(018)
trigger1 = !time
anim = 7000
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 0
ownpal = 1
trans = addalpha
alpha = 100,256
remappal = 0,36
[State 0, Hitspark Guard1SUB]
type = Explod
triggerall = ishelper(018)
trigger1 = !time
anim = 7000
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
ownpal = 1
trans = sub
remappal = 0,33
;-----------------------------------------

;-------------------------------------
[State 0, Impacto Base]
type = Explod
triggerall = ishelper(019)
trigger1 = !time
anim = 7001
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*.3,const(size.yscale)*.3
sprpriority = -5
ownpal = 1
angle = var(1)
remappal = 0,40

[State 0, Onda Base]
type = Explod
triggerall = ishelper(019)
trigger1 = !time
anim = 7006
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ownpal = 1
angle = var(1)
[State 0, Sangre Base]
type = Explod
triggerall = random < 450
triggerall = ishelper(019)
trigger1 = !time
anim = cond(random < 500,7007,7008)
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*.9,const(size.yscale)*.9
sprpriority = -1;2+random%4
ownpal = 1
angle = var(1)

[State 0, Hitspark Base1]
type = Explod
triggerall = ishelper(019)
trigger1 = !time
anim = 7010
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 10
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 156,256
remappal = 0,40
[State 0, Hitspark Base1]
type = Explod
triggerall = ishelper(019)
trigger1 = !time
anim = 7010
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 0
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 100,256
remappal = 0,40
[State 0, Hitspark Base1SUB]
type = Explod
triggerall = ishelper(019)
trigger1 = !time
anim = 7010
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
ownpal = 1
trans = sub
angle = var(1)

[State 0, Hitspark Base2]
type = Explod
triggerall = ishelper(019)
trigger1 = !time
anim = 7011
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -10
ownpal = 1
angle = var(1)
trans = add
remappal = 0,40
[State 0, Hitspark Base2SUB]
type = Explod
triggerall = ishelper(019)
trigger1 = !time
anim = 7011
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -11
ownpal = 1
trans = sub
angle = var(1)
;-----------------------------------------

;-------------------------------------
[State 0, Impacto Vegeta]
type = Explod
triggerall = ishelper(020)
trigger1 = !time
anim = 7001
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale)*.3,const(size.yscale)*.3
sprpriority = -5
ownpal = 1
angle = var(1)
remappal = 0,40

[State 0, Onda Vegeta]
type = Explod
triggerall = ishelper(020)
trigger1 = !time
anim = 7006
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -15
ownpal = 1
angle = var(1)

[State 0, Hitspark Vegeta1]
type = Explod
triggerall = ishelper(020)
trigger1 = !time
anim = 4117
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 1
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 156,256
remappal = 20,1+parent,var(3)
[State 0, Hitspark Vegeta1]
type = Explod
triggerall = ishelper(020)
trigger1 = !time
anim = 4117
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = 0
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 100,256
remappal = 20,1+parent,var(3)
[State 0, Hitspark Vegeta1SUB]
type = Explod
triggerall = ishelper(020)
trigger1 = !time
anim = 4117
pos = 0,0
postype = p1  ;p2,front,back,left,right
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = const(size.xscale),const(size.yscale)
sprpriority = -1
ownpal = 1
trans = sub
angle = var(1)
;-----------------------------------------

;-----------------------------------------
[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 2
ignorehitpause = 1
;------------------------------------------
;-------------------------------------------------------------------------------
; Dragon Rush Attempt
[Statedef 900]
type    = A
movetype= A
physics = N
juggle  = 0
Velset = vel x*.3,vel y*.1
ctrl = 0
anim = 900
poweradd = 0
sprpriority = 2
facep2 = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,55
volumescale = 100
channel = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S5,11
volumescale = 100
channel = 4

;peramincch
[State 0, VelAdd]
type = VelAdd
triggerall = prevstateno != [90,95]
triggerall = ailevel = 0
triggerall = time < 20
trigger1 = command = "holdback"
x = -.01
[State 0, VelAdd]
type = VelAdd
triggerall = prevstateno != [90,95]
triggerall = ailevel = 0
triggerall = time < 20
trigger1 = command = "holdfwd"
x = .01
;peramincch

;peramincch ai
[State 0, VelAdd]
type = VelAdd
triggerall = prevstateno != [90,95]
triggerall = ailevel > 0
triggerall = time < 20
trigger1 = p2bodydist x < 50
x = -.01
[State 0, VelAdd]
type = VelAdd
triggerall = prevstateno != [90,95]
triggerall = ailevel > 0
triggerall = time < 20
trigger1 =  p2bodydist x > 60
x = .01
;peramincch ai

[State 0, Smash Hit]
type = VarSet
trigger1 = !movecontact
v = 4   
value = cond(enemynear,movetype = H,1,0)
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y > -1
statetype = S       ;S,A,C,L
movetype = A       ;I,A,H
physics = N         ;A,C,S,N
ignorehitpause = 1
[State 0, PosSet]
type = PosSet
triggerall = statetype = A
trigger1 = pos y >= -10
y = -5
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
triggerall = statetype = A
trigger1 = pos y >= -10
y = .05
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = !time 
helpertype = normal ;player
name = "limitadorrush"
ID = 920
stateno = 953
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

;charge
[State 0, Aura]
type = Explod
trigger1 = time = 0||time = 5
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,36
supermovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 0||time = 5
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33
supermovetime = 30
;charge

[State 0, Viento Pequeño]
type = Explod
triggerall = time > 20 && animelemtime(10) <0
trigger1 = Pos y >= 0 && time >= 5 && timemod = 4,0
anim = 7022
ID = 7022
pos = 0,0
postype = p1
scale = .1*const(size.xscale),.1*const(size.yscale)
sprpriority = 2
ontop = 0
ownpal = 1
facing = cond(vel x > 0,1,-1)
removeongethit = 1
remappal = 0,38

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = unguardable

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time > 20
value = -vel y*3;vel y*3
scale = 1,1
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = p2bodydist y = [-80,80]
trigger1 = time = [20,23]
y = cond(pos y >= -1,0,p2bodydist y / 7)
[State 0, VelSet]
type = VelSet
triggerall = p2bodydist y != [-80,80]
trigger1 = time = [20,23]
y = cond(pos y >= -1,0,cond(p2bodydist y > 0,4,-4))

[State 0, VelSet]
type = VelSet
trigger1 = time = 20
x = 17

[State 0, VelAdd]
type = VelAdd
trigger1 = time > 20 && vel x > 10
x = -.3
y = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time > 20 && pos y > -1
y = 0
[State 0, PosSet]
type = PosSet
trigger1 = pos y > -1 && vel y > 0
y = 0
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = time > 20 && vel x > 1
x = -.9
y = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 10
x = .4
y = vel y*.05
ignorehitpause = 1

[State 900, Ground A] 
type = HitDef
triggerall = !numhelper(921)
triggerall = pos y >= -1 && (enemynear,statetype != A && enemynear,movetype != H)
trigger1 = !movecontact
attr = S, NT;NA
hitflag = M
animtype  = Hard
damage    = 5
guardflag = MA
pausetime = 3,6
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S5,5
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0,0
air.velocity = 0,0
Fall = 1
fall.recover = 0
Envshake.time = 0
kill = 0
guard.kill = 0
id = 90
hitonce = 1
yaccel = .38
priority = 5
p1stateno = 901
p2stateno = 34675
numhits = 0

[State 900, Ground B]
type = HitDef
triggerall = !numhelper(921)
triggerall = pos y >= -1 && (enemynear,statetype = A && enemynear,movetype = H)
trigger1 = !movecontact
attr = S, NT
hitflag = AF
animtype  = Hard
damage    = 5
guardflag = MA
pausetime = 3,6
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S5,5
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0,0
air.velocity = 0,0
Fall = 1
fall.recover = 0
Envshake.time = 0
kill = 0
guard.kill = 0
id = 90
hitonce = 1
yaccel = .38
priority = 5
p1stateno = 901
p2stateno = 34675
numhits = 0

[State 900, Air]
type = HitDef
triggerall = !numhelper(921)
triggerall = pos y < -1 
trigger1 = !movecontact
attr = A, NT
hitflag = AF
animtype  = Hard
damage    = 5
guardflag = MA
pausetime = 3,6
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S5,5
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0,0
air.velocity = 0,0
Fall = 1
fall.recover = 0
Envshake.time = 0
kill = 0
guard.kill = 0
id = 90
hitonce = 1
priority = 5
p1stateno = 901
p2stateno = 34675
yaccel = .38
numhits = 0

[State 900, ReversalDef]
type = ReversalDef
trigger1 = facing = 1 && (animelem = 5||animelem = 7||animelem = 9)
trigger2 = facing != 1 && (animelem = 4||animelem = 6||animelem = 8)
reversal.attr = SA,NA,NT
sparkno = -1
id = 940
priority = 7
hitonce = 1
hitsound = S4,3
p1stateno = 940
p2stateno = 941
ignorehitpause = 1

[State 200, End]
type = ChangeState
trigger1 = !animtime && !numtarget(90)
trigger2 = numtarget(90)
trigger2 = target(90),ishelper
value = cond(pos y >= 0,12,50)
ctrl = cond(pos y >= 0,1,0)
;-------------------------------------------------------------------------------
; Dragon Rush Succes
[Statedef 901]
type    = A
movetype= A
physics = N
juggle  = 0
Velset = 0,0
ctrl = 0
anim = cond(pos y >= -1,901,902)
poweradd = 50
sprpriority = 5

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 25   
value = 1
ignorehitpause = 1

[State 0, Speedlines]
type = Explod
trigger1 = !time
anim = 905
ID = 905
pos= 160,Floor((1.33*GameHeight/GameWidth)*120)
scale=.6,.6
postype = back
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
vel = 0,0
accel = 0,0
pausemovetime = 9999
supermovetime = 9999
sprpriority = 3
ontop = 1
ownpal = 1
removeongethit = 1
persistent = 0
remappal =  10,0+var(22)

[State 0, Helper]
type = Helper
trigger1 = !time  && !numhelper(920)
helpertype = normal ;player
name = "limitadorrush"
ID = 920
stateno = 953
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, Helper]
type = Helper
trigger1 = !time
helpertype = normal
name = "sparkpeta"
ID = 016
stateno = 800
pos = 13*const(size.xscale),-29*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .2*const(size.xscale)
size.yscale = .2*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, PosAdd]
type = PosAdd
trigger1 = frontedgebodydist < 40
x = -2
y = 0
ignorehitpause = 1

;Ground
[State 0, Helper]
type = Helper
triggerall = anim = 901
trigger1 = animelem = 4||animelem = 9||animelem = 11||animelem = 17||animelem = 25||animelem = 30||animelem = 35||animelem = 39
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = (20+random%21)*const(size.xscale),(-10-random%32)*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.19+time*.002)*const(size.xscale)
size.yscale = (.19+time*.002)*const(size.yscale)
ignorehitpause = 1

[State 0, HitAdd]
type = HitAdd
triggerall = anim = 901
trigger1 = animelem = 4||animelem = 9||animelem = 11||animelem = 17||animelem = 25||animelem = 30||animelem = 35||animelem = 39
value = 1
ignorehitpause = 1
[State 0, TargetLifeAdd]
type = TargetLifeAdd
triggerall = anim = 901
trigger1 = animelem = 4||animelem = 9||animelem = 11||animelem = 17||animelem = 25||animelem = 30||animelem = 35||animelem = 39
value = -3
ID = 90
kill = 0
absolute = 0
ignorehitpause = 1
;[State 0, PlaySnd]
;type = PlaySnd
;triggerall = anim = 901
;trigger1 = animelem = 4||animelem = 9||animelem = 11||animelem = 17||animelem = 25||animelem = 30||animelem = 35||animelem = 39
;value = S1,3+random%6
[State 0, EnvShake]
type = EnvShake
triggerall = anim = 901
trigger1 = animelem = 4||animelem = 9||animelem = 11||animelem = 17||animelem = 25||animelem = 30||animelem = 35||animelem = 39
time = 3
;Ground

;Air
[State 0, Helper]
type = Helper
triggerall = anim = 902
trigger1 = animelem = 4||animelem = 7||animelem = 10||animelem = 14||animelem = 18||animelem = 23||animelem = 28||animelem = 31||animelem = 35
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = (20+random%21)*const(size.xscale),(-10-random%32)*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.19+time*.002)*const(size.xscale)
size.yscale = (.19+time*.002)*const(size.yscale)
ignorehitpause = 1

[State 0, HitAdd]
type = HitAdd
triggerall = anim = 902
trigger1 = animelem = 4||animelem = 7||animelem = 10||animelem = 14||animelem = 18||animelem = 23||animelem = 28||animelem = 31||animelem = 35
value = 1
ignorehitpause = 1
[State 0, TargetLifeAdd]
type = TargetLifeAdd
triggerall = anim = 902
trigger1 = animelem = 4||animelem = 7||animelem = 10||animelem = 14||animelem = 18||animelem = 23||animelem = 28||animelem = 31||animelem = 35
value = -3
ID = 90
kill = 0
absolute = 0
ignorehitpause = 1
;[State 0, PlaySnd]
;type = PlaySnd
;triggerall = anim = 902
;trigger1 = animelem = 4||animelem = 7||animelem = 10||animelem = 14||animelem = 18||animelem = 23||animelem = 28||animelem = 31||animelem = 35
;value = S1,3+random%4
[State 0, EnvShake]
type = EnvShake
triggerall = anim = 902
trigger1 = animelem = 4||animelem = 7||animelem = 10||animelem = 14||animelem = 18||animelem = 23||animelem = 28||animelem = 31||animelem = 35
time = 3
;Air

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S5,12
volumescale = 100
channel = 6

[State 0, TargetBind]
type = TargetBind
trigger1 = 1
id = 90
pos = 34*const(size.xscale),0
ignorehitpause = 1

[State 0, Helper]
type = Helper
triggerall = teammode != simul && enemynear,teammode != simul
trigger1 = !time
helpertype = normal
name = "zoom"
ID = 9901
stateno = 9901
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent = 0

[State 200, End]
type = ChangeState
trigger1 = time = 60
value = cond(var(4) = 0,910,(cond(pos y >-1,930,920)))
ctrl = 0
;-------------------------------------------------------------------------------
; DR Launcher
[Statedef 910]
type    = A
movetype= A
physics = N
juggle  = 0
Velset = .1,0
ctrl = 0
anim = 910
poweradd = 60
facep2 = 1
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,68
volumescale = 100
channel = 5

[State 0, Aura]
type = Explod
trigger1 = !time 
anim = 552
ID = 552
pos = 0,1*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .45*const(size.xscale),.45*const(size.yscale)
sprpriority = 9
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
[State 0, Aura]
type = Explod
trigger1 = !time 
anim = 552
ID = 552
pos = 0,1*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .45*const(size.xscale),.45*const(size.yscale)
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,33
trans = sub

[State 0, TargetBind]
type = TargetBind
trigger1 = time < 10
id = 90
pos = 34*const(size.xscale),0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 6
x = 0
y = 0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,2
volume = 50

[State 0, TargetState]
type = TargetState
triggerall = numtarget(90)
trigger1 = animelem = 6
value = 34676
ID = 90
ignorehitpause = 1
persistent = 0
[State 0, PlaySnd]
type = PlaySnd
triggerall = numtarget(90)
trigger1 = animelem = 6
value = S1,8+random%2
volumescale = 150
[State 0, HitAdd]
type = HitAdd
triggerall = numtarget(90)
trigger1 = animelem = 6
value = 1
[State 0, EnvShake]
type = EnvShake
triggerall = numtarget(90)
trigger1 = animelem = 6
time = 15
freq = 70
ampl = -7
phase = 110
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 6
anim = 6999
ID = 6999
pos = 15*const(size.xscale),-64*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 5
angle = 80
removetime = -2
pausemovetime = 99
supermovetime = 99
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 6
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 15*const(size.xscale),-64*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .25*const(size.xscale)
size.yscale = .24*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 950, A - 6]
type = ChangeState
trigger1 = animelem = 8
value = 950

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = cond(pos y < 0,50,0)
ctrl = 1
;-------------------------------------------------------------------------------
; DR Sliding Knockdown
[Statedef 920]
type    = A
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 920
poweradd = 100
facep2 = 1
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,96
volumescale = 100
channel = 5

[State 0, Helper]
type = Helper
trigger1 = !time 
helpertype = normal ;player
name = "limitadorrush ctrl"
ID = 921
stateno = 921
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 5
x = -2
y = -2
ignorehitpause = 1
persistent = 0
[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = -.01
y = 0
ignorehitpause = 1
persistent = 0
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 5
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = A         ;A,C,S,N
ignorehitpause = 1

[State 0, VelSet]
type = VelAdd
trigger1 = !time
x = .2
y = -.5
ignorehitpause = 1
persistent = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = animelemtime(3)<0
id = 90
pos = 34*const(size.xscale),0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,2
volume = 50

[State 0, TargetState]
type = TargetState
triggerall = numtarget(90)
trigger1 = animelem = 3
value = 82735
ID = 90
ignorehitpause = 1
persistent = 0
[State 0, PlaySnd]
type = PlaySnd
triggerall = numtarget(90)
trigger1 = animelem = 3
value = S1,8+random%2
volumescale = 150
[State 0, HitAdd]
type = HitAdd
triggerall = numtarget(90)
trigger1 = animelem = 3
value = 1
[State 0, EnvShake]
type = EnvShake
triggerall = numtarget(90)
trigger1 = animelem = 3
time = 15
freq = 70
ampl = -7
phase = 110
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 6999
ID = 6999
pos = 20*const(size.xscale),-15*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = -1
bindtime = 5
angle = 45
removetime = -2
pausemovetime = 99
supermovetime = 99
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 20*const(size.xscale),-15*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .25*const(size.xscale)
size.yscale = .24*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;===============================================================================
; Limitador Control enemigo
;-------------------------------------------------------------------------------
[Statedef 921]
type    = S
movetype= I
physics = N
ctrl = 0
anim = 9999
sprpriority = 2

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = enemynear,ctrl=1
ignorehitpause = 1
;-------------------------------------------------------------------------------
; DR Orale ALb
[Statedef 930]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = cond(pos y <0,935,930)
poweradd = 100
facep2 = 1
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,97
volumescale = 100
channel = 5

[State 0, Helper]
type = Helper
trigger1 = !time 
helpertype = normal ;player
name = "limitadorrush ctrl"
ID = 921
stateno = 921
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 4
x = -.01
y = 0
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelAdd
trigger1 = !time
x = .2
y = 0
ignorehitpause = 1
persistent = 0

[State 0, TargetBind]
type = TargetBind
triggerall = numtarget(90)
trigger1 = animelemtime(4)<0
id = 90
pos = 34*const(size.xscale),0
ignorehitpause = 1
[State 0, TargetBind]
type = TargetBind
triggerall = numtarget(940)
trigger1 = animelemtime(4)<0
id = 940
pos = 34*const(size.xscale),0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,2
volume = 50

[State 0, TargetState]
type = TargetState
triggerall = numtarget(90)
trigger1 = animelem = 4
value = 34677
ID = 90
ignorehitpause = 1
persistent = 0
[State 0, TargetState]
type = TargetState
triggerall = numtarget(940)
trigger1 = animelem = 4
value = 34677
ID = 940
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S1,8+random%2
volumescale = 150
[State 0, HitAdd]
type = HitAdd
trigger1 = animelem = 4
value = 1
[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 4
time = 15
freq = 70
ampl = -7
phase = 110
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 6999
ID = 6999
pos = 25*const(size.xscale),-33*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 5
angle = 0
removetime = -2
pausemovetime = 99
supermovetime = 99
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Helper]
type = Helper
triggerall = anim = 930
trigger1 = animelem = 4
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 25*const(size.xscale),-33*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .25*const(size.xscale)
size.yscale = .24*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
triggerall = anim = 935
trigger1 = animelem = 4
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 19*const(size.xscale),-17*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .25*const(size.xscale)
size.yscale = .24*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, CtrlSet]
type = CtrlSet
trigger1 = animelem=6
value = 1
ignorehitpause = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = cond(pos y<0,50,0)
ctrl = 1
;-------------------------------------------------------------------------------
; Clash P1
[Statedef 940]
type    = S
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = cond(pos y >= -1,901,902)
facep2 = 1
velset = 0,0
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, Speedlines]
type = Explod
trigger1 = !time
anim = 947
ID = 947
pos= 160,Floor((1.33*GameHeight/GameWidth)*120)
scale=.7,.6
postype = back
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
vel = 0,0
accel = 0,0
pausemovetime = 9999
supermovetime = 9999
sprpriority = 3
ontop = 1
ownpal = 1
removeongethit = 0
persistent = 0
remappal =  10,0+var(22)

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = anim = 902
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = N         ;A,C,S,N
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time
fv = 33   
value = 0
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = !time
fv = 34   
value = 0
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
triggerall = numtarget(940)
trigger1 = command = "a"||command = "b"||command = "c"||command = "x"
fv = 33
value = 1
ignorehitpause = 1
[State 0, VarAdd]
type = VarAdd
triggerall = numtarget(940)
trigger1 = target(940),command = "a"||target(940),command = "b"||target(940),command = "c"||target(940),command = "x"
fv = 34
value = 1
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
triggerall = numtarget(940)
trigger1 = command = "a"||command = "b"||command = "c"||command = "x"
x = 3
y = 0
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = numtarget(940)
trigger1 = target(940),command = "a"||target(940),command = "b"||target(940),command = "c"||target(940),command = "x"
x = -3
y = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = vel x > 2
x = 3
[State 0, VelSet]
type = VelSet
trigger1 = vel x < -2
x = -3

[State 0, TargetBind]
type = TargetBind
trigger1 = 1
time = 1
id = 940
pos = 50,0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S5,12
volumescale = 100
channel = 7

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 120 && (fvar(33) = fvar(34))
value = S1,9
volumescale = 100

[State 0, EnvShake]
type = EnvShake
trigger1 = command = "a"||command = "b"||command = "c"||command = "x"
time = 3
[State 0, HitAdd]
type = HitAdd
trigger1 = command = "a"||command = "b"||command = "c"||command = "x"
value = 1

[State 0, Helper]
type = Helper
triggerall = teammode != simul && enemynear,teammode != simul
trigger1 = !time
helpertype = normal
name = "zoom"
ID = 9902
stateno = 9902
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 120 && (fvar(33) = fvar(34))
x = -2
y = -5
ignorehitpause = 1

;Ground
[State 0, Helper]
type = Helper
triggerall = anim = 901
trigger1 = animelem = 4||animelem = 9||animelem = 11||animelem = 17||animelem = 25||animelem = 30||animelem = 35||animelem = 39
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = (20+random%31)*const(size.xscale),(-10-random%32)*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.19+time*.001)*const(size.xscale)
size.yscale = (.19+time*.001)*const(size.yscale)
ignorehitpause = 1
[State 0, Helper]
type = Helper
triggerall = anim = 901
trigger1 = animelem = 4||animelem = 9||animelem = 11||animelem = 17||animelem = 25||animelem = 30||animelem = 35||animelem = 39
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 801
pos = (20+random%31)*const(size.xscale),(-10-random%32)*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.19+time*.001)*const(size.xscale)
size.yscale = (.19+time*.001)*const(size.yscale)
ignorehitpause = 1
;Ground

;Air
[State 0, Helper]
type = Helper
triggerall = anim = 902
trigger1 = animelem = 4||animelem = 7||animelem = 10||animelem = 14||animelem = 18||animelem = 23||animelem = 28||animelem = 31||animelem = 35
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = (20+random%21)*const(size.xscale),(-10-random%32)*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.19+time*.001)*const(size.xscale)
size.yscale = (.19+time*.001)*const(size.yscale)
ignorehitpause = 1
[State 0, Helper]
type = Helper
triggerall = anim = 902
trigger1 = animelem = 4||animelem = 7||animelem = 10||animelem = 14||animelem = 18||animelem = 23||animelem = 28||animelem = 31||animelem = 35
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 801
pos = (20+random%31)*const(size.xscale),(-10-random%32)*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.19+time*.001)*const(size.xscale)
size.yscale = (.19+time*.001)*const(size.yscale)
ignorehitpause = 1
;Air

;-------------------------------------
[State 0, Onda Fuerte]
type = Explod
trigger1 = time = 120 && (fvar(33) = fvar(34))
persistent = 0
anim = 7006
pos = 0,-28*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .78*const(size.xscale),.78*const(size.yscale)
sprpriority = 5
ownpal = 1
angle = var(1)
ignorehitpause = 1

[State 0, Hitspark Fuerte1]
type = Explod
trigger1 = time = 120 && (fvar(33) = fvar(34))
persistent = 0
anim = 7010
pos = 0,-28*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 10
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 156,256
remappal = 10,0+var(22)
ignorehitpause = 1
[State 0, Hitspark Fuerte1]
type = Explod
trigger1 = time = 120 && (fvar(33) = fvar(34))
persistent = 0
anim = 7010
pos = 0,-28*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 0
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 100,256
remappal = 10,0+var(22)
ignorehitpause = 1
[State 0, Hitspark Fuerte1SUB]
type = Explod
trigger1 = time = 120 && (fvar(33) = fvar(34))
persistent = 0
anim = 7010
pos = 0,-28*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = -1
ownpal = 1
trans = sub
angle = var(1)
ignorehitpause = 1

[State 0, Hitspark Fuerte2]
type = Explod
trigger1 = time = 120 && (fvar(33) = fvar(34))
persistent = 0
anim = 7011
pos = 0,-28*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = -11
ownpal = 1
angle = var(1)
trans = add
remappal = 10,0+var(22)
ignorehitpause = 1
[State 0, Hitspark Fuerte2SUB]
type = Explod
trigger1 = time = 120 && (fvar(33) = fvar(34))
persistent = 0
anim = 7011
pos = 0,-28*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = -12
ownpal = 1
trans = sub
angle = var(1)
ignorehitpause = 1

[State 0, Hitspark Fuerte3]
type = Explod
trigger1 = time = 120 && (fvar(33) = fvar(34))
persistent = 0
anim = 7013
pos = 0,-28*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = -15
ownpal = 1
angle = var(1)
trans = add
remappal = 0,40
ignorehitpause = 1
[State 0, Hitspark Fuerte3SUB]
type = Explod
trigger1 = time = 120 && (fvar(33) = fvar(34))
persistent = 0
anim = 7013
pos = 0,-28*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = -16
ownpal = 1
trans = sub
angle = var(1)
ignorehitpause = 1
;-----------------------------------------

;-------------------------------------
[State 0, Onda Fuerte]
type = Explod
trigger1 = time = 120 && (fvar(33) = fvar(34))
persistent = 0
anim = 7006
pos = 0,-28*const(size.yscale)
postype = p2  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .78*const(size.xscale),.78*const(size.yscale)
sprpriority = 5
ownpal = 1
angle = var(1)
ignorehitpause = 1

[State 0, Hitspark Fuerte1]
type = Explod
trigger1 = time = 120 && (fvar(33) = fvar(34))
persistent = 0
anim = 7010
pos = 0,-28*const(size.yscale)
postype = p2  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 10
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 156,256
remappal = 10,0+var(22)
ignorehitpause = 1
[State 0, Hitspark Fuerte1]
type = Explod
trigger1 = time = 120 && (fvar(33) = fvar(34))
persistent = 0
anim = 7010
pos = 0,-28*const(size.yscale)
postype = p2  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 0
ownpal = 1
angle = var(1)
trans = addalpha
alpha = 100,256
remappal = 10,0+var(22)
ignorehitpause = 1
[State 0, Hitspark Fuerte1SUB]
type = Explod
trigger1 = time = 120 && (fvar(33) = fvar(34))
persistent = 0
anim = 7010
pos = 0,-28*const(size.yscale)
postype = p2  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = -1
ownpal = 1
trans = sub
angle = var(1)
ignorehitpause = 1

[State 0, Hitspark Fuerte2]
type = Explod
trigger1 = time = 120 && (fvar(33) = fvar(34))
persistent = 0
anim = 7011
pos = 0,-28*const(size.yscale)
postype = p2  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = -11
ownpal = 1
angle = var(1)
trans = add
remappal = 10,0+var(22)
ignorehitpause = 1
[State 0, Hitspark Fuerte2SUB]
type = Explod
trigger1 = time = 120 && (fvar(33) = fvar(34))
persistent = 0
anim = 7011
pos = 0,-28*const(size.yscale)
postype = p2  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = -12
ownpal = 1
trans = sub
angle = var(1)
ignorehitpause = 1

[State 0, Hitspark Fuerte3]
type = Explod
trigger1 = time = 120 && (fvar(33) = fvar(34))
persistent = 0
anim = 7013
pos = 0,-28*const(size.yscale)
postype = p2  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = -15
ownpal = 1
angle = var(1)
trans = add
remappal = 0,40
ignorehitpause = 1
[State 0, Hitspark Fuerte3SUB]
type = Explod
trigger1 = time = 120 && (fvar(33) = fvar(34))
persistent = 0
anim = 7013
pos = 0,-28*const(size.yscale)
postype = p2  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 999999
supermovetime = 999999
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = -16
ownpal = 1
trans = sub
angle = var(1)
ignorehitpause = 1
;-----------------------------------------

[State 200, End]
type = ChangeState
trigger1 = time = 120 && (fvar(33) = fvar(34))
trigger2 = numtarget(940)
trigger2 = target(940),stateno != 941
value = 50
ctrl = 1
[State 200, End]
type = ChangeState
trigger1 = time = 120 && (fvar(33) > fvar(34))
value = 930
ctrl = 1
[State 200, End]
type = ChangeState
trigger1 = time = 120 && (fvar(33) < fvar(34))
value = 945
ctrl = 1
;-------------------------------------------------------------------------------
; Clash P2
[Statedef 941]
type = A
movetype= H
physics = N
velset = 0,0
ctrl = 0
facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = command = "a"||command = "b"||command = "c"||command = "x"
time = 3

[State 0, HitAdd]
type = HitAdd
trigger1 = command = "a"||command = "b"||command = "c"||command = "x"
value = 1

[State 901,1]
type = null
trigger1 = 1
pos = 60,0

[State -3, Speed]
type = ChangeAnim
trigger1 = AnimElemTime(AnimElemNo(0) + 1) < 0
trigger1 = AnimElemTime(AnimElemNo(0)) > floor((AnimElemTime(AnimElemNo(0)) - AnimElemTime(AnimElemNo(0) + 1))/4)
ignorehitpause = 1
value = anim
elem = AnimElemNo(0) + 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = random = [0,166]
trigger1 = time = 0
trigger2 = animtime = 0
value = cond(random>500,200,cond(selfAnimExist(201),201,200))
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = random = [167,333]
trigger1 = time = 0
trigger2 = animtime = 0
value = cond(random>500,210,cond(selfAnimExist(211),211,210))
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = random = [334,500]
trigger1 = time = 0
trigger2 = animtime = 0
value = cond(random>500,210,cond(selfAnimExist(220),220,210))
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = random = [501,666]
trigger1 = time = 0
trigger2 = animtime = 0
value = cond(random>500,230,cond(selfAnimExist(231),231,230))
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = random = [667,833]
trigger1 = time = 0
trigger2 = animtime = 0
value = cond(random>500,240,cond(selfAnimExist(241),241,240))
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = random = [833,999]
trigger1 = time = 0
trigger2 = animtime = 0
value = cond(random>500,240,cond(selfAnimExist(250),250,240))
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = ishelper=1

[State 0, VelSet]
type = VelSet
trigger1 = p2stateno != 940
x = -2
y = -5
ignorehitpause = 1

[State 0, SelfState]
type = SelfState
trigger1 = p2stateno != [930,940]
value = 50
ctrl = 1

;-------------------------------------------------------------------------------
; Lose P1
[Statedef 945]
type    = S
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 5300
facep2 = 1
velset = 0,0
sprpriority = 2

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 =  pos y < 0
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = N         ;A,C,S,N
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
triggerall = numtarget(940)
trigger1 = time < 4
time = 1
id = 940
pos = 50,0
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = numtarget(940)
trigger1 = !time
value = 946
ID = 940
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = S1,8+random%2
volumescale = 150

[State 0, Helper]
type = Helper
trigger1 = time = 5
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 0,-28*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .25*const(size.xscale)
size.yscale = .24*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 200, End]
type = SelfState
trigger1 = time = 5
value = 34677
ctrl = 0

;-------------------------------------------------------------------------------
; Win P2
[Statedef 946]
type = A
movetype= H
physics = N
velset = 0,0
ctrl = 0
facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 5
time = 9
time = 15
freq = 70
ampl = -7
phase = 110
ignorehitpause = 1

[State 0, HitAdd]
type = HitAdd
trigger1 = time = 5
value = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = random = [0,166]
trigger1 = !time
value = cond(random>500,200,cond(selfAnimExist(201),201,200))
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = random = [167,333]
trigger1 = !time
value = cond(random>500,210,cond(selfAnimExist(211),211,210))
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = random = [334,500]
trigger1 = !time
value = cond(random>500,210,cond(selfAnimExist(220),220,210))
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = random = [501,666]
trigger1 = !time
value = cond(random>500,230,cond(selfAnimExist(231),231,230))
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = random = [667,833]
trigger1 = !time
value = cond(random>500,240,cond(selfAnimExist(241),241,240))
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = random = [833,999]
trigger1 = !time
value = cond(random>500,240,cond(selfAnimExist(250),250,240))
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = ishelper=1

[State 0, VelSet]
type = VelSet
trigger1 = !animtime && pos y < 0
x = -2
y = -5
ignorehitpause = 1

[State -3, Speed]
type = ChangeAnim
triggerall = time >6
trigger1 = AnimElemTime(AnimElemNo(0) + 1) < 0
trigger1 = AnimElemTime(AnimElemNo(0)) > floor((AnimElemTime(AnimElemNo(0)) - AnimElemTime(AnimElemNo(0) + 1))/7)
ignorehitpause = 1
value = anim
elem = AnimElemNo(0) + 1

[State 0, SelfState]
type = SelfState
trigger1 = !animtime
value = cond(pos y < 0,50,0)
ctrl = 1

;-------------------------------------------------------------------------------
; Super Dash
[Statedef 950]
type    = A
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 950
facep2 = 1
velset = cond(vel x =0,.0001,vel x*.4),cond(vel y =0,-.0001,vel y*.4)
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time && random < 500
value = S0,56
volumescale = 100
channel = 5

[State 0, Explod]
type = Explod
triggerall = !movecontact
trigger1 = time > 11 && vel x!=0
anim = 7020
ID = 7020
pos = 0,-28*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 0
scale = .2*const(size.xscale),.3*const(size.yscale)
sprpriority = -2
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
angle = cond(vel y=0,0,((atan((-1*Vel Y)/Vel X))*(360/(2*pi)))+90);90-vel y*3
remappal = 10,0+var(22)

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 7009
ID = 7009
pos = 0,-28*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = 7
ontop = 0
remappal = 10,0+var(22)
ownpal = 1
removeongethit = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S500,4;charge sound
volumescale = 80
channel = 9

; _ DASH AURA
[State 0, Explod]
type = Explod
trigger1 = !time
anim = 962
ID = 959
pos = 0,-26*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = -1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .195*const(size.xscale),.21*const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,33
trans = sub
angle = 0
[State 0, Explod]
type = Explod
trigger1 = !time
anim = 962
ID = 959
pos = 0,-26*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = -1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .195*const(size.xscale),.21*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
angle = 0
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time < 10
ID = 959
angle = cond(vel x=0,0,vel x*6)
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 11
id = 959
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 11
anim = 961
ID = 960
pos = 0,-25*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .22*const(size.xscale),.24*const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,33
trans = sub
angle = 90
[State 0, Explod]
type = Explod
trigger1 = time = 11
anim = 961
ID = 960
pos = 0,-25*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .22*const(size.xscale),.24*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
angle = 90
[State 0, Explod]
type = Explod
trigger1 = time = 11
anim = 960
ID = 960
pos = 0,-25*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .22*const(size.xscale),.24*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,33
trans = sub
angle = 90
[State 0, Explod]
type = Explod
trigger1 = time = 11
anim = 960
ID = 960
pos = 0,-25*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .22*const(size.xscale),.24*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
angle = 90
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = time > 9
ID = 960
angle = cond(vel y = 0,0,((atan((-1*Vel Y)/Vel X))*(360/(2*pi)))+90);90-vel y*3
; _ DASH AURA

[State 0, Helper]
type = Helper
trigger1 = !time 
helpertype = normal ;player
name = "limitadordash"
ID = 953
stateno = 953
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time>10
value = SCA,NP
time = 1
ignorehitpause = 1
[State 0, HitBy]
type = HitBy
trigger1 = time>10
value = SCA,NA,SA,SP,HA,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
triggerall = time > 5
trigger1 = pos y >= -5
y = -5
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = prevstateno = 204||prevstateno = 221||prevstateno = 910||prevstateno = 420
trigger1 = !time 
y = -6
x = -3.5
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
triggerall = prevstateno = 321
trigger1 = !time 
y = 1
x = -2
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = time < 11
trigger1 = pos y >= -5 && vel Y > 0
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time && pos y = 0
y = -1
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = time = 3
y = -.8
x = vel x *.8
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 4   
value = cond( (p2dist x = [-10,350]),1,0)
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = p2bodydist y <= 0
triggerall = var(4)=1
trigger1 = time = [11,35]
x = cond(P2Dist X < 0,5, .00012+abs((P2Dist x+3)*.155))
y = p2bodydist y / 8
[State 0, VelSet]
type = VelSet
triggerall = p2bodydist y > 0
triggerall = var(4)=1
trigger1 = time = [11,35]
x = cond(P2Dist X < 0,5, .00013+abs((P2Dist x+3)*.155))
y = cond(((p2dist y = [-20,20])&&enemynear,statetype=L),1.5,p2bodydist y / 7)

[State 0, VelSet]
type = VelSet
triggerall = p2bodydist y <= 0
triggerall = var(4)!=1
trigger1 = time = [11,35]
x = cond(P2Dist X < 0,5, 10)
y = p2bodydist y / 8
[State 0, VelSet]
type = VelSet
triggerall = p2bodydist y > 0
triggerall = var(4)!=1
trigger1 = time = [11,35]
x = cond(P2Dist X < 0,5, 10)
y = cond(((p2dist y = [-20,20])&&enemynear,statetype=L),1.5,p2bodydist y / 7)

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time > 10
value = cond(vel y = 0,0,((atan((-1*Vel Y)/Vel X))*(360/(2*pi))));-vel y*3
scale = 1,1
ignorehitpause = 1
[State 0, AngleDraw]
type = AngleDraw
trigger1 = time < 11
value = cond(vel x =0,0,-vel x*5);vel y*3
scale = 1,1
ignorehitpause = 1

[State 0, CLASH HIT]
type = HitOverride
triggerall = (enemynear,stateno = 950)
triggerall = (enemynear,facing != facing)
triggerall = !(cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x))
triggerall = (!enemynear,ishelper)
triggerall = time
trigger1 = time = [10,35]
attr = A,NA       
stateno = 960
forceair = 0
ignorehitpause = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 39
x = -1
y = -2
ignorehitpause = 1

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = Up
damage    = 25,5
guardflag = MA
pausetime = 18,25
guard.pausetime = 15,12
guard.hittime = 12
airguard.hittime = 15
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,6+random%3
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
air.hittime = 24
ground.velocity = -.5*const(size.xscale),-1
air.velocity = -.5*const(size.xscale),-2*const(size.yscale)
Fall = 0
air.fall = 1
fall.recover = 1
Envshake.time = 11
id = 2
kill = 0
guard.kill = 0

[State 0, Helper]
type = Helper
trigger1 = moveguarded 
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 0,-35*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .3*const(size.xscale)
size.yscale = .3*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit 
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 0,-35*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .3*const(size.xscale)
size.yscale = .3*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = movecontact=1
trigger2 = time >= 35
anim = 963
ID = 963
pos = 5*const(size.xscale),-24*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
persistent = 0
scale = .41*const(size.xscale),.46*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
remappal = 0,33
trans = sub
angle = cond(vel y = 0,0,((atan((-1*Vel Y)/Vel X))*(360/(2*pi)))+90)
[State 0, Explod]
type = Explod
trigger1 = movecontact=1
trigger2 = time >= 35
anim = 963
ID = 963
pos = 5*const(size.xscale),-24*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
persistent = 0
scale = .41*const(size.xscale),.46*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
remappal = 10,0+var(22)
angle = cond(vel y = 0,0,((atan((-1*Vel Y)/Vel X))*(360/(2*pi)))+90)
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = movecontact=1
id = 960
ignorehitpause = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = cond(moveguarded,952,951)
ctrl = 0
[State 0, TargetBind]
type = TargetBind
trigger1 = movehit
time = 1
id = 2
pos = 31*const(size.xscale),4
ignorehitpause = 1

[State 0, A auto Off]
type = VarSet
trigger1 = prevstateno = 204
v = 47 
value = 0
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
triggerall = !movecontact
trigger1 = frontedgebodydist < 5 && time > 13
value = 960
ctrl = 0
ignorehitpause = 1

[State 200, End]
type = ChangeState
trigger1 = time >= 35
value = 50
ctrl = 1

;-------------------------------------------------------------------------------
; Succes
[Statedef 951]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
velset = .1,-2.7*const(size.yscale)
anim = 951
poweradd = 0
facep2 = 1
sprpriority = 2

[State 0, TargetBind]
type = TargetBind
triggerall = !target(2),ishelper
triggerall = target(2),stateno = [5000,5150]
trigger1 = !time
time = 1
id = 2
pos = 31*const(size.xscale),4
ignorehitpause = 1

[State 600, A]
type = ChangeState
trigger1 = ailevel = 0 && command = "a"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 600

[State 610, B]
type = ChangeState
trigger1 = ailevel = 0 && command = "b"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/2
value = 610

[State 625, Down C]
type = ChangeState
trigger1 = ailevel = 0 && command = "holddown" && command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/6
value = 625

[State 620, C]
type = ChangeState
trigger1 = ailevel = 0 && command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/18
value = 620

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
; Guard
[Statedef 952]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
velset = .1,-2.7*const(size.yscale)
anim = 951
poweradd = 0
facep2 = 1
sprpriority = 2

[State 600, A]
type = ChangeState
trigger1 = ailevel = 0 && command = "a"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/2
value = 600

[State 610, B]
type = ChangeState
trigger1 = ailevel = 0 && command = "b"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/9
value = 610

[State 625, Down C]
type = ChangeState
trigger1 = ailevel = 0 && command = "holddown" && command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/10
value = 625

[State 620, C]
type = ChangeState
trigger1 = ailevel = 0 && command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)/26
value = 620

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;===============================================================================
; Limitador
;-------------------------------------------------------------------------------
[Statedef 953]
type    = S
movetype= I
physics = N
ctrl = 0
anim = 9999
sprpriority = 2

[State 0, DestroySelf]
type = DestroySelf
triggerall = ishelper(953)
trigger1 = root,statetype != A  && root,ctrl ;&& Parent,Cond(1,(!enemynear,movetype = H),0)
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
triggerall = ishelper(771)
trigger1 = enemynear,movetype != H
trigger1 = root,statetype != A  && root,ctrl
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
triggerall = ishelper(920)
triggerall = enemynear,movetype != H
trigger1 = root,statetype != A  && root,ctrl
ignorehitpause = 1
;-------------------------------------------------------------------------------
; Super Dash Crash
[Statedef 960]
type    = A
movetype= I
physics = A
juggle  = 0
ctrl = 0
anim = 94+var(11)
poweradd = 0
sprpriority = 2
velset = -4,-5

[State 0,Wall Impact]
type = Explod
trigger1 = !time
anim = 8280
ID = 8280
postype = P1
pos = 10*const(size.xscale),-25*const(size.yscale)
facing = 1
sprpriority = 8
removetime = -2
bindtime = 1
ownpal = 1
scale = .2*const(size.xscale),.2*const(size.yscale)
angle = 90-vel y*3;fvar(34)*3
removeongethit = 1
ontop = 0
ignorehitpause = 1
supermovetime 	= 999
pausemovetime = 9999
remappal = 10,0+var(22)
[State 0,Wall Impact]
type = Explod
trigger1 = !time
anim = 8280
ID = 8280
postype = P1
pos = 10*const(size.xscale),-25*const(size.yscale)
facing = 1
sprpriority = 7
removetime = -2
bindtime = 1
ownpal = 1
scale = .2*const(size.xscale),.2*const(size.yscale)
angle = 90-vel y*3;-fvar(34)*3
removeongethit = 1
ontop = 0
ignorehitpause = 1
supermovetime 	= 999
pausemovetime = 9999
remappal = 0,33
trans = sub

[State 0,Glass]
type = Explod
trigger1 = !time
anim = 7026
ID = 7026
postype = P1
pos = 10*const(size.xscale),-25*const(size.yscale)
facing = -1
sprpriority = -90
removetime = -2
bindtime = 1
ownpal = 1
scale = .4*const(size.xscale),.3*const(size.yscale)
angle = 5
removeongethit = 0
ontop = 0
ignorehitpause = 1
supermovetime 	= 999
pausemovetime = 9999
remappal = 10,0+var(22)
[State 0,Glass]
type = Explod
trigger1 = !time
anim = 7026
ID = 7026
postype = P1
pos = 10*const(size.xscale),-25*const(size.yscale)
facing = -1
sprpriority = -91
removetime = -2
bindtime = 1
ownpal = 1
scale = .4*const(size.xscale),.3*const(size.yscale)
angle = 5
removeongethit = 0
ontop = 0
ignorehitpause = 1
supermovetime 	= 999
pausemovetime = 9999
trans = sub

[State 0, Crash]
type = PlaySnd
trigger1 = Time = 0
value = S2,15
volume = 55
channel = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 7
value = S5,1
volumescale = 60

[State 200, End]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
; P2 - Grab
[Statedef 34675]
type    = A
movetype= H
physics = N
juggle  = 1
velset = 0,0
anim = 5000
ctrl = 0
sprpriority = 3
Facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = SelfAnimExist(5000+floor(time*.3))
trigger1 = 1
value = (5000+floor(time*.3));+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 200, End]
type = SelfState
trigger1 = p2stateno != [900,910]
value = 5050
ctrl = 0
;-------------------------------------------------------------------------------
; P2 - Grab 2
[Statedef 34676]
type    = A
movetype= H
physics = N
juggle  = 1
velset = -1.5,-9
anim = 5050
ctrl = 0
sprpriority = 3
Facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 5
ignorehitpause = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = (5030);+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 200, End]
type = SelfState
trigger1 = time = 1
value = 5050
ctrl = 0
;-------------------------------------------------------------------------------
; P2 - Grab 3
[Statedef 34677]
type    = A
movetype= H
physics = N
juggle  = 1
velset = -2,-5
anim = 5050
ctrl = 0
sprpriority = 3
Facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 5
ignorehitpause = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = (5030);+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 200, End]
type = SelfState
trigger1 = time = 1
value = 5050
ctrl = 0
;=======================================================
; Blood
[Statedef 2001]
type = S
physics = N
anim = 2001
ctrl = 0
velset = 0,2
sprpriority = 5

[State 0, Gravity]
type = Gravity
trigger1 = 1
ignorehitpause = 1

[State 0, codigo ese de drymugen]
type = AngleDraw
triggerall = vel x!= 0
trigger1 = 1
value = -atan(vel y/vel x)*13/PI

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 0
scale = .2,.2
ignorehitpause = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -1+(random%3)*.5
y = 3-(random%7)

[State 0]
type = ChangeState
trigger1 = Pos y >= 3
value = 2002
ctrl = 0
;----------------------------------------------------
; Blood 2
[Statedef 2002]
type = S
physics = S
anim = 2002
ctrl = 0
velset = 0,0
sprpriority = -999

[State 0, VarSet]
type = VarSet
Trigger1 = time = 0
Fv = 33
value = 1+random% 2

[State 0, PlaySnd]
type = PlaySnd
Triggerall = Fvar(33) = 1
trigger1 = time = 0
value = S1,15
volume = 100

[State 0, PlaySnd]
type = PlaySnd
Triggerall = Fvar(33) = 2
trigger1 = time = 0
value = S1,16
volume = 100

[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 1-random%3
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 0
scale = .3,.3
ignorehitpause = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0]
type = Destroyself
trigger1 = animtime = 0
;-------------------------------------------------------------------------------
; Fly Lines Base
[Statedef 6000]
type    = A
movetype= I
physics = N
anim = 9999;cond(random < 500,581,580)
sprpriority = 1
velset = cond(parent,vel x < 0,-parent,vel x*.3,parent,vel x*.3),parent,vel y*.5

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 1    
value = 3-random%4
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 580
ID = 580
pos = 2*root,const(size.xscale),-2*root,const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999
supermovetime = 9999
scale = const(size.xscale),const(size.yscale)
sprpriority = var(1)
ontop = 0
ownpal = 1
vel = cond(root,vel x < 0,-root,vel x*.3,root,vel x*.3),root,vel y*.5
removeongethit = 1
ignorehitpause = 1
remappal = 10,0+root,var(22)
angle = cond(root,vel y = 0,0,((atan((-1*root,Vel Y)/root,Vel X))*(360/(2*pi)))+const(size.shadowoffset))
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 580
ID = 580
pos = -2*root,const(size.xscale),2*root,const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999
supermovetime = 9999
scale = const(size.xscale),const(size.yscale)
sprpriority = var(1)-1
ontop = 0
ownpal = 1
vel = cond(root,vel x < 0,-root,vel x*.3,root,vel x*.3),root,vel y*.5
removeongethit = 1
ignorehitpause = 1
remappal = 0,33
angle = cond(root,vel y = 0,0,((atan((-1*root,Vel Y)/root,Vel X))*(360/(2*pi)))+const(size.shadowoffset))
trans = sub

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = root,movetype = H
trigger2 = root,stateno = 1200
trigger3 = root,stateno = [530,540]
id = 580
ignorehitpause = 1

[State 200, End]
type = Destroyself
trigger1 = numexplod(580)
;-------------------------------------------------------------------------------
; Fly Lines VERTICAL
[Statedef 6001]
type    = A
movetype= I
physics = N
anim = 9999;cond(random < 500,581,580)
sprpriority = 1
velset = cond(parent,vel x < 0,-parent,vel x*.1,parent,vel x*.1),parent,vel y*.1

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 1    
value = 3-random%4
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 580
ID = 580
pos = 2*root,const(size.xscale),-2*root,const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999
supermovetime = 9999
scale = const(size.xscale),const(size.yscale)
sprpriority = var(1)
ontop = 0
ownpal = 1
vel = cond(root,vel x < 0,-root,vel x*.1,root,vel x*.1),root,vel y*.2
removeongethit = 1
ignorehitpause = 1
remappal = 10,0+root,var(22)
angle = const(size.shadowoffset)-root,vel x*2
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 580
ID = 580
pos = -2*root,const(size.xscale),2*root,const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999
supermovetime = 9999
scale = const(size.xscale),const(size.yscale)
sprpriority = var(1)-1
ontop = 0
ownpal = 1
vel = cond(root,vel x < 0,-root,vel x*.1,root,vel x*.1),root,vel y*.2
removeongethit = 1
ignorehitpause = 1
remappal = 0,33
angle = const(size.shadowoffset)-root,vel x*2
trans = sub

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = root,movetype = H
trigger2 = root,stateno = 1200
trigger3 = root,stateno = [530,540]
id = 580
ignorehitpause = 1

[State 200, End]
type = Destroyself
trigger1 = numexplod(580)
;-------------------------------------------------------------------------------
; Fly Lines P2
[Statedef 6002]
type    = A
movetype= I
physics = N
anim = 9999;cond(random < 500,581,580)
sprpriority = 1
velset = cond(enemynear,vel x < 0,-enemynear,vel x*.1,enemynear,vel x*.1),enemynear,vel y*.2

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 1    
value = 3-random%4
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 580
ID = 580
pos = 2*root,const(size.xscale),-2*root,const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999
supermovetime = 9999
scale = const(size.xscale),const(size.yscale)
sprpriority = var(1)
ontop = 0
ownpal = 1
vel = cond(enemynear,vel x < 0,-enemynear,vel x*.1,enemynear,vel x*.1),enemynear,vel y*.2
removeongethit = 1
ignorehitpause = 1
remappal = 10,0+root,var(22)
angle = cond(vel y = 0,0,((atan((1*enemynear,Vel Y)/enemynear,Vel X))*(360/(2*pi)))+const(size.shadowoffset))
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 580
ID = 580
pos = -2*root,const(size.xscale),2*root,const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999
supermovetime = 9999
scale = const(size.xscale),const(size.yscale)
sprpriority = var(1)-1
ontop = 0
ownpal = 1
vel = cond(enemynear,vel x < 0,-enemynear,vel x*.1,enemynear,vel x*.1),enemynear,vel y*.2
removeongethit = 1
ignorehitpause = 1
remappal = 0,33
angle = cond(vel y = 0,0,((atan((1*enemynear,Vel Y)/enemynear,Vel X))*(360/(2*pi)))+const(size.shadowoffset))
trans = sub

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = root,movetype = H
trigger2 = root,stateno = 1200
trigger3 = root,stateno = [530,540]
id = 580
ignorehitpause = 1

[State 200, End]
type = Destroyself
trigger1 = numexplod(580)
;-------------------------------------------------------------------------------
; Fly Lines P2 Fijas
[Statedef 6003]
type    = A
movetype= I
physics = N
anim = 9999;cond(random < 500,581,580)
sprpriority = 1
velset = cond(enemynear,vel x < 0,-enemynear,vel x*.1,enemynear,vel x*.1),enemynear,vel y*.2

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 1    
value = 3-random%4
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 580
ID = 580
pos = 2*root,const(size.xscale),-2*root,const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999
supermovetime = 9999
scale = const(size.xscale),const(size.yscale)
sprpriority = var(1)
ontop = 0
ownpal = 1
vel = cond(enemynear,vel x < 0,-enemynear,vel x*.1,enemynear,vel x*.1),enemynear,vel y*.2
removeongethit = 1
ignorehitpause = 1
remappal = 10,0+root,var(22)
angle = const(size.shadowoffset)
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 580
ID = 580
pos = -2*root,const(size.xscale),2*root,const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999
supermovetime = 9999
scale = const(size.xscale),const(size.yscale)
sprpriority = var(1)-1
ontop = 0
ownpal = 1
vel = cond(enemynear,vel x < 0,-enemynear,vel x*.1,enemynear,vel x*.1),enemynear,vel y*.2
removeongethit = 1
ignorehitpause = 1
remappal = 0,33
angle = const(size.shadowoffset)
trans = sub

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = root,movetype = H
trigger2 = root,stateno = 1200
trigger3 = root,stateno = [530,540]
id = 580
ignorehitpause = 1

[State 200, End]
type = Destroyself
trigger1 = numexplod(580)
;-------------------------------------------------------------------------------
; Fly Lines Color 2
[Statedef 6004]
type    = A
movetype= I
physics = N
anim = 9999;cond(random < 500,581,580)
sprpriority = 1
velset = cond(parent,vel x < 0,-parent,vel x*.3,parent,vel x*.3),parent,vel y*.5

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 1    
value = 3-random%4
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 580
ID = 580
pos = 2*root,const(size.xscale),-2*root,const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999
supermovetime = 9999
scale = const(size.xscale),const(size.yscale)
sprpriority = var(1)
ontop = 0
ownpal = 1
vel = cond(root,vel x < 0,-root,vel x*.3,root,vel x*.3),root,vel y*.5
removeongethit = 1
ignorehitpause = 1
remappal = 0,34
angle = cond(parent,vel y = 0,0,((atan((-1*parent,Vel Y)/parent,Vel X))*(360/(2*pi))))
[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 580
ID = 580
pos = -2*root,const(size.xscale),2*root,const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
pausemovetime = 9999
supermovetime = 9999
scale = const(size.xscale),const(size.yscale)
sprpriority = var(1)-1
ontop = 0
ownpal = 1
vel = cond(root,vel x < 0,-root,vel x*.3,root,vel x*.3),root,vel y*.5
removeongethit = 1
ignorehitpause = 1
remappal = 0,33
angle = cond(parent,vel y = 0,0,((atan((-1*parent,Vel Y)/parent,Vel X))*(360/(2*pi))))
trans = sub

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = root,movetype = H
trigger2 = root,stateno = 1200
trigger3 = root,stateno = [530,540]
id = 580
ignorehitpause = 1

[State 200, End]
type = Destroyself
trigger1 = numexplod(580)
;-------------------------------------------------------------------------------
; Fly Lines TP
[Statedef 6010]
type    = A
movetype= I
physics = N
anim = 580
sprpriority = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = const(size.height)
scale = 1,1
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = 1
trans = sub
ignorehitpause = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = time = 0
value = 3-random%4
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Noshadow

[State 200, End]
type = Destroyself
trigger1 = animtime = 0
;trigger2 = parent,movetype = H
;trigger3 = parent,stateno = [530,540]

;===============================================================================
; Sparking Blast:
;-------------------------------------------------------------------------------
; Start
[Statedef 6800]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = cond(pos y=0,6800,6799)
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S5,14
volumescale = 100
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = S500,4
volumescale = 100

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time && !numexplod(1010)
value = S0,45
volumescale = 100
channel = 5

[State 0, Sparking]
type = Explod
trigger1 = time=14
anim = 9999
ID = 6800
pos = 0,0
postype = p1 
facing = 1
vfacing = 1
bindtime = 1
removetime = 1200
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
ownpal = 0
removeongethit = 0
[State 0, VarAdd]
type = VarAdd
trigger1 = time=14
v = 29    
value = -1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = 6813
ID = 6813
pos = 0,-35*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .6*const(size.xscale),.6*const(size.yscale)
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = 6810
ID = 6810
pos = 0,-35*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,40
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = 6810
ID = 6810
pos = 0,-35*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = 6811
ID = 6811
pos = 0,-35*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .1*const(size.xscale),.1*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,40
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = 6811
ID = 6811
pos = 0,-35*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .1*const(size.xscale),.1*const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = 6812
ID = 6812
pos = 0,-35*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .1*const(size.xscale),.1*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,40
ignorehitpause = 1
[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = 6812
ID = 6812
pos = 0,-35*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .1*const(size.xscale),.1*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,40
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 6 && pos y >-40
anim = 7014
ID = 7014
pos = -1,-pos y
postype = p1  ;p2,front,back,left,right
facing = cond(random <500,1,-1)
vfacing = 1
bindtime = 0
removetime = -2
pausemovetime = 0
scale = .6*const(size.xscale),.5*const(size.yscale)
sprpriority = 2
ontop = 0
ownpal = 1
removeongethit = 0
remappal = 0,40

[State 0, Viento]
type = Explod
trigger1 = time = 6 && pos y >-40
anim = 7022
ID = 1051
pos = -11*const(size.xscale),-pos y
postype = p1
facing = 1
vfacing = 1
bindtime = 0
removetime = -2
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,40

[State 0, Viento]
type = Explod
trigger1 = time = 6 && pos y >-40
anim = 7022
ID = 1051
pos = 11*const(size.xscale),-pos y
postype = p1
facing = -1
vfacing = 1
bindtime = 0
removetime = -2
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,40

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 8
time = 8
freq = 100
ampl = -10
phase = 140
ignorehitpause = 1

[State 0, HitDef]
type = HitDef
trigger1 = time = [10,13]
triggerall = !movecontact
triggerall = !numexplod(3000)
attr = S,SA        
hitflag = MAFD   
guardflag = MA       
animtype = up   
air.animtype = up
damage = 40,10
pausetime = 6,6
guard.pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = -1
guardsound = S4,0
ground.type = high
ground.slidetime = 16
ground.hittime = 24
air.hittime = 30
guard.dist = 50
ground.velocity = -1,-8
guard.velocity = -5*const(size.xscale)
air.velocity = -1*const(size.xscale),-7
airguard.velocity = -6*const(size.xscale),-4
down.velocity = -.5,-8
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -8
airguard.cornerpush.veloff = -8
kill = 0
guard.kill = 0
fall = 1
air.fall = 1
fall.recover = 0
down.bounce = 1
envshake.time = 11
yaccel = .3

[State 0, Helper]
type = Helper
trigger1 = movehit
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 801
pos = 0,-27*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .25*const(size.xscale)
size.yscale = .25*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = vel x*.8 
y = 0
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = !time && pos y <0
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = N         ;A,C,S,N
ignorehitpause = 1

[State 200, End]
type = ChangeState
trigger1 = animtime = 0
value = cond(pos y >-1,0,50)
ctrl = 1
;===============================================================================
; SPARKING:
;-------------------------------------------------------------------------------
[Statedef 6900]
type    = A
movetype= I
physics = N
anim = 9999
ctrl = 0

[State 0, PosSet]
type = PosSet
trigger1 = 1
x = 0
y = -10
ignorehitpause = 1

;---------------------------------- Var System

[State 0, Start]
type = VarSet
trigger1 = !time
v = 58    
value = (root,var(29));1
ignorehitpause = 1
persistent = 0

[State 0, Substrack]
type = VarAdd
triggerall = root,numexplod(6800)
trigger1 = root,stateno = 6800 && root,time = 15
v = 58    
value = -1
ignorehitpause = 1
persistent = 0

[State 0, AntiBug]
type = VarSet
trigger1 = var(58)<0
v = 58    
value = 0
ignorehitpause = 1
persistent = 0
;---------------------------------- Var System

;---------------------------------- Explods 
[State 0, Ball EM A]
type = Explod
triggerall = !root,numhelper(3070)
triggerall = var(58) = 0 && root,var(2) = 0
trigger1 = !numexplod(6911)
anim = 6911
ID = 6911
pos= 20,Floor((1.33*GameHeight/GameWidth)*Cond(teammode = turns,root,var(27),Cond((root,numexplod(69) = 1) ,root,var(27)+35,root,var(27))))
scale= .3,.3
postype = back
facing = 1
bindtime = -1
removetime = -1
vel = 0,0
accel = 0,0
pausemovetime = 9999
supermovetime = 9999
sprpriority = -9998
ontop = 1
ownpal = 1
removeongethit = 0
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(58) > 0 || root,var(2) = 1
id = 6911
ignorehitpause = 1

[State 0, Ball EMB]
type = Explod
triggerall = !root,numhelper(3070)
triggerall = var(58) = 0 && root,var(2) = 0
trigger1 = !numexplod(6915)
anim = 6915
ID = 6915
pos= 20,Floor((1.33*GameHeight/GameWidth)*Cond(teammode = turns,root,var(27),Cond((root,numexplod(69) = 1) ,root,var(27)+35,root,var(27))))
scale= .3,.3
postype = back
facing = 1
bindtime = -1
removetime = -1
vel = 0,0
accel = 0,0
pausemovetime = 9999
supermovetime = 9999
sprpriority = -9998
ontop = 1
ownpal = 1
removeongethit = 0
remappal = 0,40
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(58) > 0 || root,var(2) = 1
id = 6915
ignorehitpause = 1

[State 0, Ball FU A]
type = Explod
triggerall = !root,numhelper(3070)
triggerall = var(58) = 1 
trigger1 = !numexplod(6912)
anim = 6912
ID = 6912
pos= 20,Floor((1.33*GameHeight/GameWidth)*Cond(teammode = turns,root,var(27),Cond((root,numexplod(69) = 1) ,root,var(27)+35,root,var(27))))
scale= .3,.3
postype = back
facing = 1
bindtime = -1
removetime = -1
vel = 0,0
accel = 0,0
pausemovetime = 9999
supermovetime = 9999
sprpriority = -9998
ontop = 1
ownpal = 1
removeongethit = 0
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(58) < 1 
id = 6912
ignorehitpause = 1

[State 0, Ball FU C]
type = Explod
triggerall = !root,numhelper(3070)
triggerall = var(58) = 0 && root,var(2) > 0
trigger1 = !numexplod(6914)
anim = 6914
ID = 6914
pos= 20,Floor((1.33*GameHeight/GameWidth)*Cond(teammode = turns,root,var(27),Cond((root,numexplod(69) = 1) ,root,var(27)+35,root,var(27))))
scale= .3,.3
postype = back
facing = 1
bindtime = -1
removetime = -1
vel = 0,0
accel = 0,0
pausemovetime = 9999
supermovetime = 9999
sprpriority = -9998
ontop = 1
ownpal = 1
removeongethit = 0
remappal = 0,40
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(58) = 0 && root,var(2) = 0
id = 6914
ignorehitpause = 1

[State 0, Ball FU B]
type = Explod
triggerall = !root,numhelper(3070)
triggerall = var(58) = 0 && root,var(2) > 0
trigger1 = !numexplod(6913)
anim = 6913
ID = 6913
pos= 20,Floor((1.33*GameHeight/GameWidth)*Cond(teammode = turns,root,var(27),Cond((root,numexplod(69) = 1) ,root,var(27)+35,root,var(27))))
scale= .3,.3
postype = back
facing = 1
bindtime = -1
removetime = -1
vel = 0,0
accel = 0,0
pausemovetime = 9999
supermovetime = 9999
sprpriority = -9998
ontop = 1
ownpal = 1
removeongethit = 0
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = var(58) = 0 && root,var(2) = 0
id = 6913
ignorehitpause = 1
;---------------------------------- Explods

;----- self destruct
[State 0, RemoveExplod]
type = RemoveExplod
triggerall = (root,stateno != [120,155])
trigger1 = root,stateno = 181
trigger2 = root,stateno = 170
trigger3 = root,stateno = [3001,3099]
trigger4 = root,movetype = H && (root,stateno != [5000,5150]) && enemynear,hitdefattr=SCA,HA,HP,HT
trigger5 = !root,alive
id = 6911
ignorehitpause = 1
[State 0, RemoveExplod]
type = RemoveExplod
triggerall = (root,stateno != [120,155])
trigger1 = root,stateno = 181
trigger2 = root,stateno = 170
trigger3 = root,stateno = [3001,3099]
trigger4 = root,movetype = H && (root,stateno != [5000,5150]) && enemynear,hitdefattr=SCA,HA,HP,HT
trigger5 = !root,alive
id = 6912
ignorehitpause = 1
[State 0, RemoveExplod]
type = RemoveExplod
triggerall = (root,stateno != [120,155])
trigger1 = root,stateno = 181
trigger2 = root,stateno = 170
trigger3 = root,stateno = [3001,3099]
trigger4 = root,movetype = H && (root,stateno != [5000,5150]) && enemynear,hitdefattr=SCA,HA,HP,HT
trigger5 = !root,alive
id = 6913
ignorehitpause = 1
[State 0, RemoveExplod]
type = RemoveExplod
triggerall = (root,stateno != [120,155])
trigger1 = root,stateno = 181
trigger2 = root,stateno = 170
trigger3 = root,stateno = [3001,3099]
trigger4 = root,movetype = H && (root,stateno != [5000,5150]) && enemynear,hitdefattr=SCA,HA,HP,HT
trigger5 = !root,alive
id = 6914
ignorehitpause = 1
;----- self destruct

[State 200, End]
type = Destroyself
trigger1 = !root,alive
trigger2 = root,stateno = 181
trigger3 = root,stateno = 170
;-------------------------------------------------------------------------------
; Clash
[Statedef 8000]
type    = S
movetype= I
physics = S
juggle  = 0
Velset = -vel x*1.2,0
ctrl = 0
poweradd = 0
sprpriority = 2

;--------- SPARKS
[State 0, 200]
type = Helper
trigger1 = time = 0 && anim = 200
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = 22*const(size.xscale),-33*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .2*const(size.xscale)
size.yscale = .2*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, 203]
type = Helper
trigger1 = time = 0 && anim = 203
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = 18*const(size.xscale),-32*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .21*const(size.xscale)
size.yscale = .21*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, 204]
type = Helper
trigger1 = time = 0 && anim = 204
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = 25*const(size.xscale),-37*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .25*const(size.xscale)
size.yscale = .24*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = time = 0 && anim = 210
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = 34*const(size.xscale),-30*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .21*const(size.xscale)
size.yscale = .21*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, 211]
type = Helper
trigger1 = time = 0 && anim = 211
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = 25*const(size.xscale),-3.5*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .22*const(size.xscale)
size.yscale = .22*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, 220]
type = Helper
trigger1 = time = 0 && anim = 220
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = 32*const(size.xscale),-36*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .24*const(size.xscale)
size.yscale = .24*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, 300] ;;; CAMBIAR CON LOS SPRITES FINALES
type = Helper
trigger1 = time = 0 && anim = 300
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = 28*const(size.xscale),-5*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .18*const(size.xscale)+var(41)*.1
size.yscale = .18*const(size.yscale)+var(41)*.1
ignorehitpause = 1
persistent = 0
[State 0, 310] ;;; CAMBIAR CON LOS SPRITES FINALES
type = Helper
trigger1 = time = 0 && anim = 310
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = 35*const(size.xscale),-4*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .18*const(size.xscale)+var(41)*.11
size.yscale = .18*const(size.yscale)+var(41)*.11
ignorehitpause = 1
persistent = 0
;--------- SPARKS

[State 0, PosAdd]
type = PosAdd
triggerall = p2bodydist x != [0,40]
trigger1 = !time
x = -8
y = 0
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
triggerall = p2bodydist x = [0,40]
trigger1 = !time
x = -5-ceil(p2bodydist x*.5)
y = 0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S4,3+random%3
volumescale = 300

[State 183, Zoom1]
type = Zoom
trigger1 = time = [0,15]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom;pos x,pos y +camerazoom
scale = 1.3
lag = .40
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom2]
type = Zoom
trigger1 = time = [15,20]
pos = pos x,pos y +camerazoom
scale = 1
lag = .35
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, SuperPause]
type = SuperPause
trigger1 = !time
time = 20
anim = -1
sound = S10,0
pos = 0,0
movetime = 20
darken = 0
unhittable = 1
ignorehitpause = 1
[State 0, NotHitBy]
type = NotHitBy
trigger1 = !time
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 20
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time < 20
value = anim
elem = AnimElemNo(0) 
ignorehitpause = 1

[State 8000, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; Air Clash
[Statedef 8010]
type    = A
movetype= I
physics = N
juggle  = 0
ctrl = 0
poweradd = 0
sprpriority = 2

;--------- SPARKS
[State 0, 201]
type = Helper
trigger1 = time = 0 && anim = 201
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = 25*const(size.xscale),-13*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .23*const(size.xscale)
size.yscale = .23*const(size.yscale)
[State 0, 619]
type = Helper
trigger1 = time = 0 && anim = 619
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = 24*const(size.xscale),-2*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .22*const(size.xscale)
size.yscale = .23*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, 320]
type = Helper
trigger1 = time = 0 && anim = 320
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = 25,-33*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .22*const(size.xscale)
size.yscale = .24*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, 321]
type = Helper
trigger1 = time = 0 && anim = 321
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = 20,-45*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .33*const(size.xscale)
size.yscale = .35*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, 600]
type = Helper
trigger1 = time = 0 && anim = 600
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = 30*const(size.xscale),-33*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .18*const(size.xscale)
size.yscale = .18*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, 605]
type = Helper
trigger1 = time = 0 && anim = 605
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = 28*const(size.xscale),-32*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .195*const(size.xscale)
size.yscale = .195*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, 610]
type = Helper
trigger1 = time = 0 && anim = 610
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = 36*const(size.xscale),-17*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .2*const(size.xscale)
size.yscale = .2*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, 620]
type = Helper
trigger1 = time = 0 && anim = 620
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = 20*const(size.xscale),-2*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .22*const(size.xscale)
size.yscale = .23*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, 625]
type = Helper
trigger1 = time = 0 && anim = 625
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = 14*const(size.xscale),-52*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .21*const(size.xscale)
size.yscale = .22*const(size.yscale)
ignorehitpause = 1
persistent = 0
;--------- SPARKS

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = 0
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = time = 19
x = fvar(34)*1.1
y = fvar(33)*.8
ignorehitpause = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 19
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time
fv = 33    
value = ceil(vel y)
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = time = 20
fv = 33    
value = 0
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = !time
fv = 34    
value = ceil(vel x)
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = time = 20
fv = 34    
value = 0
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
triggerall = p2bodydist x != [0,40]
trigger1 = !time
x = -8
y = -2
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
triggerall = p2bodydist x = [0,40]
trigger1 = !time
x = -5-ceil(p2bodydist x*.3)
y = -2
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S4,3+random%3
volumescale = 300

[State 183, Zoom1]
type = Zoom
trigger1 = time = [0,15]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y+40) / (1/Camerazoom*1.5) * CameraZoom;pos x,pos y +camerazoom +(19*const(size.yscale))
scale = 1.3
lag = .40
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom2]
type = Zoom
trigger1 = time = [15,20]
pos = pos x,pos y +camerazoom
scale = 1
lag = .35
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, SuperPause]
type = SuperPause
trigger1 = !time
time = 20
anim = -1
sound = -1
pos = 0,0
movetime = 20
darken = 0
unhittable = 1
ignorehitpause = 1
[State 0, NotHitBy]
type = NotHitBy
trigger1 = !time
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 20
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time < 20
value = anim
elem = AnimElemNo(0) 
ignorehitpause = 1

[State 8010, End]
type = ChangeState
triggerall = anim = 1801
triggerall = animelemtime(9) < 0
trigger1 = time = 20
value = 1801
ctrl = 0
[State 8010, End]
type = ChangeState
triggerall = anim = 1801
triggerall = animelemtime(9) > 0
trigger1 = !animtime
value = 50
ctrl = 1

[State 0, Explod]
type = Explod
trigger1 = anim = 1801 && animelem = 4
anim = 1311
ID = 1801
pos = 23*const(size.xscale),-44*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0
angle = 55
supermovetime = 99
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = anim = 1801 && animelem = 4
anim = 1311
ID = 1801
pos = 23*const(size.xscale),-44*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0
angle = 55
supermovetime = 99
trans = sub

[State 0, 1801 1]
type = Helper
trigger1 = anim = 1801 && animelem = 4
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = 23*const(size.xscale),-44*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .21*const(size.xscale)
size.yscale = .22*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = anim = 1801 && animelem = 9
anim = 1311
ID = 1802
pos = 23*const(size.xscale),-14*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0
angle = -55
supermovetime = 99
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = anim = 1801 && animelem = 9
anim = 1311
ID = 1802
pos = 23*const(size.xscale),-14*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0
angle = -55
supermovetime = 99
trans = sub

[State 0, 1801 2]
type = Helper
trigger1 = anim = 1801 && animelem = 9
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = 23*const(size.xscale),-14*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .21*const(size.xscale)
size.yscale = .22*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 8000, End]
type = ChangeState
triggerall = anim != 1801
trigger1 = AnimTime = 0
value = cond(prevstateno = 320,321,50)
ctrl = cond(prevstateno = 320,0,1)
;-------------------------------------------------------------------------------
; Sword Clash
[Statedef 8020]
type    = S
movetype= I
physics = S
juggle  = 0
Velset = -vel x*1.2,0
ctrl = 0
anim = 406
poweradd = 0
sprpriority = 2

;--------- SPARKS
[State 0, 400]
type = Helper
trigger1 = time = 0 
helpertype = normal
name = "sparkpeta"
ID = 017
stateno = 800
pos = 8*const(size.xscale),-28*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
size.xscale = .2*const(size.xscale)
size.yscale = .2*const(size.yscale)
ignorehitpause = 1
persistent = 0
;--------- SPARKS

[State 0, PosAdd]
type = PosAdd
triggerall = p2bodydist x != [0,40]
trigger1 = !time
x = -8
y = 0
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
triggerall = p2bodydist x = [0,40]
trigger1 = !time
x = -5-ceil(p2bodydist x*.5)
y = 0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S3,2+random%2
volumescale = 90

[State 183, Zoom1]
type = Zoom
trigger1 = time = [0,15]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom;pos x,pos y +camerazoom
scale = 1.3
lag = .40
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom2]
type = Zoom
trigger1 = time = [15,20]
pos = pos x,pos y +camerazoom
scale = 1
lag = .35
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, SuperPause]
type = SuperPause
trigger1 = !time
time = 20
anim = -1
sound = S10,0
pos = 0,0
movetime = 20
darken = 0
unhittable = 1
ignorehitpause = 1
[State 0, NotHitBy]
type = NotHitBy
trigger1 = !time
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 20
ignorehitpause = 1

[State 8000, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
; Super Armor
;-------------------------------------------------------------------------------
[StateDef 9000]
Type = S
Ctrl = 0
VelSet = 0,0
SprPriority = 0
MoveType = I

[State 0, ChangeAnim]
Type = ChangeAnim
Trigger1 = 1
Value =  Parent, Anim
Elem = Parent, AnimElemNo(0) 
IgnoreHitPause = 1

[State 0, BindToParent]
Type = BindToParent
Trigger1 = 1
Time = -1
IgnoreHitPause = 1

[State 0, PlayerPush]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1

[State 0, Turn]
type = Turn
trigger1 = Facing != Parent, Facing
IgnoreHitPause = 1

[State 0, HitOverride]
Type = HitOverride
Trigger1 = 1
Attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
StateNO = StateNO
Time = -1
IgnoreHitPause = 1

[State 0, AssertSpecial]
Type = AssertSpecial
Trigger1 = 1
Flag = Invisible
IgnoreHitPause = 1

[State 0, Null]
Type = Null
Trigger1 = !Time && !Var(0)
Trigger1 = Var(0) := (Parent, StateNO)
IgnoreHitPause = 1

[State 0, DestroySelf]
Type = DestroySelf
Trigger1 = Time && (Parent, StateNO) != Var(0)
trigger2 = parent,anim = 4310 && animelem = 16
IgnoreHitPause = 1
;-------------------------------------------------------------------------------
; KO Portrait by Dano (made with amarimono assets)
[Statedef 9075]
type    = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
anim = 9999
sprpriority = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S950,6
[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S950,7

[State 0, MUG]
type = Explod
trigger1 = !time
anim = 9075
ID = 9075
pos=160,Floor((1.33*GameHeight/GameWidth)*120)
scale=.65,.65
postype = back
facing = cond(root,facing = 1,1,-1)
bindtime = -1
removetime = 100
pausemovetime = 9999
supermovetime = 9999
sprpriority = -150
ontop = 0
ownpal = 1
removeongethit = 0
[State 0, Speedlines]
type = Explod
trigger1 = !time
anim = 9076
ID = 9076
pos=160,Floor((1.33*GameHeight/GameWidth)*120)
scale=1,1
postype = back
facing = cond(root,facing = 1,1,-1)
bindtime = -1
removetime = -2
pausemovetime = 9999
supermovetime = 9999
sprpriority = -151
ontop = 0
ownpal = 1
removeongethit = 0
remappal = 10,0+root,var(22)

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 100
flag = nobardisplay
ignorehitpause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Noshadow

[State 200, End]
type = Destroyself
trigger1 = roundstate = 4
;-------------------------------------------------------------------------------
; Planet Destruction by Dano (made with 280gou assets)
[Statedef 9080]
type    = S
movetype= I
physics = S
velset = 0,0
ctrl = 0
anim = 9999
sprpriority = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S950,3
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S950,2
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 10
value = S950,2

[State 0, Explod]
type = Explod
trigger1 = time = 10
anim = 9080
ID = 9080
pos=160,Floor((1.33*GameHeight/GameWidth)*120)
scale=1,.9
postype = back
facing = cond(root,facing = 1,1,-1)
bindtime = -1
removetime = -2
pausemovetime = 9999
supermovetime = 9999
sprpriority = 99999
ontop = 1
ownpal = 1
removeongethit = 0

[State 0, Trans]
type = Explod
triggerall = teammode != simul
trigger1 = !time
anim = 9081
ID = 9081
pos= 160,Floor((1.33*GameHeight/GameWidth)*120)
scale=20,20
postype = back
facing = 1
bindtime = -1
removetime = -2
vel = 0,0
accel = 0,0
pausemovetime = 9999
supermovetime = 9999
sprpriority = 999999
ontop = 1
ownpal = 1
removeongethit = 0

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 260
flag = nobardisplay
ignorehitpause = 1
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = time < 260
flag = roundnotover
ignorehitpause = 1

[State 0, Pause]
type = Pause
trigger1 = !time
time = 230
movetime = 230

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = Noshadow

[State 200, End]
type = Destroyself
trigger1 = roundstate = 4
;-------------------------------------------------------------------------------
; Zoom
[Statedef 9900]
type    = A
movetype= I
physics = N
anim = 9999
ctrl = 0
sprpriority = 3
Facep2 = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0
ignorehitpause = 1

[State 183, Zoom1]
type = Zoom
trigger1 = time = [0,15]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y +cond(root,statetype = A,40,0)) / (1/Camerazoom*1.5) * CameraZoom;((pos x)/(1/camerazoom))* CameraZoom,((pos y)/(1/camerazoom))* CameraZoom
scale = 1/camerazoom*1.3
lag = .40
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom2]
type = Zoom
trigger1 = time = [15,25]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y +cond(root,statetype = A,40,0)) / (1/Camerazoom*1.5) * CameraZoom;pos x,pos y +camerazoom
scale = 1
lag = .82
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 70
trigger2 = root,movetype = H
trigger3 = root,stateno = 1200||stateno = 1500||stateno = 3000
ignorehitpause = 1
;-------------------------------------------------------------------------------
; Zoom 1 Sec
[Statedef 9901]
type    = A
movetype= I
physics = N
anim = 9999
ctrl = 0
sprpriority = 3
Facep2 = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0
ignorehitpause = 1

[State 183, Zoom1]
type = Zoom
triggerall = root,stateno != [900,901]
trigger1 = time = [0,60]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y +cond(root,statetype = A,40,0)) / (1/Camerazoom*1.5) * CameraZoom;((pos x)/(1/camerazoom))* CameraZoom,((pos y)/(1/camerazoom))* CameraZoom
scale = 1/camerazoom*1.6
lag = .3
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom1]
type = Zoom
triggerall = root,stateno = [900,901]
trigger1 = time = [0,60]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom;((pos x)/(1/camerazoom))* CameraZoom,((pos y)/(1/camerazoom))* CameraZoom
scale = 1/camerazoom*1.6
lag = .3
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom2]
type = Zoom
triggerall = root,stateno != [900,901]
trigger1 = time = [60,70]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y +cond(root,statetype = A,40,0)) / (1/Camerazoom*1.5) * CameraZoom;pos x,pos y +camerazoom
scale = 1
lag = .7
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom2]
type = Zoom
triggerall = root,stateno = [900,901]
trigger1 = time = [60,70]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom;pos x,pos y +camerazoom
scale = 1
lag = .7
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 70
trigger2 = root,movetype = H
trigger3 = root,stateno = 1200||stateno = 1500||stateno = 3000
ignorehitpause = 1
;-------------------------------------------------------------------------------
; Zoom 2 Sec
[Statedef 9902]
type    = A
movetype= I
physics = N
anim = 9999
ctrl = 0
sprpriority = 3
Facep2 = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0
ignorehitpause = 1

[State 183, Zoom1]
type = Zoom
triggerall = root,stateno != [900,901]
trigger1 = time = [0,120]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y +cond(root,statetype = A,40,0)) / (1/Camerazoom*1.5) * CameraZoom;((pos x)/(1/camerazoom))* CameraZoom,((pos y)/(1/camerazoom))* CameraZoom
scale = 1/camerazoom*1.6
lag = .3
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom1]
type = Zoom
triggerall = root,stateno = [900,901]
trigger1 = time = [0,120]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom;((pos x)/(1/camerazoom))* CameraZoom,((pos y)/(1/camerazoom))* CameraZoom
scale = 1/camerazoom*1.6
lag = .3
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom2]
type = Zoom
triggerall = root,stateno != [900,901]
trigger1 = time = [120,130]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y +cond(root,statetype = A,40,0)) / (1/Camerazoom*1.5) * CameraZoom;pos x,pos y +camerazoom
scale = 1
lag = .7
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom2]
type = Zoom
triggerall = root,stateno = [900,901]
trigger1 = time = [120,130]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom;pos x,pos y +camerazoom
scale = 1
lag = .7
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 130
trigger2 = root,movetype = H
trigger3 = root,stateno = 1200||stateno = 1500||stateno = 3000
ignorehitpause = 1
;-------------------------------------------------------------------------------
;Aura DANGER
[StateDef 9910]
Type = S
Ctrl = 0
VelSet = 0,0
SprPriority = -6
MoveType = I

[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = -1
add = 180,34,30
mul = 256,40,30
sinadd = 100,0,0,10
invertall = 0
color = 256
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,stateno!= 950 || root,stateno != 900 || root,stateno != 50 || root,stateno != 80
scale = 1.032*root,const(size.xscale),1.029*root,const(size.yscale)
value = root,var(50)*2
ignorehitpause = 1

[State 0, codigo ese de drymugen]
type = AngleDraw
triggerall = root,vel x!= 0
trigger1 =  root,stateno = 50 || root,stateno = 80
scale = 1.032*root,const(size.xscale),1.029*root,const(size.yscale)
value = -atan(root,vel y/root,vel x)*13/PI

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,stateno= 950 && root,time <11
scale = 1.032*root,const(size.xscale),1.029*root,const(size.yscale)
value = cond(vel x =0,0,-vel x*5);vel y*3
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,stateno= 950 && time >10
value = cond(root,vel y = 0,0,((atan((-1*root,Vel Y)/root,Vel X))*(360/(2*pi))));-vel y*3
scale = 1.032*root,const(size.xscale),1.029*root,const(size.yscale)
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,stateno= 900 && root,time >20
scale = 1.032*root,const(size.xscale),1.029*root,const(size.yscale)
value = -root,vel y*3;vel y*3
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = time
trans = addalpha
alpha = 108,256

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = -5
ignorehitpause = 1

[State 0, ChangeAnim]
Type = ChangeAnim
trigger1 = (root,anim =[1,199]) || (root,anim =1325) || (root,anim =5040) || (root,anim =[5400,5401])
Trigger1 = anim != Root, Anim 
Value =  Root, Anim
Elem = Root, AnimElemNo(0) 
IgnoreHitPause = 1
[State 0, ChangeAnim]
Type = ChangeAnim
trigger1 = (root,anim !=[1,199]) && (root,anim !=1325) && (root,anim !=5040) && (root,anim !=[5400,5401])
Trigger1 = 1
Value =  Root, Anim
Elem = Root, AnimElemNo(0) 
IgnoreHitPause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = AnimElemNo(0) != Root, AnimElemNo(0) 
trigger2 = Anim != Root, Anim
flag = invisible
ignorehitpause = 1

[State 0, BindToRoot]
Type = BindToRoot
Trigger1 = 1
Time = -1
IgnoreHitPause = 1

[State 0, PlayerPush]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = Facing != Root, Facing
IgnoreHitPause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = root,life <= 0
trigger2 = root,stateno = 181
trigger3 = root,stateno = 170
trigger4 = root,var(52) = 0
trigger5 = (root,movetype = H && root,stateno != [5000,5150])
trigger5 = (root,stateno != [120,155])
trigger6= root,stateno = [1500,1505]
ignorehitpause = 1
;-------------------------------------------------------------------------------
;Aura DANGER B
[StateDef 9915]
Type = S
Ctrl = 0
VelSet = 0,0
SprPriority = -5
MoveType = I

[State 0, PalFXWiz]
type = PalFX
trigger1 = 1
time = -1
add = 220,34,30
mul = 256,40,30
sinadd = 400,130,130,10
invertall = 0
color = 256
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,stateno!= 950 || root,stateno != 900 || root,stateno != 50 || root,stateno != 80
scale = 1.0217*root,const(size.xscale),1.0187*root,const(size.yscale)
value = root,var(50)*2
ignorehitpause = 1

[State 0, codigo ese de drymugen]
type = AngleDraw
triggerall = root,vel x!= 0
trigger1 =  root,stateno = 50 || root,stateno = 80
scale = 1.0217*root,const(size.xscale),1.0187*root,const(size.yscale)
value = -atan(root,vel y/root,vel x)*13/PI

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,stateno= 950 && root,time <11
scale = 1.0217*root,const(size.xscale),1.0187*root,const(size.yscale)
value = cond(vel x =0,0,-vel x*5);vel y*3
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,stateno= 950 && root,time >10
value = cond(root,vel y = 0,0,((atan((-1*root,Vel Y)/root,Vel X))*(360/(2*pi))));-vel y*3
scale = 1.0217*root,const(size.xscale),1.0187*root,const(size.yscale)
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,stateno= 900 && root,time >20
scale = 1.0217*root,const(size.xscale),1.0187*root,const(size.yscale)
value = -root,vel y*3;vel y*3
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = time
trans = addalpha
alpha = 160-(var(1))*16,256

[State 0, VarAdd]
type = VarAdd
trigger1 = time
v = 1
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = timemod = 25,0
v = 1    
value = 1
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = -5
ignorehitpause = 1

[State 0, ChangeAnim]
Type = ChangeAnim
trigger1 = (root,anim =[1,199]) || (root,anim =1325) || (root,anim =5040) || (root,anim =[5400,5401])
Trigger1 = anim != Root, Anim 
Value =  Root, Anim
Elem = Root, AnimElemNo(0) 
IgnoreHitPause = 1
[State 0, ChangeAnim]
Type = ChangeAnim
trigger1 = (root,anim !=[1,199]) && (root,anim !=1325) && (root,anim !=5040) && (root,anim !=[5400,5401])
Trigger1 = 1
Value =  Root, Anim
Elem = Root, AnimElemNo(0) 
IgnoreHitPause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = AnimElemNo(0) != Root, AnimElemNo(0) 
trigger2 = Anim != Root, Anim
flag = invisible
ignorehitpause = 1

[State 0, BindToRoot]
Type = BindToRoot
Trigger1 = 1
Time = -1
IgnoreHitPause = 1

[State 0, PlayerPush]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = Facing != Root, Facing
IgnoreHitPause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = root,life <= 0
trigger2 = root,stateno = 181
trigger3 = root,stateno = 170
trigger4 = root,var(52) = 0
trigger5 = (root,movetype = H && root,stateno != [5000,5150])
trigger5 = (root,stateno != [120,155])
trigger6= root,stateno = [1500,1505]
ignorehitpause = 1
;-------------------------------------------------------------------------------
;Aura UI
[StateDef 9920]
Type = A
Ctrl = 0
VelSet = 0,0
anim = 9999
SprPriority = -6

[State 0, Turn]
type = Turn
trigger1 = facing != root,facing
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1
[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0-(var(10)*6),0+(var(10)*45)
ignorehitpause = 1
[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = root,stateno = 1505 && root,animelem = 4
v = 10    ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = root,stateno != 1505 
v = 10    ;fv = 10
value = 0
ignorehitpause = 1

;AURA__________________________________________________
[State 0, Explod]
type = Explod
triggerall = (!root,movetype = H && root,stateno != [5000,5150])
triggerall = root,statetype != L
triggerall = root,stateno != [190,192]
triggerall = root,alive
triggerall = root,stateno != 950
;triggerall = time
triggerall = root,var(6) = 0
triggerall = numexplod(555) < 12
trigger1 = time %2;timemod = 2,0
anim = 555
ID = 555
pos = cond(root,statetype = A,-17+random%35,-10+random%21)*const(size.xscale),cond(root,statetype = C,-2-random%30,-3-random%50)*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
removetime = -2
scale = .2*const(size.xscale),.2*const(size.yscale)
sprpriority = -1+random%6
ownpal = 1
removeongethit = 1
ignorehitpause = 0
angle = root,vel x*10
remappal = 10,0+root,var(22)
pausemovetime = 9999999
supermovetime = 9999999

[State 0, Explod]
type = Explod
triggerall = (!root,movetype = H && root,stateno != [5000,5150])
triggerall = root,statetype != L
triggerall = root,stateno != [190,192]
triggerall = root,alive
triggerall = root,stateno != 950
;triggerall = time
triggerall = root,var(6) = 0
triggerall = numexplod(556) < 12
trigger1 = time %4;timemod = 4,0
anim = 556
ID = 556
pos = cond(root,statetype = A,-17+random%35,-10+random%21)*const(size.xscale),cond(root,statetype = C,-2-random%30,-3-random%50)*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
removetime = -2
scale = .04*const(size.xscale),.04*const(size.yscale)
sprpriority = -1+random%6
ownpal = 1
removeongethit = 1
ignorehitpause = 0
angle = cond(root,vel x = 0,-6+random%12,root,vel x*10)
remappal = 10,0+root,var(22)
pausemovetime = 9999999
supermovetime = 9999999

[State 0, Explod]
type = Explod
triggerall = (!root,movetype = H && root,stateno != [5000,5150])
triggerall = root,statetype != L
triggerall = root,stateno != 170
triggerall = root,stateno != [190,192]
triggerall = root,stateno != 950
triggerall = root,var(6) = 0
trigger1 = numexplod(554) = 0
anim = 554
ID = 554
pos = 0,-36*const(size.yscale)
postype = p1 
facing = root,facing
vfacing = 1
bindtime = -1
removetime = -1
scale = .5*const(size.xscale),cond(root,statetype = C,.3*const(size.yscale),.5*const(size.yscale))
sprpriority = 6
ontop = 0
ownpal = 1
removeongethit = 0
remappal = 10,0+root,var(22)
pausemovetime = 9999999
supermovetime = 9999999

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(554) = 1
ID = 554 
pos = 0,-36*const(size.yscale)
postype = p1 
bindtime = -1
facing = root,facing
scale = .5*const(size.xscale),cond(root,statetype = C,.3*const(size.yscale),.5*const(size.yscale))
angle = (cond(root,facing = 1,root,vel x*5,-root,vel x*5))+root,var(50)
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = root,statetype = L
trigger2 = (root,movetype = H && root,stateno != [5000,5150])
trigger3 = !root,alive
trigger4 = root,stateno = 950
trigger5 = root,var(6) = 1
trigger6 = root,stateno = 170
trigger7 = root,anim = 181
trigger8 = root,stateno = 1200 && root,time <31
id = 554
ignorehitpause = 1

[State 0, RemoveExplod]
type = RemoveExplod
triggerall = root,teammode != simul
trigger1 = root,stateno = 181 && root,animelem = 1
id = 555
ignorehitpause = 1
[State 0, RemoveExplod]
type = RemoveExplod
triggerall = root,teammode != simul
trigger1 = root,stateno = 181 && root,animelem = 1
id = 556
ignorehitpause = 1

;AURA__________________________________________________

[State 0, DestroySelf]
type = DestroySelf
trigger1 = root,life <= 0
trigger2 = root,stateno = 170
trigger3 = (root,movetype = H && root,stateno != [5000,5150])
trigger4 = root,var(6) = 1 
trigger5 = root,anim = 181
ignorehitpause = 1
;-------------------------------------------------------------------------------
;Aura Secret Sensation
[StateDef 9925]
Type = S
Ctrl = 0
VelSet = 0,0
SprPriority = 6
MoveType = I

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,stateno!= 950 || root,stateno != 900 || root,stateno != 50 || root,stateno != 80
scale = (1.0217+time*.001)*root,const(size.xscale),(1.0187+time*.001)*root,const(size.yscale)
value = root,var(50)*2

[State 0, codigo ese de drymugen]
type = AngleDraw
triggerall = root,vel x!= 0
trigger1 =  root,stateno = 50 || root,stateno = 80
scale = (1.0217+time*.001)*root,const(size.xscale),(1.0187+time*.001)*root,const(size.yscale)
value = -atan(root,vel y/root,vel x)*13/PI

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,stateno= 950 && root,time <11
scale = (1.0217+time*.001)*root,const(size.xscale),(1.0187+time*.001)*root,const(size.yscale)
value = cond(vel x =0,0,-vel x*5);vel y*3
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,stateno= 950 && root,time >10
scale = (1.0217+time*.001)*root,const(size.xscale),(1.0187+time*.001)*root,const(size.yscale)
value = cond(root,vel y = 0,0,((atan((-1*root,Vel Y)/root,Vel X))*(360/(2*pi))));-vel y*3
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,stateno= 900 && root,time >20
scale = (1.0217+time*.001)*root,const(size.xscale),(1.0187+time*.001)*root,const(size.yscale)
value = -root,vel y*3;vel y*3
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = time
trans = addalpha
alpha = 160-(var(1))*16,256

[State 0, VarAdd]
type = VarAdd
trigger1 = time
v = 1
value = 1
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, ChangeAnim]
Type = ChangeAnim
trigger1 = (root,anim =[1,199]) || (root,anim =1325) || (root,anim =5040) || (root,anim =[5400,5401])
Trigger1 = anim != Root, Anim 
Value =  Root, Anim
Elem = Root, AnimElemNo(0) 
IgnoreHitPause = 1
[State 0, ChangeAnim]
Type = ChangeAnim
trigger1 = (root,anim !=[1,199]) && (root,anim !=1325) && (root,anim !=5040) && (root,anim !=[5400,5401])
Trigger1 = 1
Value =  Root, Anim
Elem = Root, AnimElemNo(0) 
IgnoreHitPause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = AnimElemNo(0) != Root, AnimElemNo(0) 
trigger2 = Anim != Root, Anim
flag = invisible
ignorehitpause = 1

[State 0, BindToRoot]
Type = BindToRoot
Trigger1 = ishelper(9925)
Time = -1
IgnoreHitPause = 1

[State 0, PlayerPush]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = Facing != Root, Facing
IgnoreHitPause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = root,life <= 0
trigger2 = root,stateno = 181
trigger3 = root,stateno = 170
trigger4 = root,movetype = H && root,stateno != [5000,5150]
trigger5 = time = 25
trigger6 = ishelper(9930)&& root,stateno=1303
trigger7 = ishelper(9930)&& root,stateno=1320
ignorehitpause = 1

;-------------------------------------------------------------------------------
;Aura Titan A
[StateDef 9930]
Type = S
Ctrl = 0
anim = cond(parent,stateno = 3051,3051,1500)
VelSet = 0,0
SprPriority = cond(ishelper(9930),-7,7)
MoveType = I

[State 0, RemapPal]
type = RemapPal
trigger1 = 1
source = 1,0+root,var(22)
dest = 1,100
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1.02*root,const(size.xscale),1.02*root,const(size.yscale)
value = root,var(50)*2

[State 0, Trans]
type = Trans
trigger1 = time
trans = sub

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = -7
ignorehitpause = 1

[State 0, ChangeAnim]
Type = ChangeAnim
Trigger1 = anim != parent,anim;1
Value =  Parent, Anim
Elem = Parent, AnimElemNo(0) 
IgnoreHitPause = 1

[State 0, BindToParent]
Type = BindToParent
triggerall = !(parent,ishelper && parent,var(4)=1)
Trigger1 = 1
Time = -1
IgnoreHitPause = 1

[State 0, PlayerPush]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = Facing != Root, Facing
IgnoreHitPause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = !parent,ishelper
trigger1 = (parent,stateno!= [1500,1502])
trigger2 = root,movetype = H 
trigger3 = (parent,ishelper && parent,var(4)=1)
ignorehitpause = 1
;-------------------------------------------------------------------------------
;Aura Titan B
[StateDef 9935]
Type = S
Ctrl = 0
anim = cond(parent,stateno = 3051,3051,1500)
VelSet = 0,0
SprPriority = cond(ishelper(9935),-6,9)
MoveType = I

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1.02*root,const(size.xscale),1.02*root,const(size.yscale)
value = root,var(50)*2

[State 0, Trans]
type = Trans
trigger1 = time
trans = addalpha
alpha = 208,256

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = -6
ignorehitpause = 1

[State 0, ChangeAnim]
Type = ChangeAnim
Trigger1 = anim != parent,anim;1
Value =  Parent, Anim
Elem = Parent, AnimElemNo(0) 
IgnoreHitPause = 1

[State 0, BindToParent]
Type = BindToParent
triggerall = !(parent,ishelper && parent,var(4)=1)
Trigger1 = 1
Time = -1
IgnoreHitPause = 1

[State 0, PlayerPush]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = Facing != Root, Facing
IgnoreHitPause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = !parent,ishelper
trigger1 = (parent,stateno!= [1500,1502])
trigger2 = root,movetype = H 
trigger3 = (parent,ishelper && parent,var(4) = 1)
ignorehitpause = 1

;-------------------------------------------------------------------------------
;Outline
[StateDef 9940]
Type = A
Ctrl = 0
VelSet = 0,0
anim = 9999
SprPriority = -6

[State 0, RemapPal]
type = RemapPal
trigger1 =1
source = 1,1
dest = 10,0+root,var(22)
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,stateno!= 950 || root,stateno != 900 || root,stateno != 50 || root,stateno != 80
scale = 1.032*root,const(size.xscale),1.025*root,const(size.yscale)
value = root,var(50)*2

[State 0, codigo ese de drymugen]
type = AngleDraw
triggerall = root,vel x!= 0
trigger1 =  root,stateno = 50 || root,stateno = 80
scale = 1.032*root,const(size.xscale),1.025*root,const(size.yscale)
value = -atan(root,vel y/root,vel x)*13/PI

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,stateno= 950 && root,time <11
scale = 1.032*root,const(size.xscale),1.025*root,const(size.yscale)
value = cond(vel x =0,0,-vel x*5);vel y*3
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,stateno= 950 && root,time >10
scale = 1.032*root,const(size.xscale),1.025*root,const(size.yscale)
value = cond(root,vel y = 0,0,((atan((-1*root,Vel Y)/root,Vel X))*(360/(2*pi))));-vel y*3
ignorehitpause = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = root,stateno= 900 && root,time >20
scale = 1.032*root,const(size.xscale),1.025*root,const(size.yscale)
value = -root,vel y*3;vel y*3
ignorehitpause = 1

[State 0, Trans]
type = Trans
trigger1 = time
trans = addalpha
alpha = 248,220

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = -6
ignorehitpause = 1

[State 0, ChangeAnim]
Type = ChangeAnim
trigger1 = (root,anim =[1,199]) || (root,anim =1325) || (root,anim =5040) || (root,anim =[5400,5401])
Trigger1 = anim != Root, Anim 
Value =  Root, Anim
Elem = Root, AnimElemNo(0) 
IgnoreHitPause = 1
[State 0, ChangeAnim]
Type = ChangeAnim
trigger1 = (root,anim !=[1,199]) && (root,anim !=1325) && (root,anim !=5040) && (root,anim !=[5400,5401])
Trigger1 = 1
Value =  Root, Anim
Elem = Root, AnimElemNo(0) 
IgnoreHitPause = 1

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = AnimElemNo(0) != Root, AnimElemNo(0) 
trigger2 = Anim != Root, Anim
flag = invisible
ignorehitpause = 1

[State 0, BindToRoot]
Type = BindToRoot
Trigger1 = 1
Time = -1
IgnoreHitPause = 1

[State 0, PlayerPush]
Type = PlayerPush
Trigger1 = 1
Value = 0
IgnoreHitPause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = Facing != Root, Facing
IgnoreHitPause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = root,life <= 0
trigger2 = root,stateno = 170
trigger3 = (root,movetype = H && root,stateno != [5000,5150])
trigger3 = (root,stateno != [120,155])
trigger4 = (root,var(6) = 1 && root,stateno != 440)
trigger5 = root,anim = 181
trigger6 = root,var(52) = 1
trigger7 = root,stateno = [190,192]
trigger8 = (root,stateno = 1200 && root,time < 27)
ignorehitpause = 1