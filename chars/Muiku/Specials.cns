;===============================================================================
;----------------------Especiales-----------------------------------------------
;===============================================================================
;===============================================================================
; Godly Display:
;-------------------------------------------------------------------------------
; Start
[Statedef 1000]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1000
poweradd = -800
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time && !numexplod(1010)
value = S0,104
volumescale = 100
channel = 5

[State 0, Explod]
type = Explod
trigger1 = time = 14
anim = 1012
ID = 1012
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = 0,0
removetime = -2
pausemovetime = 0
scale = .3,.2
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = time = 14
anim = 1012
ID = 1012
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
vel = 0,0
removetime = -2
pausemovetime = 0
scale = .3,.2
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
trans = sub

[State 0, Explod]
type = Explod
trigger1 = time = [14,25]
anim = 1011
ID = 1011
pos = (2-random%19)*const(size.xscale),(-5-random%34)*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
removetime = -2
pausemovetime = 0
scale = .05*const(size.xscale),.05*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
persistent = 2
angle = random%180
remappal = 10,0+var(22)

[State 0, Helper]
type = Helper
trigger1 = time = [14,25]
helpertype = normal ;player
name = "soru"
ID = 6010
stateno = 6010
pos = (2-random%19)*const(size.xscale),(-5-random%34)*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .2*const(size.xscale)
size.yscale = .09*const(size.yscale)
size.height = 0 ;Angle
persistent = 1

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 6
v = 6   ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 7
v = 6   ;fv = 10
value = 0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S1,11
volumescale = 20
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S7,13
volumescale = 70
[State 0, VelSet]
type = VelSet
trigger1 = animelem = 5
x = 17
y = 0
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 5
statetype = S       
movetype = A       
physics = N        
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = animelem = 8
x = 3
y = 0
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 8
statetype = S       
movetype = A       
physics = S       
ignorehitpause = 1

;charge
[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 5201, 5]
type = PalFX
trigger1 = Time = 0
time = 4
add = 128,128,128 
[State 3000, PlaySnd - Super Charge]
type = PlaySnd
trigger1 = Time = 0
value = S1,2
volume = 100

[State 0, Aura]
type = Explod
trigger1 = time = 0
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,36
supermovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 5
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,37
supermovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 0||time = 5
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33
supermovetime = 30
;charge

[State 1000, Muerte brutal]
type = HitDef
triggerall = numexplod(1010) < 2
trigger1 = !movecontact
attr = S, SA
animtype  = Hard
damage    = 5
guardflag = MA
pausetime = 2,2
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S5,5
guardsound = S4,1
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0,0
air.velocity = 0,0
Fall = 1
fall.recover = 0
Envshake.time = 0
id = 91
hitonce = 1
kill = 0
priority = 10
p1stateno = 1001
p2stateno = 82753
p2facing = -1

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 0,-28*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .24*const(size.xscale)
size.yscale = .24*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 200, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; Succes
[Statedef 1001]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 1,0
ctrl = 0
anim = 1001
poweradd = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 25   
value = 1
ignorehitpause = 1

[State 0, Supers]
type = Explod
Triggerall = !numexplod(700)
trigger1 = animelemtime(3) > 0
anim = 9999
ID = 700
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 10
pausemovetime = 0
scale = 1,1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 0, Explod]
type = Explod
trigger1 = !animtime
anim = 9999
ID = 1010
pos = 0,0
postype = p1 
facing = 1
vfacing = 1
bindtime = 1
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
ownpal = 0
removeongethit = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 6   ;fv = 10
value = 0
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = !time && numtarget(91)
helpertype = normal ;player
name = "Godly Display"
ID = 1010
stateno = 1010
pos = target(91),pos x,target(91),pos y-33*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
supermovetime = 0
pausemovetime = 0

[State 0, PosSet]
type = PosSet
trigger1 = !time
x = cond(facing = 1,target(91),pos x +55,target(91),pos x -55)
y = 0
ignorehitpause = 1
[State 0, Helper]
type = Helper
trigger1 = time = [0,5]
helpertype = normal ;player
name = "soru"
ID = 6010
stateno = 6010
pos = (-9+random%19)*const(size.xscale),(-5-random%34)*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .09*const(size.xscale)
size.yscale = .09*const(size.yscale)
size.height = 0 ;Angle
persistent = 1

[State 0, Turn]
type = Turn
trigger1 = animtime = 0
ignorehitpause = 1

[State 183, Zoom1]
type = Zoom
triggerall = !numexplod(1010)
triggerall = teammode != simul && enemynear,teammode != simul
trigger1 = time = [0,60]
pos = ((pos x)-facing*80 / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom;((pos x)/(1/camerazoom))* CameraZoom,((pos y)/(1/camerazoom))* CameraZoom
scale = 1/camerazoom*1.6
lag = .3
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom2]
type = Zoom
triggerall = !numexplod(1010)
triggerall = teammode != simul && enemynear,teammode != simul
trigger1 = time = [60,70]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom;pos x,pos y +camerazoom
scale = 1
lag = .7
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, ChangeState]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; Hitbox
[Statedef 1010]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1010
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S7,24
volume = 70

[State 0, HitDef]
type = HitDef
triggerall = hitcount<20
trigger1 = timemod = 3,0
attr = S,SP        
hitflag = MAF        
guardflag = MA       
animtype = hard      
air.animtype = medium
damage = 6,2
pausetime = 1,5
guard.pausetime = 3,2
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,3+random%3
guardsound = S4,0
ground.type = high      
ground.slidetime = 20
ground.hittime = 30
air.hittime = 40
guard.dist = 205
ground.velocity = 4,-3
guard.velocity = 0
air.velocity = 4,-4.5
airguard.velocity = 0,-3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
forcestand = 1
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 45
down.bounce = 0
envshake.time = 2+hitcount
id = 1010

[State 0, TargetState]
type = TargetState
triggerall = !root,numexplod(1010)
triggerall = NumTarget(1010)
trigger1 =hitcount=19
value =82754
ID = 1010
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 026
stateno = 800
pos = (-7+random%14)*const(size.xscale),((18-random%36)-33)*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.3+time*.002)*const(size.xscale)
size.yscale = (.3+time*.002)*const(size.yscale)
ignorehitpause = 1
persistent = 3

;Active Damage Scaling
[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = 1
value = (cond(var(54) >= 70,.1,1-var(54)*.009))+var(2)*.2
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = parent,numtarget(91)
x = (Parent,Cond(1,(target(91),Pos X),0));enemynear,pos x;target(91),pos y-33*const(size.yscale)
y = (Parent,Cond(1,(target(91),Pos Y),0));;enemynear,pos y;target(91),pos x
ignorehitpause = 1

[State 0, Land]
type = Explod
triggerall = pos y >= 0
trigger1 = timemod = 14,0
anim = 7014
ID = 7014
pos = 0,1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = -6
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
remappal = 0,38

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 61
trigger2 = root,stateno != 1001
ignorehitpause = 1
;-------------------------------------------------------------------------------
; P2 - Stunned
[Statedef 82753]
type    = A
movetype= H
physics = N
juggle  = 1
velset = 0,0
anim = 5000
ctrl = 0
sprpriority = 3
;Facep2 = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = !time && backedgebodydist < 30
x = 38
y = 0
persistent = 0
ignorehitpause = 1
[State 0, PosSet]
type = PosSet
trigger1 = !time && pos y > 0
y = 0
persistent = 0
ignorehitpause = 1
[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5300;+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 200, End]
type = SelfState
trigger1 = p2stateno != 1001
value = 5050
ctrl = 0
;===============================================================================
; Rising Heat:
;-------------------------------------------------------------------------------
; Start
[Statedef 1100]
type    = S
movetype= A
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1100
poweradd = -1000
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,102
volumescale = 100
channel = 5

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,SA        
hitflag = MAF        
guardflag = MA       
animtype = medium     
air.animtype = medium
damage = 6,2
pausetime = 2,5
guard.pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,18
guardsound = S4,0
ground.type = high
ground.slidetime = 16
ground.hittime = 24
air.hittime = 30
guard.dist = 50
ground.velocity = (cond(p2dist x > 2,2,-1))*const(size.xscale),-4
guard.velocity = -5*const(size.xscale)
air.velocity = (cond(p2dist x > 2,2,-1))*const(size.xscale),-4
airguard.velocity = -6*const(size.xscale),-4
ground.cornerpush.veloff = -7
air.cornerpush.veloff = -9
guard.cornerpush.veloff = -7
airguard.cornerpush.veloff = -11
fall = 0
air.fall = 1
fall.recover = 1
yaccel = .4
fall.recovertime = 20
down.bounce = 0
envshake.time = 11

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 0,-35*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .19*const(size.xscale)
size.yscale = .19*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 023
stateno = 800
pos = 0*const(size.xscale),-35*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .19*const(size.xscale)
size.yscale = .19*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = time = 15
anim = 1107
ID = 1107
pos = -.2*const(size.xscale),-34.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
supermovetime = 99
scale = .3*const(size.xscale),.33*const(size.yscale)
sprpriority = 9
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 11,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = time = 15
anim = 1107
ID = 1107
pos = -.2*const(size.xscale),-34.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 50
supermovetime = 99
scale = .3*const(size.xscale),.33*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 1106
ID = 1106
pos = 2*const(size.xscale),-17.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
supermovetime = 99
scale = .15*const(size.xscale),.15*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 11,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = !time
anim = 1106
ID = 1106
pos = 2*const(size.xscale),-17.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
supermovetime = 99
scale = .15*const(size.xscale),.15*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !time
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 16
ignorehitpause = 1
persistent = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = numexplod(1101) && timemod = 2,0
fv = 33    
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = !time
fv = 33    
value = 0
ignorehitpause = 1

[State 0, Helper]
type = Helper
triggerall = numhelper(1110) < 19
triggerall = time = [14,63]
trigger1 = timemod = 5,0
helpertype = normal ;player
name = "HITBOX"
ID = 1110
stateno = 1110
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)

[State 0, Vanish]
type = Helper
Triggerall = numhelper(701) = 0
triggerall = numhelper(1110)
triggerall = time>=64
trigger1 = helper(1110),movecontact
helpertype = normal
name = "Helper de Conexiones"
ID = 701
stateno = 700
pos = 999999,999999
postype = p1

[State 0, Supers]
type = Explod
Triggerall = numexplod(700) = 0
triggerall = numhelper(1110)
triggerall = time>=64
trigger1 = helper(1110),movecontact
anim = 9999
ID = 700
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 10
pausemovetime = 0
scale = 1,1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 950, Y]
type = ChangeState
triggerall = numhelper(953) = 0
triggerall = numhelper(1110)
triggerall = time>=64
triggerall = helper(1110),movecontact
trigger1 = ailevel = 0 && command = "y" 
trigger2 = ailevel > 0 && random < (ailevel * 100)/4
value = 950
;Explods ----------------

[State 0, Aura]
type = Explod
trigger1 = time = 62
anim = 552
ID = 552
pos = 0,1*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = 0
removetime = -2
pausemovetime = 0
scale = .55*const(size.xscale),.55*const(size.yscale)
sprpriority = 9
ontop = 0
ownpal = 1
removeongethit = 0
remappal = 11,0+var(22)
[State 0, Aura]
type = Explod
trigger1 = time = 62
anim = 552
ID = 552
pos = 0,1*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = 0
removetime = -2
pausemovetime = 0
scale = .55*const(size.xscale),.55*const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
remappal = 0,33
trans = sub

[State 0, Explod]
type = Explod
trigger1 = time = 63
anim = 1105
ID = 1105
pos = -3*const(size.xscale),0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
removetime = -1
pausemovetime = 0
scale = .25*const(size.xscale),(.1+fvar(33)*.03)*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 11,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = time = 63
anim = 1105
ID = 1105
pos = -3*const(size.xscale),0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
removetime = -1
pausemovetime = 0
scale = .25*const(size.xscale),(.1+fvar(33)*.03)*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 11,0+var(22)

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 64
id = 1101
ignorehitpause = 1
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 64
id = 1102
ignorehitpause = 1
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 64
id = 1103
ignorehitpause = 1

[State 0, Land]
type = Explod
triggerall = time = [12,62]
trigger1 = timemod = 14,0
anim = 7016
ID = 7016
pos = 0,1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .22*const(size.xscale),.22*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
remappal = 11,0+var(22)

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 13
value = S7,22
volumescale = 100
channel = 4

[State 0, Explod]
type = Explod
trigger1 = time = 15
anim = 1101
ID = 1101
pos = -3*const(size.xscale),0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .25*const(size.xscale),.1*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 11,0+var(22)
alpha = 96,256
trans = addalpha
[State 0, Explod]
type = Explod
trigger1 = time = 15
anim = 1101
ID = 1102
pos = -3*const(size.xscale),0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .25*const(size.xscale),.1*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 11,0+var(22)
alpha = 160,256
trans = addalpha
[State 0, Explod]
type = Explod
trigger1 = time = 15
anim = 1101
ID = 1103
pos = -3*const(size.xscale),0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .25*const(size.xscale),.1*const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 11,0+var(22)

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(1101)
ID = 1101
scale = .25*const(size.xscale),(.1+fvar(33)*.03)*const(size.yscale)
ignorehitpause = 1
alpha = 96,256
trans = addalpha
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(1102)
ID = 1102
scale = .25*const(size.xscale),(.1+fvar(33)*.03)*const(size.yscale)
ignorehitpause = 1
alpha = 160,256
trans = addalpha
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = numexplod(1103)
ID = 1103
scale = .25*const(size.xscale),(.1+fvar(33)*.03)*const(size.yscale)
ignorehitpause = 1
alpha = 256,256
trans = addalpha

[State 0, Explod]
type = Explod
trigger1 = time = 12
anim = 196
ID = 1104
pos = 0,15*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.24*const(size.yscale)
sprpriority = 10
ontop = 0
ownpal = 1
remappal = 11,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = time = 12
anim = 196
ID = 1104
pos = 0,15*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.24*const(size.yscale)
sprpriority = -1
ontop = 0
ownpal = 1
remappal = 0,33
trans = sub
;Explods ----------------

[State 0, VarSet]
type = VarSet
trigger1 = time = 15
v = 6   ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = time = 999
v = 6   ;fv = 10
value = 0
ignorehitpause = 1

;charge
[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 5201, 5] 
type = PalFX
trigger1 = Time = 0
time = 4
add = 128,128,128 
[State 3000, PlaySnd - Super Charge]
type = PlaySnd
trigger1 = Time = 0
value = S1,2
volume = 100

[State 0, Aura]
type = Explod
trigger1 = time = 0
anim = 790
ID = 790
pos = 3*const(size.xscale),-17.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,36
supermovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 5
anim = 790
ID = 790
pos = 3*const(size.xscale),-17.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,37
supermovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 0||time = 5
anim = 790
ID = 790
pos = 3*const(size.xscale),-17.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33
supermovetime = 30
;charge

[State 200, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; Rising Heat Hitbox
[Statedef 1110]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 0,-parent,fvar(33)*1.5
ctrl = 0
anim = 1110
sprpriority = 2

;Active Damage Scaling
[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = 1
value = (cond(var(54) >= 70,.1,1-var(54)*.009))+var(2)*.2
ignorehitpause = 1

[State 0, HitDef]
type = HitDef
triggerall = parent,fvar(33) < 18
trigger1 = !movecontact
attr = S,SP       
hitflag = MAF        
guardflag = MA       
animtype = hard      
air.animtype = medium
damage = 9,1
pausetime = 1,2
guard.pausetime = 1,1
guard.hittime = 15
airguard.hittime = 20
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,18
guardsound = S4,0
ground.type = high      
ground.slidetime = 20
ground.hittime = 30
air.hittime = 40
guard.dist = 60
ground.velocity = .2,-5
guard.velocity = -9*const(size.xscale)
air.velocity = cond(cond(facing = 1,pos x > enemynear,pos x +1,pos x < enemynear,pos x -1),-1,1)*const(size.xscale),-4
airguard.velocity = -6*const(size.xscale),-3
ground.cornerpush.veloff = -2
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -5
airguard.cornerpush.veloff = -1
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 20
down.bounce = 0
numhits = 1
envshake.time = floor(3+parent,fvar(33)*.2)
[State 0, HitDef]
type = HitDef
triggerall = parent,fvar(33) > 17
trigger1 = !movecontact
attr = S,SP       
hitflag = MAF        
guardflag = MA       
animtype = hard      
air.animtype = hard
damage = 13,2
pausetime = 2,4
guard.pausetime = 3,2
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,18
guardsound = S4,0
ground.type = high      
ground.slidetime = 20
ground.hittime = 30
air.hittime = 40
guard.dist = 40
ground.velocity = -2,-5
guard.velocity = -11*const(size.xscale)
air.velocity = -2.6*const(size.xscale),-5
airguard.velocity = -9*const(size.xscale),-3
ground.cornerpush.veloff = -2
air.cornerpush.veloff = 0
guard.cornerpush.veloff = -6
airguard.cornerpush.veloff = -7
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 70
down.bounce = 0
numhits = 1
envshake.time = 17

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 0,-30*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.20+parent,fvar(33)*.004)*const(size.xscale)
size.yscale = (.23+parent,fvar(33)*.005)*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 023
stateno = 800
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.20+parent,fvar(33)*.004)*const(size.xscale)
size.yscale = (.23+parent,fvar(33)*.005)*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = movecontact = 1
trigger2 = pos y < ((-20*root,const(size.yscale)) -(parent,fvar(33)*15))
trigger3 = Parent,Cond(1,!numexplod(1101),0)
ignorehitpause = 0
;===============================================================================
; Accelerating Spirit!!:
;-------------------------------------------------------------------------------
[Statedef 1200]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = cond(pos y=0,1200,1199)
poweradd = -1500
sprpriority = 2
facep2 = 1

[State 0, VarSet]
type = VarSet
trigger1 = movecontact
v = 25   
value = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = prevstateno = 1001&&!numexplod(1010)
anim = 9999
ID = 1010
pos = 0,0
postype = p1 
facing = 1
vfacing = 1
bindtime = 1
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
ownpal = 0
removeongethit = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 27
value = S0,106
volumescale = 100
channel = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 55
value = S0,115
volumescale = 100
channel = 5

; Super Portrait
[State 0, Portrait]
type = Explod
trigger1 = !time
anim = 1270
ID = 1270
pos= 70,Floor((1.33*GameHeight/GameWidth)*120)
scale=.45,.45
postype = back
facing = 1
bindtime = -1
removetime = -2
vel = 4,0
accel = -.1,0
pausemovetime = 9999
supermovetime = 9999
sprpriority = -25
ontop = 0
ownpal = 1
removeongethit = 0
[State 0, Stripes]
type = Explod
trigger1 = !time
anim = 1271
ID = 1271
pos= 160,Floor((1.33*GameHeight/GameWidth))
scale=.45,.45
postype = back
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 9999
supermovetime = 9999
sprpriority = -26
ontop = 0
ownpal = 1
removeongethit = 0
remappal = 10,0+var(22)
[State 0, Stripes]
type = Explod
trigger1 = !time
anim = 1271
ID = 1271
pos= 160,Floor((1.33*GameHeight/GameWidth*230))
scale=.45,.45
postype = back
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 9999
supermovetime = 9999
sprpriority = -26
ontop = 0
ownpal = 1
removeongethit = 0
remappal = 10,0+var(22)
;Super Portrai

;charge
[State 0, Aura]
type = Explod
trigger1 = time = 0
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,39
supermovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 5
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,37
supermovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 0||time = 5
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33
supermovetime = 30
;charge

;charge2

[State 1500, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 58
movetime = 58
anim = -1
sound = -1
pos = 32,-80
darken = 0
unhittable = 1
[State 0, NotHitBy]
type = NotHitBy
trigger1 = !time
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 53
ignorehitpause = 1

[State 1500, VarAdd]
type = VarAdd
trigger1 = time < 19 && Var(12) > -80
v = 12
value = -4
[State 1500, VarSet]
type = Varset
trigger1 = time = 20
v = 12
value = -80
[State 1500, VarSet]
type = Varset
trigger1 = time = 50
v = 12
value = 0
[State 1500, VarAdd]
type = VarAdd
triggerall = Var(12) < 0
trigger1 = time = [40,49]
v = 12
value = 4
[State 1500, BGColorFX]
type = BGPalFX
trigger1 = time > 0
time = 1
add = Var(12),Var(12),Var(12)
ignorehitpause = 1

[State 5201, 5] 
type = PalFX
trigger1 = Time = 0
time = 4
add = 128,128,128 
[State 3000, PlaySnd - Super Charge]
type = PlaySnd
trigger1 = Time = 0
value = S1,2
volume = 100
[State 3000, PlaySnd - Super Charge]
type = PlaySnd
trigger1 = Time = 0
value = S950,1
volume = 200
[State 3000, PlaySnd - Super Charge]
type = PlaySnd
trigger1 = Time = 0
value = S950,0
volume = 100
[State 3000, Super Charge]
type = Explod
trigger1 = Time = 0
anim = 7405
ID = 7400
pos = 0,-38*const(size.xscale)
sprpriority = -6
supermove = 1
removetime = -2
postype = p1
bindtime = -1
ownpal = 1
scale = .2*const(size.xscale),.2*const(size.xscale)
removeongethit = 1
ontop = 0
supermovetime 	= 999
ignorehitpause  = 1
remappal = 0,33
trans = sub
[State 3000, Super Charge]
type = Explod
trigger1 = Time = 0
anim = 7405
ID = 7400
pos = 0,-38*const(size.xscale)
sprpriority = -5
supermove = 1
removetime = -2
postype = p1
bindtime = -1
ownpal = 1
scale = .2*const(size.xscale),.2*const(size.xscale)
removeongethit = 1
ontop = 0
supermovetime 	= 999
ignorehitpause  = 1
trans = addalpha 
alpha = 120,256
remappal = 10,0+var(22)
[State 3000, Super Charge]
type = Explod
trigger1 = Time = 0
anim = 7405
ID = 7400
pos = 0,-38*const(size.xscale)
sprpriority = 31
supermove = 1
removetime = -2
postype = p1
bindtime = -1
ownpal = 1
scale = .2*const(size.xscale),.2*const(size.xscale)
removeongethit = 1
ontop = 1
supermovetime 	= 999
ignorehitpause  = 1
trans = addalpha 
alpha = 176,256
remappal = 10,0+var(22)

[State 183, Zoom1]
type = Zoom
triggerall = p2bodydist x = [0,100]
trigger1 = time = [0,45]
pos = ((pos x)+facing*10 / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom
scale = 1.6+time*.0001/camerazoom
space = screen
lag = .4
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom1]
type = Zoom
triggerall = p2bodydist x != [0,100]
trigger1 = time = [0,45]
pos = ((pos x)+facing*20 / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom
scale = 1.6+time*.0001
space = screen
lag = .4
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom2]
type = Zoom
trigger1 = time = [45,55]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y +cond(statetype = A,40,0)) / (1/Camerazoom*1.5) * CameraZoom
scale = 1
lag = .6
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
;charge2

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 27
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = N        ;A,C,S,N
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 23
value = S1,11
volumescale = 70

[State 0, PosSet]
type = PosSet
triggerall = enemynear,backedgebodydist > 30
triggerall = p2stateno != [82736,82737]
trigger1 = time = 27
x = (enemynear,pos x + cond(facing=1,45,-45)) 
y = cond(enemynear,pos y > -50,-60,enemynear,pos y - 10)
ignorehitpause = 1
[State 0, PosSet]
type = PosSet
triggerall = p2stateno = [82736,82737]
trigger1 = time = 27
x = (enemynear,pos x + cond(facing=1,-45,45))
y = cond(enemynear,pos y > -50,-60,enemynear,pos y - 10)
ignorehitpause = 1
[State 0, PosSet]
type = PosSet
triggerall = enemynear,backedgebodydist < 30
trigger1 = time = 27
x = (enemynear,pos x + cond(facing=1,-45,45))
y = cond(enemynear,pos y > -50,-60,enemynear,pos y - 10)
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = frontedgedist < 50
x = -2
y = 0
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = time = [23,31]
helpertype = normal ;player
name = "soru"
ID = 6010
stateno = 6010
pos = (-9+random%19)*const(size.xscale),(-5-random%44)*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99
pausemovetime = 0
size.xscale = .09*const(size.xscale)
size.yscale = .09*const(size.yscale)
size.height = 90 ;Angle
persistent = 1

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 3
v = 6   ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 4
v = 6   ;fv = 10
value = 0
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = time = 28 && cond(facing = 1,pos x > enemynear,pos x +1,pos x < enemynear,pos x -1)
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 31
anim = 1201
ID = 1201
pos = -23*const(size.xscale),-43.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
supermovetime = 99
scale = .18*const(size.xscale),.18*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 11,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = time = 31
anim = 1201
ID = 1201
pos = -23*const(size.xscale),-43.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
supermovetime = 99
scale = .18*const(size.xscale),.18*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub

[State 0, Explod]
type = Explod
trigger1 = time = 59
anim = 1202
ID = 1202
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 11,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = time = 59
anim = 1202
ID = 1203
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 54
scale = const(size.xscale),const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub

[State 0, HitDef]
type = HitDef
triggerall = !numexplod(3000)
trigger1 = numexplod(1203)
persistent = 3
attr = S,HP        
hitflag = MAFD     
guardflag = MA       
animtype = hard      
air.animtype = medium
damage = 23,4
pausetime = 4,6
guard.pausetime = 3,2
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,cond(hitcount>6,19,18)
guardsound = S4,0
ground.type = high      
ground.slidetime = 20
ground.hittime = 30
air.hittime = 40
guard.dist = 150
ground.velocity = (-5)*const(size.xscale),0
guard.velocity = (-7)*const(size.xscale)
air.velocity = (-5)*const(size.xscale),8
airguard.velocity = (-7)*const(size.xscale),2
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
forcestand = 1
fall = 1
kill = cond(hitcount >6,1,0)
guard.kill = cond(hitcount >6,1,0)
yaccel = .45
air.fall = 1
fall.recover = 0
down.bounce = 1
envshake.time = 3+ceil(hitcount*.1)
id = 1200
p2facing = -facing
getpower = 0,0

[State 0, TargetBind]
type = TargetBind
triggerall = !moveguarded
triggerall = time < 117
triggerall = numexplod(1202)
triggerall = movehit=1
triggerall = numtarget(1200)
trigger1 = !target(1200),ishelper
time = 1
id = 1200
pos = 70,30
ignorehitpause = 1
persistent = 7

[State 0, Helper]
type = Helper
triggerall = hitcount > 6
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 024
stateno = 800
pos = 0,-25*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .6*const(size.xscale)
size.yscale = .6*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 0,-25*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.22)*const(size.xscale)
size.yscale = (.22)*const(size.yscale)
ignorehitpause = 1
persistent = 4
[State 0, Helper]
type = Helper
triggerall = hitcount < 7
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 023
stateno = 800
pos = 0,-25*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.23+(hitcount*.01))*const(size.xscale)
size.yscale = (.23+(hitcount*.01))*const(size.yscale)
ignorehitpause = 1
persistent = 4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 31
value = S7,35
volumescale = 100
channel = 4
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 58
value = S7,43
volumescale = 90
channel = 4

[State 0, Limitador]
type = Explod
trigger1 = time >90 && !numexplod(1203)
anim = 9999
ID = 1200
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 70
pausemovetime = 0
scale = 1,1
sprpriority = 0
persistent = 0
ownpal = 1
removeongethit = 1

[State 0, 1330 Fix]
type = TargetState
triggerall = NumTarget(1330)
triggerall = !target(1330),ishelper
triggerall = target(1330),stateno = [82761,82763]
trigger1 = !time
value = 82764
ID = 1330
ignorehitpause = 1
persistent = 0

[State 3000, SilverDragonFlash]
type = ChangeState
triggerall = movehit
triggerall = numtarget(1200)
triggerall = power >= 3000
triggerall = time >60 && !numexplod(1203)
trigger1 = ailevel = 0 && command = "SUPER1"|| command = "SUPER2"
trigger2 = ailevel > 0 && random < (ailevel * 100)/20
value = 3000
ctrl = 0

[State 200, End]
type = ChangeState
triggerall = movehit
triggerall = numtarget(1200)
triggerall = target(1200),alive
triggerall = !target(1200),ishelper
triggerall = power >=500
triggerall = time >60 && !numexplod(1203)
trigger1 = !ailevel && command = "hold_c"
trigger2 = ailevel > 0 && random < (ailevel * 100)
value = 1220
ctrl = 0
[State 200, End]
type = ChangeState
trigger1 = time >90 && !numexplod(1203)
value = 1210
ctrl = 0
;-------------------------------------------------------------------------------
[Statedef 1210]
type    = A
movetype= A
physics = A
velset = -2,-6
ctrl = 0
anim = 52
poweradd = 0
sprpriority = 2

[State 0, ChangeState]
type = ChangeState
trigger1 = !animtime
value =50
ctrl = 1
;-------------------------------------------------------------------------------
; hacia la pared
[Statedef 1220]
type    = A
movetype= A
physics = A
velset = -5*(backedgedist*.02),-6
ctrl = 0
anim = 52
poweradd = -500
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 25   
value = 1
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = NumTarget(1200)
trigger1 = !time
value = 82756
ID = 1200
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1
ignorehitpause = 1
[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = backedgedist < 20 && time >5
value =1221
ctrl = 0
[State 0, ChangeState]
type = ChangeState
trigger1 = target(1200),stateno != 82756
value = 50
ctrl = 0
;-------------------------------------------------------------------------------
;el mono en la paredm
[Statedef 1221]
type    = A
movetype= A
physics = N
velset = 0,0
ctrl = 0
anim = 1221
poweradd = 0
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,117
volumescale = 100
channel = 5

[State 183, Zoom1]
type = Zoom
triggerall = p2bodydist x = [0,100]
trigger1 = 1
pos = ((pos x)+facing*10 / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom
scale = 1.8+time*.0001/camerazoom
space = screen
lag = .7
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom1]
type = Zoom
triggerall = p2bodydist x != [0,100]
trigger1 = 1
pos = ((pos x)+facing*20 / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom
scale = 1.6+time*.0001
space = screen
lag = .7
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 1500, VarAdd]
type = VarAdd
trigger1 = time < 19 && Var(12) > -80
v = 12
value = -4
[State 1500, VarSet]
type = Varset
trigger1 = time = 20
v = 12
value = -80

[State 1500, BGColorFX]
type = BGPalFX
trigger1 = time > 0
time = 1
add = Var(12),Var(12),Var(12)
ignorehitpause = 1

[State 3000, PlaySnd - Super Charge]
type = PlaySnd
trigger1 = Time = 0
value = S1,2
volume = 100
[State 3000, Super Charge]
type = Explod
trigger1 = Time = 0
anim = 7405
ID = 7400
pos = 0,-23*const(size.xscale)
sprpriority = -6
supermove = 1
removetime = -2
postype = p1
bindtime = -1
ownpal = 1
scale = .2*const(size.xscale),.2*const(size.xscale)
removeongethit = 1
ontop = 0
supermovetime 	= 999
ignorehitpause  = 1
remappal = 0,33
trans = sub
[State 3000, Super Charge]
type = Explod
trigger1 = Time = 0
anim = 7405
ID = 7400
pos = 0,-23*const(size.xscale)
sprpriority = -5
supermove = 1
removetime = -2
postype = p1
bindtime = -1
ownpal = 1
scale = .2*const(size.xscale),.2*const(size.xscale)
removeongethit = 1
ontop = 0
supermovetime 	= 999
ignorehitpause  = 1
trans = addalpha 
alpha = 120,256
remappal = 10,0+var(22)
[State 3000, Super Charge]
type = Explod
trigger1 = Time = 0
anim = 7405
ID = 7400
pos = 0,-23*const(size.xscale)
sprpriority = 31
supermove = 1
removetime = -2
postype = p1
bindtime = -1
ownpal = 1
scale = .2*const(size.xscale),.2*const(size.xscale)
removeongethit = 1
ontop = 1
supermovetime 	= 999
ignorehitpause  = 1
trans = addalpha 
alpha = 176,256
remappal = 10,0+var(22)

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1
ignorehitpause = 1
[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, Land]
type = PlaySnd
trigger1 = time = 0
value = S52,1
volume = 50

[State 0, PosAdd]
type = PosAdd
trigger1 = 1
x = -backedgebodydist

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 20
value = S7,44
volumescale = 100
channel = 4

[State 0, ChangeState]
type = ChangeState
trigger1 = !animtime
value =1225
ctrl = 0
;-------------------------------------------------------------------------------
; Unpolished Instinct
[Statedef 1225]
type    = A
movetype= A
physics = N
velset = 5,3
ctrl = 0
anim = 1225
poweradd = 0
sprpriority = 2

[State 1500, BGColorFX]
type = BGPalFX
trigger1 = time > 0
time = 1
add = Var(12),Var(12),Var(12)
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S7,44
volumescale = 100

[State 0, PosSet]
type = PosSet
trigger1 = !time
x =target(1200),pos x+cond(facing=1,-120,120)
y = cond(target(1200),pos y > -50,-60,target(1200),pos y - 80)
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = animelem =5
x = target(1200),pos x+cond(facing=1,-54,54)
y = target(1200),pos y-23
ignorehitpause = 1
persistent = 0
[State 0, VelSet]
type = VelSet
trigger1 = animelem =5
x = 0
y = 0
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
triggerall = NumTarget(1200)
triggerall = !target(1200),ishelper
trigger1 = animelem = 5
value = S1,10
volumescale = 200

[State 0, HitAdd]
type = HitAdd
triggerall = NumTarget(1200)
triggerall = !target(1200),ishelper
trigger1 = animelem = 5
value = 1
ignorehitpause = 1
persistent = 0

[State 0, EnvShake]
type = EnvShake
triggerall = NumTarget(1200)
triggerall = !target(1200),ishelper
trigger1 = animelem = 5
time = 13
freq = 50
ampl = -3
phase = 50
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
triggerall = NumTarget(1200)
triggerall = !target(1200),ishelper
trigger1 = animelem = 5
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 37*const(size.xscale),-9*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .3*const(size.xscale)
size.yscale = .3*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 6999
ID = 6999
pos = 37*const(size.xscale),-9*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 5
angle = -42
removetime = -2
pausemovetime = 99
supermovetime = 99
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = NumTarget(1200)
triggerall = !target(1200),ishelper
trigger1 = animelem = 5
anim = 1311
ID = 1311
pos = 37*const(size.xscale),-9*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,const(size.yscale)
sprpriority = -1
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0
remappal = 10,0+var(22)
angle = -42
[State 0, Explod]
type = Explod
triggerall = NumTarget(1200)
triggerall = !target(1200),ishelper
trigger1 = animelem = 5
anim = 1311
ID = 1311
pos = 37*const(size.xscale),-9*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,const(size.yscale)
sprpriority = -2
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0
trans = sub
angle = -42

[State 0, Explod]
type = Explod
trigger1 = animelem = 5
anim = 1226
ID = 1226
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = animelem = 5
anim = 1226
ID = 1226
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
remappal = 0,33
trans = sub

[State 0, VelSet]
type = VelSet
trigger1 = time = 20
x = 12
y = 7
ignorehitpause = 1
persistent = 0

[State 183, Zoom1]
type = Zoom
trigger1 = 1
pos = ((pos x)+facing*25 / (1/Camerazoom*1.5)) * CameraZoom, (pos y +cond(statetype = A,40,0)) / (1/Camerazoom*1.5) * CameraZoom
scale = 2+time*.0001/camerazoom
space = screen
lag = .6
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,1
ignorehitpause = 1
[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y > -6
value =1230
ctrl = 0
;-------------------------------------------------------------------------------
;Golpe Fin
[Statedef 1230]
type    = S
movetype= A
physics = S
velset = 6,0
ctrl = 0
anim = 1230
poweradd = 0
sprpriority = 2

[State 0, TargetState]
type = TargetState
triggerall = NumTarget(1200)
triggerall = !target(1200),ishelper
trigger1 = time = 30
value = 82757
ID = 1200
ignorehitpause = 1

[State 0, HitAdd]
type = HitAdd
triggerall = NumTarget(1200)
triggerall = !target(1200),ishelper
trigger1 = time = 30
value = 1
ignorehitpause = 1
persistent = 0

[State 0, EnvShake]
type = EnvShake
triggerall = NumTarget(1200)
triggerall = !target(1200),ishelper
trigger1 = !time
time = 8
freq = 50
ampl = -3
phase = 50
ignorehitpause = 1
persistent = 0
[State 0, EnvShake]
type = EnvShake
triggerall = NumTarget(1200)
triggerall = !target(1200),ishelper
trigger1 = time = 30
time = 20
freq = 90
ampl = -6
phase = 110
ignorehitpause = 1
persistent = 0
[State 0, TargetLifeAdd]
type = TargetLifeAdd
triggerall = NumTarget(1200)
triggerall = !target(1200),ishelper
trigger1 = time = 30
value = (cond(var(54) >= 70,-35,floor(-80+var(54)*.015))+floor(var(2)*.1))
ID = 1200
kill = 1
absolute = 1
ignorehitpause = 1
persistent = 0
[State 0, PlaySnd]
type = PlaySnd
triggerall = NumTarget(1200)
triggerall = !target(1200),ishelper
trigger1 = time = 30
value = S1,19
volumescale = 200

[State 0, Explod]
type = Explod
triggerall = NumTarget(1200)
triggerall = !target(1200),ishelper
trigger1 = time = 28
anim = 1232
ID = 1232
pos = 5,-22
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
removetime = -2
supermovetime = 120
pausemovetime = 0
scale = .4*const(size.xscale),.5*const(size.yscale)
sprpriority = 10
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
angle = random%180
remappal = 0,40
[State 0, Explod]
type = Explod
triggerall = NumTarget(1200)
triggerall = !target(1200),ishelper
trigger1 = time = 28
anim = 1232
ID = 1232
pos = 5,-22
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
removetime = -2
supermovetime = 120
pausemovetime = 0
scale = .4*const(size.xscale),.5*const(size.yscale)
sprpriority = 9
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
angle = random%180
trans = sub

[State 0, Explod]
type = Explod
triggerall = NumTarget(1200)
triggerall = !target(1200),ishelper
trigger1 = time = 28
anim = 1231
ID = 1231
pos = 5,30
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
removetime = -2
supermovetime = 120
pausemovetime = 0
scale = .4*const(size.xscale),.5*const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
remappal = 11,0+var(22)
[State 0, Explod]
type = Explod
triggerall = NumTarget(1200)
triggerall = !target(1200),ishelper
trigger1 = time = 28
anim = 1231
ID = 1231
pos = 5,30
postype = p2  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
removetime = -2
supermovetime = 120
pausemovetime = 0
scale = .4*const(size.xscale),.5*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
trans = sub

[State 0, Land]
type = Explod
triggerall = NumTarget(1200)
triggerall = !target(1200),ishelper
trigger1 = time = 28
anim = 7016
ID = 7016
pos = 0,30
postype = p2
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .31*const(size.xscale),.31*const(size.yscale)
sprpriority = 12
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
supermovetime = 120
remappal = 0,40
[State 0, Land]
type = Explod
triggerall = NumTarget(1200)
triggerall = !target(1200),ishelper
trigger1 = time = 28
anim = 7016
ID = 7016
pos = 0,30
postype = p2
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .31*const(size.xscale),.31*const(size.yscale)
sprpriority = -11
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
supermovetime = 120
trans = sub

[State 183, Zoom1]
type = Zoom
trigger1 = time <45
pos = ((pos x)-facing*55 / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom
scale = 1.6+time*.0001
space = screen
lag = .4
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom2]
type = Zoom
trigger1 = time = [45,55]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y +cond(statetype = A,40,0)) / (1/Camerazoom*1.5) * CameraZoom
scale = 1
lag = .6
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 1500, VarSet]
type = Varset
trigger1 = time = 40
v = 12
value = 0
[State 1500, VarAdd]
type = VarAdd
triggerall = Var(12) < 0
trigger1 = time = [20,39]
v = 12
value = 4

[State 1500, BGColorFX]
type = BGPalFX
trigger1 = time > 0
time = 1
add = Var(12),Var(12),Var(12)
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, Turn]
type = Turn
trigger1 = animelem = 5
ignorehitpause = 1

[State 0, Limitador]
type = Explod
trigger1 = animelemtime(4) >0 && !numexplod(1200)
anim = 9999
ID = 1200
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 70
pausemovetime = 0
scale = 1,1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 3000, SilverDragonFlash]
type = ChangeState
triggerall = power >= 3000
triggerall = time > 32
trigger1 = ailevel = 0 && command = "SUPER1"|| command = "SUPER2"
trigger2 = ailevel > 0 && random < (ailevel * 100)/20
value = 3000
ctrl = 0
[State 1500, Titan]
type = ChangeState
triggerall = power >= 2000
triggerall = time > 32
trigger1 = ailevel = 0 && command = "SPECIAL 3"|| command = "SPECIAL 6"
trigger2 = ailevel > 0 && random < (ailevel * 100)/18&&time>44
value = 1500
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = !animtime
value =0
ctrl = 1
;-------------------------------------------------------------------------------
; P2 - Stunned 1200
[Statedef 82756]
type    = A
movetype= H
physics = N
juggle  = 1
velset = 0,0
anim = 5000
ctrl = 0
sprpriority = 3
Facep2 = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value =0
movecamera = 0,0
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = backedgedist < 40
x = 1
y = 0
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = pos y > -25
y = -1
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = p2stateno = 1221
y = -30
ignorehitpause = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5050;+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 200, End]
type = SelfState
trigger1 = time = 100
value = 5050
ctrl = 0
;-------------------------------------------------------------------------------
; P2 - Fin 1200
[Statedef 82757]
type    = A
movetype= H
physics = N
juggle  = 1
velset = 1,-7
anim = 5000
ctrl = 0
sprpriority = 3

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5050;+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 200, End]
type = SelfState
trigger1 = time = 1
value = 5050
ctrl = 0
;===============================================================================
; Ununcumbered Mind:
;-------------------------------------------------------------------------------
[Statedef 1300]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = cond(pos y=0,1300,1299)
poweradd = -800
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !time
value = SCA,NP,SP
time = 5
ignorehitpause = 1
[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,HP,NT,ST,HT
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 48   
value = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
triggerall = !ailevel
triggerall = command!= "hold_b"
triggerall = command!= "hold_c"
trigger1 = !time && command="hold_a"
trigger2 =( var(56)!=[1,3]) && (command="hold_a")
v = 56   
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
triggerall = !ailevel
triggerall = command!= "hold_a"
triggerall = command!= "hold_c"
trigger1 = !time && command="hold_b"
trigger2 =( var(56)!=[1,3]) && (command="hold_b")
v = 56   
value = 2
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
triggerall = !ailevel
triggerall = command!= "hold_a"
triggerall = command!= "hold_b"
trigger1 = !time && command="hold_c"
trigger2 =( var(56)!=[1,3]) && (command="hold_c")
v = 56  
value = 3
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
triggerall = ailevel
trigger1 = !time 
v = 56   
value = cond(random <500,1,cond(random<500,3,2))
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(56)>1 && power<200
trigger2 = var(56)<1 
v = 56    
value = 1
ignorehitpause = 1
persistent = 0
[State 0, VarSet]
type = VarSet
trigger1 = var(56)>2 && power<400
v = 56    
value = 2
ignorehitpause = 1
persistent = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim!= 1304 && var(56) = 3
value = 1304
elem = 1
ignorehitpause = 1

;charge
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = !time && pos y < 0
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = N         ;A,C,S,N
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = !time && pos y = 0
y = 0
ignorehitpause = 1

[State 5201, 5] 
type = PalFX
triggerall = var(56)<3
trigger1 = Time = 0
time = 4
add = 128,128,128 
[State 3000, PlaySnd - Super Charge]
type = PlaySnd
trigger1 = Time = 0
value = S1,2
volume = 100

[State 0, Aura]
type = Explod
trigger1 = time = 0
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,cond(var(56)=3,39,36)
supermovetime = 30
pausemovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 3
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,37
supermovetime = 30
pausemovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 0||time = 3
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33
supermovetime = 30
pausemovetime = 30
;charge

[State 1310, GD]
type = ChangeState
triggerall = animtime = 0
trigger1 = prevstateno = 620 && ailevel>0 && (ailevel * 100)/2
value = 1310
[State 1310, T]
type = ChangeState
triggerall = power >= 200
triggerall = animtime = 0
trigger1 = prevstateno = 619 && ailevel>0 && (ailevel * 100)/2
trigger3 = p2statetype != A
value = 1320
[State 1330, EL]
type = ChangeState
triggerall = power >= 400
triggerall = animtime = 0
triggerall = !numexplod(1331)
trigger1 = prevstateno = 625 && ailevel>0 && (ailevel * 100)/2
value = 1306

[State 200, End]
type = ChangeState
triggerall = prevstateno != [200,321]
triggerall = prevstateno != 610
triggerall = prevstateno != [625,650]
trigger1 = animtime = 0
value = 1301;cond((prevstateno = 625),1304,1301)
ctrl = 0
[State 200, End]
type = ChangeState
triggerall = (prevstateno = [200,321]) || (prevstateno = [610,650])
trigger1 = animtime = 0
value = 1304;cond((prevstateno = 625),1304,1301)
ctrl = 0
;-------------------------------------------------------------------------------
;Fwd
[Statedef 1301]
type    = A
movetype= I
physics = N
velset = 4,cond(pos y =0,-5-(var(56)*.5),2)
ctrl = 0
anim = 1301
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, Helper]
type = Helper
triggerall = power < 5000
trigger1 = timemod = 6,0
helpertype = normal ;player
name = "aura d"
ID = 9930
stateno = 9925
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
sprpriority = 4
supermovetime = 99999999
pausemovetime = 99999999
size.xscale = 1;*const(size.xscale)
size.yscale = 1;*const(size.yscale)

[State 0, Explod]
type = Explod
trigger1 = !time&& pos y = 0
anim = 7031
ID = 7030
pos = 0,0;-pos y
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
removetime = -2
pausemovetime = 0
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = 2
ontop = 0
ownpal = 1
removeongethit = 0
remappal = 0,38

[State 0, VelAdd]
type = VelAdd
trigger1 = vel y > 0
x = 0
y = .1+(var(56)*.02)
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S7,15
volumescale = 80

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1||!time
value = SCA,NP,SP
time = 5
ignorehitpause = 1
[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,HP,NT,ST,HT
ignorehitpause = 1

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 1310, GD]
type = ChangeState
triggerall = time >2
trigger1 = (var(56)=1) && (ailevel = 0) && (command != "hold_a")
trigger2 = (var(56)!=1) && (ailevel = 0) && (command = "a")
trigger3 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/5
value = 1310
[State 1310, T]
type = ChangeState
triggerall = power >= 200
triggerall = time >2
trigger1 = (var(56)=2) && (ailevel = 0) && (command != "hold_b")
trigger2 = (var(56)!=2) && (ailevel = 0) && (command = "b")
trigger3 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/6
trigger3 = p2statetype != A
value = 1320
[State 1330, EL]
type = ChangeState
triggerall = power >= 400
triggerall = time ;>2
triggerall = !numexplod(1331)
trigger1 = (var(56)=3) && (ailevel = 0) && (command != "hold_c")
trigger2 = (var(56)!=3) && (ailevel = 0) && (command = "c")
trigger3 = roundstate = 2 && ailevel > 0 && p2bodydist x < 80 && random < (ailevel * 100)/7
trigger4 = roundstate = 2 && ailevel > 0 && p2bodydist x > 60 && random < (ailevel * 100)/4
trigger4 = p2movetype = A && (p2stateno = [1000,2000])
value = 1330

[State 1660, K]
type = ChangeState
triggerall = time >2
trigger1 = (ailevel = 0) && (command = "z")
trigger2 = roundstate = 2 && ailevel > 0 && (p2bodydist x = [50,80]) && random < (ailevel * 100)/7
value = 1659;cond(pos y > -80,1659,1660)

[State 0, ChangeState]
type = ChangeState
trigger1 = vel y >0 && pos y >-3
value = 1303
ctrl = 0
;-------------------------------------------------------------------------------
;Back
[Statedef 1302]
type    = A
movetype= I
physics = N
velset = -4,-5-(var(56)*.5)
ctrl = 0
anim = 1302
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, Helper]
type = Helper
triggerall = power < 5000
trigger1 = timemod = 6,0
helpertype = normal ;player
name = "aura d"
ID = 9930
stateno = 9925
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
sprpriority = 4
supermovetime = 99999999
pausemovetime = 99999999
size.xscale = 1;*const(size.xscale)
size.yscale = 1;*const(size.yscale)

[State 0, Explod]
type = Explod
trigger1 = !time&& pos y = 0
anim = 7031
ID = 7030
pos = 0,0;-pos y
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 0
removetime = -2
pausemovetime = 0
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = 2
ontop = 0
ownpal = 1
removeongethit = 0
remappal = 0,38

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
x = 0
y = .1+(var(56)*.02)
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S7,15
volumescale = 80

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1||!time
value = SCA,NP,SP
time = 5
ignorehitpause = 1
[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,HP,NT,ST,HT
ignorehitpause = 1

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 1310, GD]
type = ChangeState
triggerall = time >2
trigger1 = (var(56)=1) && (ailevel = 0) && (command != "hold_a")
trigger2 = (var(56)!=1) && (ailevel = 0) && (command = "a")
trigger3 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/5
value = 1310
[State 1310, T]
type = ChangeState
triggerall = power >= 200
triggerall = time >2
trigger1 = (var(56)=2) && (ailevel = 0) && (command != "hold_b")
trigger2 = (var(56)!=2) && (ailevel = 0) && (command = "b")
trigger3 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/6
trigger3 = p2statetype != A
value = 1320
[State 1330, EL]
type = ChangeState
triggerall = power >= 400
triggerall = time ;>2
trigger1 = (var(56)=3) && (ailevel = 0) && (command != "hold_c")
trigger2 = (var(56)!=3) && (ailevel = 0) && (command = "c")
trigger3 = roundstate = 2 && ailevel > 0 && p2bodydist x < 80 && random < (ailevel * 100)/7
trigger3 = !numexplod(1331)
trigger4 = roundstate = 2 && ailevel > 0 && p2bodydist x > 60 && random < (ailevel * 100)/4
trigger4 = p2movetype = A && (p2stateno = [1000,2000])
trigger4 = !numexplod(1331)
value = 1330

[State 1660, K]
type = ChangeState
triggerall = time >2
trigger1 = (ailevel = 0) && (command = "z")
trigger2 = roundstate = 2 && ailevel > 0 && (p2bodydist x = [50,80]) && random < (ailevel * 100)/7
value = 1659;cond(pos y > -80,1659,1660)

[State 0, ChangeState]
type = ChangeState
trigger1 = vel y >0 && pos y >-3
value = 1303
ctrl = 0
;-------------------------------------------------------------------------------
;Ground
[Statedef 1303]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 1303
facep2 = 1
sprpriority = 2

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1||!time
value = SCA,NP,SP
time = 5
ignorehitpause = 1
[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,HP,NT,ST,HT
ignorehitpause = 1

[State 0, Land]
type = PlaySnd
trigger1 = !time
value = S52,1
volume = 50

[State 0, Land]
type = Explod
trigger1 = time = 0
anim = 7014
ID = 7014
pos = -1,1
postype = p1
facing = 1
vfacing = 1
bindtime = 0
removetime = -2
scale = .23*const(size.xscale),.23*const(size.yscale)
sprpriority = -10
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
remappal = 0,38

[State 0, VarAdd]
type = VarAdd
trigger1 = !time
v =  48
value = 1
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 1310, GD]
type = ChangeState
triggerall = time >0
trigger1 = (var(56)=1) && (ailevel = 0) && (command != "hold_a")
trigger2 = (var(56)!=1) && (ailevel = 0) && (command = "a")
trigger3 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/5
value = 1310
[State 1310, T]
type = ChangeState
triggerall = power >= 200
triggerall = time >0
trigger1 = (var(56)=2) && (ailevel = 0) && (command != "hold_b")
trigger2 = (var(56)!=2) && (ailevel = 0) && (command = "b")
trigger3 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/6
trigger3 = p2statetype != A
value = 1320
[State 1330, EL]
type = ChangeState
triggerall = power >= 400
triggerall = time ;>0
trigger1 = (var(56)=3) && (ailevel = 0) && (command != "hold_c")
trigger2 = (var(56)!=3) && (ailevel = 0) && (command = "c")
trigger3 = roundstate = 2 && ailevel > 0 && p2bodydist x < 80 && random < (ailevel * 100)/7
trigger3 = !numexplod(1331)
trigger4 = roundstate = 2 && ailevel > 0 && p2bodydist x > 60 && random < (ailevel * 100)/4
trigger4 = p2movetype = A && (p2stateno = [1000,2000])
trigger4 = !numexplod(1331)
value = 1330

[State 1660, K]
type = ChangeState
triggerall = time >2
trigger1 = (ailevel = 0) && (command = "z")
trigger2 = roundstate = 2 && ailevel > 0 && (p2bodydist x = [50,80]) && random < (ailevel * 100)/7
value = 1659;cond(pos y > -80,1659,1660)

[State 200, End]
type = ChangeState
triggerall = !ailevel
trigger1 = animtime = 0
value = cond(var(48)=5,12,cond(var(48)=3,1305,cond(command = "holdback",1302,1301)))
ctrl = cond(var(48)>=3,1,0)
[State 200, End]
type = ChangeState
triggerall = ailevel
trigger1 = animtime = 0
value = cond(var(48)=5,12,cond(var(48)=3,1305,cond((enemynear,stateno=[3000,4999]),1302,1301)))
ctrl = cond(var(48)>=3,1,0)
;-------------------------------------------------------------------------------
; 625
[Statedef 1304]
type    = A
movetype= I
physics = N
velset = 4,-7
ctrl = 0
anim = 1301
sprpriority = 2

[State 0, VelAdd]
type = VelAdd
trigger1 = vel y > 0
x = 0
y = .05+(var(56)*.02)
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
x = 0
y = .05
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S7,15
volumescale = 80

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1||!time
value = SCA,NP,SP
time = 5
ignorehitpause = 1
[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,HP,NT,ST,HT
ignorehitpause = 1

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 1310, GD]
type = ChangeState
triggerall = time >2
trigger1 = (var(56)=1) && (ailevel = 0) && (command != "hold_a")
trigger2 = (var(56)!=1) && (ailevel = 0) && (command = "a")
trigger3 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/5
value = 1310
[State 1310, T]
type = ChangeState
triggerall = power >= 200
triggerall = time >2
trigger1 = (var(56)=2) && (ailevel = 0) && (command != "hold_b")
trigger2 = (var(56)!=2) && (ailevel = 0) && (command = "b")
trigger3 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/6
trigger3 = p2statetype != A
value = 1320
[State 1330, EL]
type = ChangeState
triggerall = power >= 400
triggerall = time ;>2
trigger1 = (var(56)=3) && (ailevel = 0) && (command != "hold_c")
trigger2 = (var(56)!=3) && (ailevel = 0) && (command = "c")
trigger3 = roundstate = 2 && ailevel > 0 && p2bodydist x < 80 && random < (ailevel * 100)/7
trigger3 = !numexplod(1331)
trigger4 = roundstate = 2 && ailevel > 0 && p2bodydist x > 60 && random < (ailevel * 100)/4
trigger4 = p2movetype = A && (p2stateno = [1000,2000])
trigger4 = !numexplod(1331)
value = 1330

[State 1660, K]
type = ChangeState
triggerall = time >2
trigger1 = (ailevel = 0) && (command = "z")
trigger2 = roundstate = 2 && ailevel > 0 && (p2bodydist x = [50,80]) && random < (ailevel * 100)/7
value = 1659;cond(pos y > -80,1659,1660)

[State 0, ChangeState]
type = ChangeState
trigger1 = vel y >0 && pos y >-3
value = 1303
ctrl = 0
;-------------------------------------------------------------------------------
;Dash
[Statedef 1305]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 1305
facep2 = 1
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 48   ;fv = 10
value = 5
ignorehitpause = 1

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 3
time = 6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S7,31
volumescale = 100

[State 0, AfterImage]
type = AfterImage
trigger1 = time = 3
time = 5
length = 10
palbright = 0,0,0
palcontrast = 120,100,256
paladd = 0,0,0
palmul = .40, .30, .80
timegap = 1
framegap = 1
trans = add
ignorehitpause = 1
persistent = 1

[State 5201, 5] ;Blink white
type = PalFX
trigger1 = Time = 3
time = 3
add = 128,128,128 ;256,256,256

[State 0, Land]
type = Explod
trigger1 = time = 3
anim = 110
ID = 110
pos = 0,-28*const(size.yscale)
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .2*const(size.xscale),.2*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
vel = 2,0
removeongethit = 1
ignorehitpause = 1

[State 0, Viento Grande]
type = Explod
trigger1 = time = 3
anim = 7022
ID = 7022
pos = 0,0
postype = p1
scale = .2*const(size.xscale),.2*const(size.yscale)
sprpriority = 2
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,38

[State 0, Fly Lines]
type = Helper
triggerall = frontedgedist > 20
triggerall = time > 3
trigger1 = timemod = 4,0
helpertype = normal
name = "Fly Lines"
ID = 6000
stateno = 6000
pos = -15+random%8*const(size.xscale),(-5-random%35)*const(size.yscale)
postype = p1
facing = 1
ownpal = 1
Size.Xscale = .155*const(size.xscale)
Size.Yscale = .12*const(size.yscale)
size.shadowoffset = 0;angulo

[State 0, Viento Pequeo]
type = Explod
trigger1 = Pos y >= 0 && time >= 3 && timemod = 4,0
anim = 7022
ID = 7022
pos = 0,0
postype = p1
scale = .1*const(size.xscale),.1*const(size.yscale)
sprpriority = 2
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,38

[State 0, VelSet]
type = VelSet
trigger1 = time = [3,10]
x = 8.5
y = ifelse(pos y < 0,1,0)

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1||!time
value = SCA,NP,SP
time = 5
ignorehitpause = 1
[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,HP,NT,ST,HT
ignorehitpause = 1

[State 0, Land]
type = PlaySnd
trigger1 = !time
value = S52,1
volume = 50

[State 0, Land]
type = Explod
trigger1 = time = 0
anim = 7014
ID = 7014
pos = -1,1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .23*const(size.xscale),.23*const(size.yscale)
sprpriority = -10
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
remappal = 0,38

[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 1310, GD]
type = ChangeState
triggerall = time >2
trigger1 = (var(56)=1) && (ailevel = 0) && (command != "hold_a")
trigger2 = (var(56)!=1) && (ailevel = 0) && (command = "a")
trigger3 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/5
value = 1310
[State 1310, T]
type = ChangeState
triggerall = power >= 200
triggerall = time >2
trigger1 = (var(56)=2) && (ailevel = 0) && (command != "hold_b")
trigger2 = (var(56)!=2) && (ailevel = 0) && (command = "b")
trigger3 = roundstate = 2 && ailevel > 0 && p2bodydist x < 40 && random < (ailevel * 100)/6
trigger3 = p2statetype != A
value = 1320
[State 1330, EL]
type = ChangeState
triggerall = power >= 400
triggerall = time ;>2
trigger1 = (var(56)=3) && (ailevel = 0) && (command != "hold_c")
trigger2 = (var(56)!=3) && (ailevel = 0) && (command = "c")
trigger3 = roundstate = 2 && ailevel > 0 && p2bodydist x < 80 && random < (ailevel * 100)/7
trigger3 = !numexplod(1331)
trigger4 = roundstate = 2 && ailevel > 0 && p2bodydist x > 60 && random < (ailevel * 100)/4
trigger4 = p2movetype = A && (p2stateno = [1000,2000])
trigger4 = !numexplod(1331)
value = 1330

[State 1660, K]
type = ChangeState
triggerall = time >2
trigger1 = (ailevel = 0) && (command = "z")
trigger2 = roundstate = 2 && ailevel > 0 && (p2bodydist x = [50,80]) && random < (ailevel * 100)/7
value = 1659;cond(pos y > -80,1659,1660)

[State 200, End]
type = ChangeState
trigger1 = animtime = 0
value = 12
ctrl = 1

;-------------------------------------------------------------------------------
; AI
[Statedef 1306]
type    = A
movetype= I
physics = N
velset = 4,-7
ctrl = 0
anim = 1301
sprpriority = 2

[State 0, VelAdd]
type = VelAdd
trigger1 = vel y > 0
x = 0
y = .05+(var(56)*.02)
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
x = 0
y = .05
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S7,15
volumescale = 80

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1||!time
value = SCA,NP,SP
time = 5
ignorehitpause = 1
[State 0, HitBy]
type = HitBy
trigger1 = 1
value = SCA,NA,SA,HA,HP,NT,ST,HT
ignorehitpause = 1

[State 0, Gravity]
type = Gravity
trigger1 = 1

[State 1330, EL]
type = ChangeState
trigger1 = time>=4
value = 1330

[State 0, ChangeState]
type = ChangeState
trigger1 = vel y >0 && pos y >-3
value = 1303
ctrl = 0
;-------------------------------------------------------------------------------
; Godly Strike
[Statedef 1310]
type    = A
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 1310
facep2 = 1
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,101
volumescale = 100
channel = 5

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !time
value = SCA,NP,SP
time = 5
ignorehitpause = 1
[State 0, HitBy]
type = HitBy
trigger1 = !time
time = 5
value = SCA,NA,SA,HA,HP,NT,ST,HT
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = movehit=2
anim = 9999
ID = 1310
pos = 0,0
postype = p1 
facing = 1
vfacing = 1
bindtime = 1
removetime = -1
ignorehitpause=0
pausemovetime = 0
persistent = 0
scale = 1,1
sprpriority = 0
ontop = 0
ownpal = 0
removeongethit = 1

[State 0, Helper]
type = Helper
trigger1 = time < 5
helpertype = normal ;player
name = "soru"
ID = 6010
stateno = 6010
pos = (-9+random%19)*const(size.xscale),(-5-random%44)*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .09*const(size.xscale)
size.yscale = .09*const(size.yscale)
size.height = 90 ;Angle
pausemovetime = 20
persistent = 1
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time 
value = S1,11
volumescale = 70

[State 0, Pause]
type = Pause
trigger1 = !time
time = 8
movetime = 8
persistent = 0

[State 0, PosSet]
type = PosSet
triggerall = p2dist x = [-5,90]
trigger1 = !time
x = cond(facing = 1, enemynear,pos x -36,enemynear,pos x +36)
persistent = 0
[State 0, PosSet]
type = PosSet
triggerall = p2dist y = [-55,190]
trigger1 = !time
y = cond( enemynear,pos y > -5,-15,enemynear, pos y+5)
persistent = 0

[State 0, PosSet]
type = PosAdd
triggerall = p2dist x != [-5,90]
trigger1 = !time
x = 30
persistent = 0
[State 0, PosSet]
type = PosAdd
triggerall = p2dist y != [-55,190]
trigger1 = !time
y = cond( pos y > -35,5,20)
persistent = 0

[State 0, Turn]
type = Turn
trigger1 = time = 1 && cond(facing = 1,pos x > enemynear,pos x +1,pos x < enemynear,pos x -1)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 1
v = 6   ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 3
v = 6   ;fv = 10
value = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 5
anim = 411
ID = 1311
pos = 21*const(size.xscale),-17*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = cond(random < 500,1,-1)
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 5
ownpal = 1
removeongethit = 1
ontop = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 5
anim = 6999
ID = 6999
pos = 21*const(size.xscale),-17*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 5
angle = 0
removetime = -2
pausemovetime = 99
supermovetime = 99
scale = .6*const(size.xscale),.6*const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = vel y > 0
trigger1 = pos y >= -15
y = 0
ignorehitpause = 1
[State 0, PosSet]
type = PosSet
triggerall = vel y > 0
trigger1 = pos y >= -15
y = -15
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = movecontact
trigger2 = animelem = 6
x = -1
y = -.1
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelSet
triggerall = prevstateno = [1303,1305]
trigger1 = !time
x = 2
y = -3
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = p2dist y =[-30,50]
trigger1 = animelem = 3
x = 2
y = p2dist y / 5
ignorehitpause = 1
persistent = 0
[State 0, VelSet]
type = VelSet
triggerall = p2dist y !=[-30,50]
trigger1 = animelem = 3
x = 2
y = 1
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,4
volume = 50
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S7,26
volume = 70

[State 200, 1]
type = HitDef
triggerall = !movereversed
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = Medium
damage    = 85
guardflag = HA
pausetime = 14,15
guard.pausetime = 15,12
guard.hittime = 20
airguard.hittime = 15
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,8+random%2
guardsound = S4,1
ground.type = High
ground.slidetime = 28
ground.hittime  = 36+var(4)*10
air.hittime = 45+var(4)*10
ground.velocity = -15*const(size.xscale);,8
air.velocity = -3*const(size.xscale),-2*const(size.yscale);.3
;yaccel = .5
Fall = 0
fall.recover = 1
air.fall = 1 
Envshake.time = 19
down.bounce = 1
id = 1310
p2facing = 1
[State 0, TargetState]
type = TargetState
triggerall = time
triggerall = !numexplod(1310)
triggerall = numtarget(1310)
triggerall = target(1310),prevstateno  != 82737
triggerall = movehit = 1 && var(4) = 1
trigger1 = !target(1310),ishelper
value = 82736
ID = 1310
ignorehitpause = 0

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 27*const(size.xscale),-18*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .22*const(size.xscale)
size.yscale = .23*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 27*const(size.xscale),-18*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .23*const(size.xscale)
size.yscale = .22*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = movehit = 1
anim = 7004
ID = 7004
pos = 27*const(size.xscale),-18*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .4*const(size.xscale),.38*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0
remappal = 0,40
[State 0, Explod]
type = Explod
trigger1 = movehit = 1
anim = 7004
ID = 7004
pos = 27*const(size.xscale),-18*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .4*const(size.xscale),.38*const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0
trans = sub

[State 0, Explod]
type = Explod
trigger1 = movehit = 1
anim = 1311
ID = 1311
pos = 27*const(size.xscale),-18*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,const(size.yscale)
sprpriority = -1
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = movehit = 1
anim = 1311
ID = 1311
pos = 27*const(size.xscale),-18*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,const(size.yscale)
sprpriority = -2
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0
trans = sub

[State 0, Helper]
type = Helper
triggerall = var(4) = 1
triggerall = teammode != simul && enemynear,teammode != simul
trigger1 = movehit = 1
helpertype = normal
name = "zoom"
ID = 9900
stateno = 9900
pos = 15*const(size.xscale),-64*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent = 0

[State 0, Smash Hit]
type = VarSet
trigger1 = !movecontact
v = 4   
value = cond(enemynear,movetype = H,1,0)
ignorehitpause = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
; Transcendence
[Statedef 1320]
type    = A
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 1320
facep2 = 1
poweradd = -200
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !time
value = SCA,NA,NP,SP
time = 6
ignorehitpause = 1
[State 0, HitBy]
type = HitBy
trigger1 = !time
time = 6
value = SCA,SA,HA,HP,NT,ST,HT
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time = 6
value = SCA,NP,SP
time = 6
ignorehitpause = 1
[State 0, HitBy]
type = HitBy
trigger1 = time = 6
time = 6
value = SCA,NA,SA,HA,HP,NT,ST,HT
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S7,29
volumescale = 150

[State 0, Explod]
type = Explod
trigger1 = animelem = 7
anim = 6999
ID = 6999
pos = 28*const(size.xscale),-37*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 5
angle = 0
removetime = -2
pausemovetime = 99
supermovetime = 99
scale = .25*const(size.xscale),.25*const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 7
anim = 1321
ID = 1321
pos = 28*const(size.xscale),-37*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .2*const(size.xscale),.2*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause =1
remappal = 11,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = animelem = 7
anim = 1321
ID = 1321
pos = 28*const(size.xscale),-37*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .2*const(size.xscale),.2*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause =1
trans =sub

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 3
statetype = S      ;S,A,C,L
movetype = A       ;I,A,H
physics = S        ;A,C,S,N
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 2
y = 0
ignorehitpause = 1
[State 0, PosSet]
type = PosSet
trigger1 = animelem = 3
y = 0
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
triggerall = p2dist x != [-30,35]
trigger1 = animelem = 3
x = -10
y = 0
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
triggerall = p2dist x = [-30,35]
trigger1 = animelem = 3
x = p2dist x -30
y = 0
ignorehitpause = 1
[State 0, Turn]
type = Turn
triggerall = p2dist x = [-30,35]
trigger1 = animelem = 3 && cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x)
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = time < 9
helpertype = normal ;player
name = "soru"
ID = 6010
stateno = 6010
pos = (-9+random%19)*const(size.xscale),(-5-random%44)*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .09*const(size.xscale)
size.yscale = .09*const(size.yscale)
size.height = 90 ;Angle
pausemovetime = 20
persistent = 1
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time 
value = S1,11
volumescale = 70

[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = unguardable

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,ST        
hitflag = M    
guardflag = MA         
animtype = back          
air.animtype = hard
damage = 0,0
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = -1
guardsound = -1
ground.type = High     
ground.slidetime = 60
ground.hittime = 220
guard.hittime = 30
air.hittime = 220
ground.velocity = 0,0
guard.velocity = -15
air.velocity = 0,0
fall = 1
fall.recover = 0
down.bounce = 0
id = 1320
hitonce = 1
kill =0
yaccel = .5
guard.kill = 0
fall.kill = 0
numhits = 0
p2stateno = 82759
p1stateno = 1325

[State 0, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1
ignorehitpause = 1
;-------------------------------------------------------------------------------
; Transcendence - Succes
[Statedef 1325]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 1325
facep2 = 1
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 25   
value = 1
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 6   ;fv = 10
value = 1
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
triggerall = numtarget(1320)
triggerall = target(1320),stateno = 82759
trigger1 = animelemtime(26) < 0
time =  1;animelemtime(26) < 0
id = 1320
pos = (45)*const(size.xscale),0
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = !animtime
x = 105*const(size.xscale)
y = 0
ignorehitpause = 1
[State 0, Turn]
type = Turn
trigger1 = !animtime
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=6
value = S7,30
volumescale = 100
channel = 4
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=26
value = S7,45
volumescale = 160
channel = 4

[State 0, Bola1]
type = Explod
trigger1 = animelem=6
anim = 1326
ID = 1326
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
trans = sub
[State 0, Bola1]
type = Explod
trigger1 = animelem=6
anim = 1326
ID = 1326
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
remappal = 11,0+var(22)

[State 0, Bola2]
type = Explod
trigger1 = animelem=6
anim = 1327
ID = 1326
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
trans = sub
[State 0, Bola2]
type = Explod
trigger1 = animelem=6
anim = 1327
ID = 1326
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
remappal = 11,0+var(22)

[State 0, Land]
type = Explod
trigger1 = animelem = 14
anim = 7014
ID = 7014
pos = 95*const(size.xscale),1
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .23*const(size.xscale),.23*const(size.yscale)
sprpriority = -10
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
remappal = 0,38

[State 0, Bola3]
type = Explod
trigger1 = animelem=18
anim = 1328
ID = 1326
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
trans = sub
[State 0, Bola3]
type = Explod
trigger1 = animelem=18
anim = 1328
ID = 1326
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
remappal = 11,0+var(22)

[State 0, Bola4]
type = Explod
trigger1 = animelem=24
anim = 1329
ID = 1326
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
trans = sub
[State 0, Bola4]
type = Explod
trigger1 = animelem=24
anim = 1329
ID = 1326
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
remappal = 11,0+var(22)

[State 0, Beam]
type = Explod
trigger1 = animelem=26
anim = 1322
ID = 1322
pos = 76*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 28
removetime = -2
pausemovetime = 0
scale = .3*const(size.xscale),.25*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
trans = sub
[State 0, Beam]
type = Explod
trigger1 = animelem=26
anim = 1322
ID = 1322
pos = 76*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 28
removetime = -2
pausemovetime = 0
scale = .3*const(size.xscale),.25*const(size.yscale)
sprpriority = 10
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
remappal = 11,0+var(22)

[State 0, Glow]
type = Explod
trigger1 = animelem=26
anim = 1323
ID = 1323
pos = 74*const(size.xscale),0
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 28
removetime = -2
pausemovetime = 0
scale = .3*const(size.xscale),.9*const(size.yscale)
sprpriority = -10
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
remappal = 11,0+var(22)

[State 0, Fly Lines]
type = Helper
triggerall = time%4 = 0
trigger1 = animelemtime(26) > 0 && animelemtime(27) <=25
helpertype = normal
name = "Fly Lines"
ID = 6000
stateno = 6000
pos = (96+random%8)*const(size.xscale),(-5-random%35)*const(size.yscale)
postype = p1
facing = 1
ownpal = 1
Size.Xscale = .155*const(size.xscale)
Size.Yscale = .12*const(size.yscale)
size.shadowoffset = 0;angulo

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 27
id = 1326
ignorehitpause = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = animelem = 11
value = 5
ignorehitpause = 1
[State 0, SprPriority]
type = SprPriority
trigger1 = animelem = 23
value = 2
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = NumTarget(1320)
trigger1 = animelem = 26
value = 82760
ID = 1320
ignorehitpause = 1
persistent = 0
[State 0, TargetState]
type = TargetState
triggerall = NumTarget(1320)
trigger1 = animelemtime(27) >=25
value = 82761
ID = 1320
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
triggerall = numtarget(1320)
triggerall = time%4 = 0
trigger1 = animelemtime(26) > 0 && animelemtime(27) <=25
value = S1,18
volumescale = 50

[State 0, EnvShake]
type = EnvShake
triggerall = numtarget(1320)
triggerall = time%4 = 0
trigger1 = animelemtime(26) > 0 && animelemtime(27) <=25
time = 2
freq = 60+time*.3
ampl = -4-time*.02
phase = 90+time*.3
ignorehitpause = 1
[State 0, HitAdd]
type = HitAdd
triggerall = numtarget(1320)
triggerall = time%4 = 0
trigger1 = animelemtime(26) > 0 && animelemtime(27) <=25
value = 1
ignorehitpause = 1
[State 0, TargetLifeAdd]
type = TargetLifeAdd
triggerall = numtarget(1320)
triggerall = time%4 = 0
trigger1 =  animelemtime(26) > 0 && animelemtime(27) <=25
value = cond(var(54) >= 70,-7,floor(-17+var(54)*.011))+floor(var(2)*.1);-7
ID = 1320
kill = 1
absolute = 1
ignorehitpause = 1

[State 0, Helper]
type = Helper
triggerall = numtarget(1320)
triggerall = time%4 = 0
trigger1 =  animelemtime(26) > 0 && animelemtime(27) <=25
helpertype = normal
name = "sparkpeta"
ID = 023
stateno = 800
pos = 0,(-22-random%4)*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.21+(time*.001))*const(size.xscale)
size.yscale = (.23+(time*.001))*const(size.yscale)
ignorehitpause = 1

[State 0, Ondas]
type = Explod
triggerall = time%4 = 0
trigger1 =  animelemtime(26) > 0 && animelemtime(27) <=25
anim = 7018
ID = 7018
pos = 54+var(48),0
postype = p1
scale = .3*const(size.xscale),.2*const(size.yscale)
sprpriority = -11
ontop = 0
ownpal = 1
removeongethit = 1
[State 0, Ondas]
type = Explod
triggerall = time%2 = 0
trigger1 =  animelemtime(26) > 0 && animelemtime(27) <=25
anim = 8220
ID = 8220
pos = 54+var(48),0
postype = p1
scale = .3*const(size.xscale),.2*const(size.yscale)
sprpriority = 9
ontop = 0
ownpal = 1
removeongethit = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem=25
v = 48    ;fv = 10
value = 0
[State 0, VarAdd]
type = VarAdd
triggerall = time%2 = 0
trigger1 =  animelemtime(26) > 0 && animelemtime(27) <=25
v = 48
value = -22
ignorehitpause = 1

[State 183, Zoom1]
type = Zoom
triggerall = teammode != simul && enemynear,teammode != simul
triggerall = p2bodydist x = [0,100]
trigger1 = animelemtime(25) < 0 
pos = ((target(1320),pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom
scale = 1.4+time*.0001/camerazoom
space = screen
lag = .4
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom1]
type = Zoom
triggerall = teammode != simul && enemynear,teammode != simul
triggerall = p2bodydist x = [0,100]
trigger1 = animelemtime(25) >= 0 && animelemtime(26) < 0
pos = ((target(1320),pos x)+facing*15 / (1/Camerazoom*1.5)) * CameraZoom, (pos y) / (1/Camerazoom*1.5) * CameraZoom
scale = 2+time*.0001/camerazoom
space = screen
lag = .4
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom2]
type = Zoom
triggerall = teammode != simul && enemynear,teammode != simul
trigger1 = animelemtime(26) >= 0
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y +cond(statetype = A,40,0)) / (1/Camerazoom*1.5) * CameraZoom
scale = 1
lag = .6
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 25
value = S0,106
volumescale = 100
channel = 5

[State 0, AfterImage]
type = AfterImage
trigger1 = animelem = 10
time = 20
length = 10
palcolor = 256
palinvertall = 0
palbright = 50,30,140
palcontrast = 130,120,240
palpostbright = 1,0,6
paladd = 30,10,81
palmul = .35,.25,.87
timegap = 1
framegap = 4
trans = "add" ;"none","add1","sub"
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = frontedgedist < 115
x = -2
y = 0
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; P2 - Stunned
[Statedef 82759]
type    = A
movetype= H
physics = N
velset = 0,0
anim = 5000
ctrl = 0
sprpriority = 2
Facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = !time 
y = 0
persistent = 0
ignorehitpause = 1
[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5300;+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 200, End]
type = SelfState
trigger1 = time = 300
value = 5050
ctrl = 0

;-------------------------------------------------------------------------------
; P2 - Damaged
[Statedef 82760]
type    = A
movetype= H
physics = N
velset = -3,0
anim = 5000
ctrl = 0
sprpriority = 3
Facep2 = 1

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = -3
y = 0
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = time=0
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = time%4=0
x = -6
y = 0
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = SelfAnimExist(5000+floor(time*.3))
trigger1 = 1
value = (5000+floor(time*.3));+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 200, End]
type = SelfState
trigger1 = p2stateno != [1320,1325]
value = 5050
ctrl = 0
;-------------------------------------------------------------------------------
; P2 - Hacia la Pared 1325 alaberga
[Statedef 82761]
type    = A
movetype= H
physics = N
velset = -18,0
ctrl = 0
sprpriority = 1
;Facep2 = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !time
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 6
ignorehitpause = 1

[State 216, XN[]
type = ScreenBound
trigger1 = 1;BackEdgeBodyDist < 25
value = 1
movecamera = 0,1

[State 0, PosSet]
type = PosSet
triggerall = pos y >= -10
trigger1 = time = 0
y = 0

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5030;+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 200, End]
type = ChangeState
trigger1 = time = 35
value = 82740

[State 200, End]
type = ChangeState
triggerall = time > 3
trigger1 = backedgedist < 5
value = 82739
;-------------------------------------------------------------------------------
; Embodied Light
[Statedef 1330]
type    = A
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 1330
facep2 = 1
poweradd = -400
sprpriority = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = prevstateno = 1304 && !time
trigger2 = prevstateno = 1306 && !time
x = -4
y = -11;+cond(ailevel>0,-20,0)
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S7,33
volumescale = 100
channel = 4

[State 0, Land]
type = Explod
triggerall = animelemtime(2) <0
trigger1 = time = 1
anim = 110
ID = 110
pos = 0,-28*const(size.yscale)
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .2*const(size.xscale),.2*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
vel = 2,0
removeongethit = 1
ignorehitpause = 1

[State 0, Viento Grande]
type = Explod
triggerall = animelemtime(2) <0
triggerall = pos y >= 0
trigger1 = !time
anim = 7022
ID = 7022
pos = 0,0
postype = p1
scale = .2*const(size.xscale),.2*const(size.yscale)
sprpriority = 2
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,38

[State 0, Fly Lines]
type = Helper
triggerall = animelemtime(2) <0
triggerall = frontedgedist > 20
trigger1 = timemod = 2,0
helpertype = normal
name = "Fly Lines"
ID = 6000
stateno = 6000
pos = -15+random%8*const(size.xscale),(-5-random%35)*const(size.yscale)
postype = p1
facing = 1
ownpal = 1
Size.Xscale = .155*const(size.xscale)
Size.Yscale = .12*const(size.yscale)
size.shadowoffset = 0;angulo

[State 0, Viento Pequeo]
type = Explod
triggerall = animelemtime(2) <0
trigger1 = Pos y >= 0 && timemod = 2,0
anim = 7022
ID = 7022
pos = 0,0
postype = p1
scale = .1*const(size.xscale),.1*const(size.yscale)
sprpriority = 2
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,38

;charge
[State 0, Aura]
type = Explod
triggerall = var(56) != 3
trigger1 = time = 0
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,39
supermovetime = 30
[State 0, Aura]
type = Explod
triggerall = var(56) != 3
trigger1 = time = 5
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,37
supermovetime = 30
[State 0, Aura]
type = Explod
triggerall = var(56) != 3
trigger1 = time = 0||time = 5
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33
supermovetime = 30
;charge

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 6
v = 6   ;fv = 10
value = 0
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 2
v = 6   ;fv = 10
value = 1
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !time
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 15
ignorehitpause = 1
[State 0, NotHitBy]
type = NotHitBy
triggerall = numtarget(1330)
trigger1 = movehit
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = 8
y = 0
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = !time && pos y >= -50
y = 0
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
x = -10*const(size.yscale)
y = -35*const(size.xscale)
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = -.5
y = -.2
ignorehitpause = 1

[State 0, HitDef]
type = HitDef
triggerall = !numexplod(1330)
trigger1 = !movecontact
attr = S,SA        
hitflag = MAF        
guardflag = MA         
animtype = back          
air.animtype = hard
damage = 0,0
pausetime = 0,0
guard.pausetime = 0,5
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = -1
guardsound = -1
ground.type = High     
ground.slidetime = 60
ground.hittime = 220
guard.hittime = 30
air.hittime = 220
ground.velocity = 0,0
guard.velocity = -4
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
air.velocity = 0,0
fall = 0
forcestand = 1
fall.recover = 0
down.bounce = 0
id = 1330
hitonce = 1
kill =0
yaccel = .5
guard.kill = 0
fall.kill = 0
numhits = 0
p2stateno = 82762
p1stateno = 1331

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 0,-24*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .21*const(size.xscale)
size.yscale = .21*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 1336
ID = 1336
pos = 41*const(size.xscale),-5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
removetime = -2
pausemovetime = 0
scale = .12*const(size.xscale),.12*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 1336
ID = 1336
pos = 41*const(size.xscale),-5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
removetime = -2
pausemovetime = 0
scale = .12*const(size.xscale),.12*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
trans = sub

[State 0, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 50
ctrl = 0

;-------------------------------------------------------------------------------
; Embodied Light Succes
[Statedef 1331]
type    = A
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 1331
facep2 = 1
poweradd = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 25   
value = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 9999
ID = 1330
pos = 0,0
postype = p1 
facing = 1
vfacing = 1
bindtime = 1
removetime = 60
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
ownpal = 0
removeongethit = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S7,32
volumescale = 100
channel = 4

[State 0, NotHitBy]
type = NotHitBy
trigger1 = numtarget(1330)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = !time
x = -.2
y = -.1
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = time = 25
helpertype = normal ;player
name = "Fx1"
ID = 1335
stateno = 1335
pos = 5,-10
postype = p2    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
size.shadowoffset = -17
ignorehitpause = 1
[State 0, Helper]
type = Helper
trigger1 = time = 30
helpertype = normal ;player
name = "Fx1"
ID = 1335
stateno = 1335
pos = -5,-25
postype = p2    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
size.shadowoffset = -1
ignorehitpause = 1
[State 0, Helper]
type = Helper
trigger1 = time = 35
helpertype = normal ;player
name = "Fx1"
ID = 1335
stateno = 1335
pos = 3,-39
postype = p2    ;p2,front,back,left,right
facing = -1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
size.shadowoffset = 16
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
triggerall = numtarget(1330)
trigger1 = target(1330),pos y <-15
time = 1
id = 1330
pos = 41,15
ignorehitpause = 1
persistent = 0

[State 0, TargetState]
type = TargetState
triggerall = NumTarget(1330)
trigger1 = time = 40||time = 45
value = 82762
ID = 1330
ignorehitpause = 1
persistent = 0
[State 0, TargetState]
type = TargetState
triggerall = NumTarget(1330)
trigger1 = time = 50
value = 82763
ID = 1330
ignorehitpause = 1
persistent = 0
[State 0, TargetState]
type = TargetState
triggerall = NumTarget(1330)
trigger1 = time = 60
value = cond(numexplod(1331),(cond(target(1330),pos y>=0,82764,82734)),cond(target(1330),pos y>=0,82764,82754))
ID = 1330
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
triggerall = NumTarget(1330)
;triggerall = target(1330),pos y >= 0
trigger1 = time = 61
anim = 9999
ID = 1331
pos = 0,0
postype = p1 
facing = 1
vfacing = 1
bindtime = 1
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
ownpal = 0
removeongethit = 1

[State 0, EnvShake]
type = EnvShake
triggerall = numtarget(1330)
trigger1 = time = 40||time = 45||time = 50
time = 2
freq = 60+time*.07
ampl = -4-time*.02
phase = 90+time*.06
ignorehitpause = 1
[State 0, HitAdd]
type = HitAdd
triggerall = numtarget(1330)
trigger1 = time = 40||time = 45||time = 50
value = 1
ignorehitpause = 1
[State 0, TargetLifeAdd]
type = TargetLifeAdd
triggerall = numtarget(1330)
trigger1 = time = 40||time = 45||time = 50
value = cond(var(54) >= 70,-17,floor(-35+var(54)*.01))+floor(var(2)*.1);-7
ID = 1330
kill = 1
absolute = 1
ignorehitpause = 1

[State 0, Polvo]
type = Explod
triggerall = numtarget(1330)
triggerall = target(1330),pos y = 0
trigger1 = time = 40||time = 45||time = 50
anim = 7022
ID = 7022
pos = -7*const(size.xscale),0
postype = p2
scale = (.07+time*.005)*const(size.xscale),(.1+time*.004)*const(size.yscale)
sprpriority = 1+random%6
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,35
[State 0, Polvo]
type = Explod
triggerall = numtarget(1330)
triggerall = target(1330),pos y = 0
trigger1 = time = 40||time = 45||time = 50
anim = 7022
ID = 7022
pos = -7*const(size.xscale),0
postype = p2
scale = (.07+time*.005)*const(size.xscale),(.1+time*.004)*const(size.yscale)
sprpriority = -1
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33

[State 0, Supers]
type = Explod
Triggerall = !numexplod(700)
trigger1 = time >50
anim = 9999
ID = 700
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 10
pausemovetime = 0
scale = 1,1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 183, Zoom1]
type = Zoom
triggerall = teammode != simul && enemynear,teammode != simul
trigger1 = time < 40
pos = ((target(1330),pos x)+facing*15 / (1/Camerazoom*1.5)) * CameraZoom, (pos y +cond(statetype = A,40,0)) / (1/Camerazoom*1.5) * CameraZoom
scale = 2+time*.0001/camerazoom
space = screen
lag = .4
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom2]
type = Zoom
triggerall = teammode != simul && enemynear,teammode != simul
trigger1 = time > 39
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y +cond(statetype = A,40,0)) / (1/Camerazoom*1.5) * CameraZoom
scale = 1
lag = .6
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, ChangeState]
type = ChangeState
triggerall = ! ailevel
trigger1 = !animtime
value = 50
ctrl = 1
[State 0, ChangeState]
type = ChangeState
triggerall = ailevel
trigger1 = !animtime
value = 50
ctrl = cond(target(1330),pos y <0,1,0)
;-------------------------------------------------------------------------------
; FX
[Statedef 1335]
type    = A
movetype= I
physics = N
anim = 9999;cond(random < 500,581,580)
sprpriority = 1
velset = 0,0

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 1334
ID = 1334
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 7
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
angle = random%180
remappal = 10,0+root,var(22)

[State 0, Helper]
type = Helper
trigger1 = time = 15
helpertype = normal
name = "sparkpeta"
ID = 023
stateno = 800
pos = 0,0
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .12*const(size.xscale)
size.yscale = .09*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = time = 15
anim = 1335
ID = 1335
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
angle = const(size.shadowoffset)
remappal = 10,0+root,var(22)
[State 0, Explod]
type = Explod
trigger1 = time = 15
anim = 1335
ID = 1335
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
angle = const(size.shadowoffset)
trans = sub
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 15
value = S7,44
volumescale = 60

[State 200, End]
type = Destroyself
trigger1 = numexplod(1335)
;-------------------------------------------------------------------------------
; P2 - Stunned
[Statedef 82761]
type    = A
movetype= H
physics = N
velset = 0,0
anim = 5000
ctrl = 0
sprpriority = 2
Facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = pos y >= 0
value = (5300);+cond(authorname = "Burako",0,var(10))
elem = 1
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = pos y < 0
value = (5051);+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 200, End]
type = SelfState
trigger1 = time = 60
trigger2 = p2stateno = 6800
value = 5050
ctrl = 0

;-------------------------------------------------------------------------------
; P2 - Damaged 1
[Statedef 82762]
type    = S
movetype= H
physics = S
velset = -.1,0
anim = 5000;+cond(authorname = "Burako",0,var(10))
ctrl = 0
sprpriority = 2
Facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 2
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = prevstateno != 82761
trigger1 = pos y >= 0
value = (5000);+cond(authorname = "Burako",0,var(10))
elem = 1
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = prevstateno = 82761
trigger1 = pos y >= 0
value = (5001);+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = prevstateno != 82761
trigger1 = pos y < 0
value = (5090);+cond(authorname = "Burako",0,var(10))
elem = 1
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = prevstateno = 82761
trigger1 = pos y < 0
value = (5030);+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 200, End]
type = SelfState
trigger1 = time = 120
trigger2 = p2stateno = 6800
value = 5050
ctrl = 0
;-------------------------------------------------------------------------------
; P2 - Damaged 2
[Statedef 82763]
type    = S
movetype= H
physics = S
velset = -.2,0
anim = 5002;+cond(authorname = "Burako",0,var(10))
ctrl = 0
sprpriority = 2
Facep2 = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = pos y >= 0
value = (5002);+cond(authorname = "Burako",0,var(10))
elem = 1
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = pos y < 0
value = (5050);+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 200, End]
type = SelfState
trigger1 = time = 60
trigger2 = p2stateno = 6800
value = 5050
ctrl = 0
;-------------------------------------------------------------------------------
; P2 - Crumble
[Statedef 82764]
type    = S
movetype= H
physics = S
anim = 5000
ctrl = 0

[State 0, PosSet]
type = PosSet
trigger1 = !time && pos y >-3
y = 0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5300;+cond(authorname = "Burako",0,var(10))
elem = 1

[State 200, End]
type = SelfState
trigger1 = pos y <0
value = 5050;5110
[State 200, End]
type = SelfState
trigger1 = time = 50
value = 5070;5110
[State 0, DestroySelf]
type = DestroySelf
trigger1 = ishelper
ignorehitpause = 1
;===============================================================================
; Shinshin No Ken:
;-------------------------------------------------------------------------------
[Statedef 1400]
type    = S
movetype= A
physics = N
juggle  = 1
velset = 0,0
ctrl = 0
anim = 1400
poweradd = -1000
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,76
volumescale = 100
channel = 5

;charge
[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 5201, 5] 
type = PalFX
trigger1 = Time = 0
time = 4
add = 128,128,128 
[State 3000, PlaySnd - Super Charge]
type = PlaySnd
trigger1 = Time = 0
value = S1,2
volume = 100

[State 0, Aura]
type = Explod
trigger1 = time = 0
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,36
supermovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 5
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,37
supermovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 0||time = 5
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33
supermovetime = 30
;charge

[State 0, Helper]
type = Helper
trigger1 = time = 5
helpertype = normal ;player
name = "Golpe1"
ID = 1405
stateno = 1405
pos = 5*const(size.xscale),0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
[State 0, Helper]
type = Helper
triggerall = (numhelper(1405))
trigger1 = time = 20
helpertype = normal ;player
name = "Golpe2"
ID = 1406
stateno = 1406
pos = (-helper(1405),parentdist x)+15*const(size.xscale),-30*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
[State 0, Helper]
type = Helper
triggerall = (numhelper(1406))
trigger1 = time = 40
helpertype = normal ;player
name = "Golpe3"
ID = 1407
stateno = 1407
pos = (-helper(1406),parentdist x)+35*const(size.xscale),0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
[State 0, Helper]
type = Helper
triggerall = (numhelper(1407))
trigger1 = time = 55
helpertype = normal ;player
name = "Golpe3"
ID = 1408
stateno = 1408
pos = cond(helper(1407),facing!=facing,(-helper(1408),parentdist x)+35*const(size.xscale),(-helper(1408),parentdist x)+105*const(size.xscale)),-30*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)

[State 1700, Unrestrained Will]
type = ChangeState
triggerall = (numhelper(1408))
triggerall = helper(1408),movecontact
triggerall = power >= 1000
trigger1 = ailevel = 0 && command = "hold_a" && command = "hold_b"
trigger2 = ailevel = 0 && command = "hold_b" && command = "hold_c"
trigger3 = ailevel > 0  && random < (ailevel * 100)/11 && p2bodydist x < 90
value = 1700

[State 200, End]
type = ChangeState
triggerall = !ailevel
trigger1 = time>35 && command!= "hold_b"
value = 0
ctrl = 1
[State 200, End]
type = ChangeState
triggerall = numhelper(1408)
trigger1 = helper(1408),time>20
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; 1
[Statedef 1405]
type    = S
movetype= A
physics = S
juggle  = 0
Velset = 0,0
ctrl = 0
anim = 1405
facep2 = 0
sprpriority = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = frontedgebodydist < 10
x = -2
y = 0
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = backedgebodydist < 0
x = 1
y = 0
ignorehitpause = 1

;Active Damage Scaling
[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = 1
value = (cond(root,var(54) >= 70,.1,1-root,var(54)*.009))+root,var(2)*.2
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 1411
ID = 1411
pos = 0,-25*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
remappal = 10,0+root,var(22)
[State 0, Explod]
type = Explod
trigger1 = !time
anim = 1411
ID = 1411
pos = 0,-25*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
remappal = 0,33
trans = sub

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 1410
ID = 1410
pos = 23*const(size.xscale),-44*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 9
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
angle = 100
remappal = 10,0+root,var(22)
[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 1410
ID = 1410
pos = 23*const(size.xscale),-44*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
angle = 100
remappal = 0,33
trans = sub

[State 0, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(7)>0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem=3
x = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=3
value = S5,2
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, SA
animtype  = Medium
damage    = 25,2
guardflag = MA
pausetime = 5,10
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,5+random%2
guardsound = S4,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 30
air.hittime = 35
ground.velocity = (-5*const(size.xscale))+var(54)*.01
air.velocity = (-3*const(size.xscale)),(-3-var(54)*.01)*const(size.yscale)
Fall = 0
air.fall = 1
fall.recover = 1
Envshake.time = 12

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 25*const(size.xscale),-45*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .21*const(size.xscale)
size.yscale = .21*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = 25*const(size.xscale),-45*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .21*const(size.xscale)
size.yscale = .21*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 200, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
ignorehitpause= 1

;-------------------------------------------------------------------------------
; 2
[Statedef 1406]
type    = A
movetype= A
physics = N
juggle  = 0
Velset = 0,0
ctrl = 0
anim = 1406
facep2 = 0
sprpriority = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = frontedgebodydist < 10
x = -2
y = 0
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = backedgebodydist < 0
x = 1
y = 0
ignorehitpause = 1

;Active Damage Scaling
[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = 1
value = (cond(root,var(54) >= 70,.1,1-root,var(54)*.009))+root,var(2)*.2
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 1411
ID = 1411
pos = 0,-25*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
remappal = 10,0+root,var(22)
[State 0, Explod]
type = Explod
trigger1 = !time
anim = 1411
ID = 1411
pos = 0,-25*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
remappal = 0,33
trans = sub

[State 0, Explod]
type = Explod
trigger1 = animelem=4
anim = 1410
ID = 1410
pos = 15*const(size.xscale),-5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 9
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
angle = 30
remappal = 10,0+root,var(22)
[State 0, Explod]
type = Explod
trigger1 = animelem=4
anim = 1410
ID = 1410
pos = 15*const(size.xscale),-5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
angle = 30
remappal = 0,33
trans = sub

[State 0, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(7)>0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem=3
x = 7
[State 0, VelSet]
type = VelSet
trigger1 = animelem=4
x = .2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=3
value = S5,3
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, SA
animtype  = Medium
damage    = 25,4
guardflag = MA
pausetime = 5,10
guard.pausetime = 6,9
guard.hittime = 12
airguard.hittime = 15
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,6+random%2
guardsound = S4,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 30
air.hittime = 35
ground.velocity = 1
air.velocity = 1,(9)*const(size.yscale)
Fall = 0
air.fall = 1
fall.recover = 1
Envshake.time = 12
yaccel = .38
id = 1
[State 0, TargetState]
type = TargetState
triggerall = numtarget(1)
triggerall = movehit
trigger1 = !target(1),ishelper
value = 82742
ID = 1
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 10*const(size.xscale),0*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .22*const(size.xscale)
size.yscale = .22*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 10*const(size.xscale),0*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .22*const(size.xscale)
size.yscale = .22*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 200, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
ignorehitpause= 1

;-------------------------------------------------------------------------------
; 3
[Statedef 1407]
type    = S
movetype= A
physics = S
juggle  = 0
Velset = cond(facing=parent,facing,-5,-4),0
ctrl = 0
anim = 1407
facep2 = 1
sprpriority = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = frontedgebodydist < 10
x = -2
y = 0
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = backedgebodydist < 0
x = 1
y = 0
ignorehitpause = 1

;Active Damage Scaling
[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = 1
value = (cond(root,var(54) >= 70,.1,1-root,var(54)*.009))+root,var(2)*.2
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 1411
ID = 1411
pos = 0,-25*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
remappal = 10,0+root,var(22)
[State 0, Explod]
type = Explod
trigger1 = !time
anim = 1411
ID = 1411
pos = 0,-25*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
remappal = 0,33
trans = sub

[State 0, Explod]
type = Explod
trigger1 = animelem=4
anim = 1410
ID = 1410
pos = 40*const(size.xscale),-27.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 9
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
angle = 90
remappal = 10,0+root,var(22)
[State 0, Explod]
type = Explod
trigger1 = animelem=4
anim = 1410
ID = 1410
pos = 40*const(size.xscale),-27.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
angle = 90
remappal = 0,33
trans = sub

[State 0, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(7)>0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem=3
x = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=3
value = S5,2
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, SA
animtype  = Medium
damage    = 25,2
guardflag = MA
pausetime = 5,10
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,5+random%2
guardsound = S4,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 30
air.hittime = 35
ground.velocity = (-3*const(size.xscale))+var(54)*.01
air.velocity = (-1*const(size.xscale)),(-3-var(54)*.01)*const(size.yscale)
Fall = 0
air.fall = 1
fall.recover = 1
Envshake.time = 12

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 37*const(size.xscale),-27*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .23*const(size.xscale)
size.yscale = .23*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = 37*const(size.xscale),-27*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .23*const(size.xscale)
size.yscale = .23*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 200, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
ignorehitpause= 1

;-------------------------------------------------------------------------------
; 4
[Statedef 1408]
type    = A
movetype= A
physics = N
juggle  = 0
Velset = 0,0
ctrl = 0
anim = 1408
facep2 = 0
sprpriority = 2

[State 0, PosAdd]
type = PosAdd
trigger1 = frontedgebodydist < 10
x = -2
y = 0
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = backedgebodydist < 0
x = 1
y = 0
ignorehitpause = 1

;Active Damage Scaling
[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = 1
value = (cond(root,var(54) >= 70,.1,1-root,var(54)*.009))+root,var(2)*.2
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 1411
ID = 1411
pos = 0,-25*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
remappal = 10,0+root,var(22)
[State 0, Explod]
type = Explod
trigger1 = !time
anim = 1411
ID = 1411
pos = 0,-25*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
remappal = 0,33
trans = sub

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 6999
ID = 6999
pos = 15*const(size.xscale),-15*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 5
angle = -40
removetime = -2
pausemovetime = 99
supermovetime = 99
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem=4
anim = 1410
ID = 1410
pos = 15*const(size.xscale),-15*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 9
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
angle = 85
remappal = 10,0+root,var(22)
[State 0, Explod]
type = Explod
trigger1 = animelem=4
anim = 1410
ID = 1410
pos = 15*const(size.xscale),-15*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
angle = 85
remappal = 0,33
trans = sub

[State 0, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(7)>0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem=3
x = 11
[State 0, VelSet]
type = VelSet
trigger1 = animelem=4
x = .3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2
value = S5,6
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, SA
animtype  = Hard
damage    = 25,4
guardflag = MA
pausetime = 5,20
guard.pausetime = 5,15
guard.hittime = 15
airguard.hittime = 18
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,9
guardsound = S4,1
ground.type = High
ground.slidetime = 15
ground.hittime  = 30
air.hittime = 35
ground.velocity = -3,-2
air.velocity = -1,-2
Fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 50
Envshake.time = 12
yaccel = .4
id = 1

[State 0, TargetBind]
type = TargetBind
triggerall = movehit
triggerall = numtarget(1)
trigger1 = !target(1),ishelper
time = 5
id = 1
pos = 19*const(size.xscale),6*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 15*const(size.xscale),-15*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .23*const(size.xscale)
size.yscale = .23*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 15*const(size.xscale),-15*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .25*const(size.xscale)
size.yscale = .25*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 200, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
ignorehitpause= 1

;-------------------------------------------------------------------------------
; Fin
[Statedef 1409]
type    = A
movetype= A
physics = N
juggle  = 0
Velset = 0,0
ctrl = 0
anim = 1409
facep2 = 1
sprpriority = 2

;Active Damage Scaling
[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = 1
value = (cond(var(54) >= 70,.1,1-var(54)*.009))+var(2)*.2
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 1411
ID = 1411
pos = 0,-25*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
remappal = 10,0+root,var(22)
[State 0, Explod]
type = Explod
trigger1 = !time
anim = 1411
ID = 1411
pos = 0,-25*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
remappal = 0,33
trans = sub

[State 0, NotHitBy]
type = NotHitBy
trigger1 = animelemtime(7)>0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 200, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
ignorehitpause= 1
;===============================================================================
; Spirit Titan!!:
;-------------------------------------------------------------------------------
[Statedef 1500]
type    = S
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1500
poweradd = -2000
facep2 = 1
sprpriority = -4

[State 0, Explod]
type = Explod
trigger1 = prevstateno = 1001&&!numexplod(1010)
anim = 9999
ID = 1010
pos = 0,0
postype = p1 
facing = 1
vfacing = 1
bindtime = 1
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
ownpal = 0
removeongethit = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,152
volumescale = 100
channel = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = S7,45
volumescale = 50
channel = 9
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 5
value = S7,46
volumescale = 80
channel = 10

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 6   ;fv = 10
value = 1
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = !numhelper(9930) 
helpertype = normal ;player
name = "aura titan a"
ID = 9930
stateno = 9930
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999999
pausemovetime = 99999999
size.xscale = 1;const(size.xscale)
size.yscale = 1;const(size.yscale)
[State 0, Helper]
type = Helper
trigger1 = !numhelper(9935) 
helpertype = normal ;player
name = "aura titan b"
ID = 9935
stateno = 9935
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999999
pausemovetime = 99999999
size.xscale = 1;*const(size.xscale)
size.yscale = 1;*const(size.yscale)

[State 0, Aura]
type = Explod
trigger1 = numexplod(1525) = 0
anim = 1525
ID = 1525
pos = 0,-74*const(size.yscale)
postype = p1 
facing = facing
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = 1*const(size.xscale),1.1*const(size.yscale)
sprpriority = 6
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
pausemovetime = 9999999
supermovetime = 9999999

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 196
ID = 196
pos = 10*const(size.xscale),30*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 9999999
supermovetime = 9999999
scale = .45*const(size.xscale),.45*const(size.yscale)
sprpriority = 10
ontop = 0
ownpal = 1
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = !time
anim = 196
ID = 196
pos = 10*const(size.xscale),30*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 9999999
supermovetime = 9999999
scale = .45*const(size.xscale),.45*const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
remappal = 0,33
trans = sub

[State 0, Helper]
type = Helper
trigger1= !time
helpertype = normal ;player
name = "puppet"
ID = 1510
stateno = 1510
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 0
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)

[State 0, Helper]
type = Helper
trigger1 = timemod = 26,0
helpertype = normal ;player
name = "AfterImage"
ID = 9925
stateno = 9925
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
sprpriority = 4
supermovetime = 99999999
pausemovetime = 99999999
size.xscale = 1;*const(size.xscale)
size.yscale = 1;*const(size.yscale)

[State 0, Super Armor]
type = Helper
triggerall = !numhelper(9000)
trigger1 = !time
helpertype = Normal
name = "Super Armor"
ID = 9000
stateno = 9000
pos = 999,999
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
[State 0, NotHitBy]
type = NotHitBy
trigger1 = numhelper(9000)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1

; Super Portrait
[State 0, Portrait]
type = Explod
trigger1 = !time
anim = 1570
ID = 1570
pos= 70,Floor((1.33*GameHeight/GameWidth)*120)
scale=.45,.45
postype = back
facing = 1
bindtime = -1
removetime = -2
vel = 3,0
accel = -.1,0
pausemovetime = 9999
supermovetime = 9999
sprpriority = -25
ontop = 0
ownpal = 1
removeongethit = 0
[State 0, Stripes]
type = Explod
trigger1 = !time
anim = 1271
ID = 1271
pos= 160,Floor((1.33*GameHeight/GameWidth))
scale=.45,.45
postype = back
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 9999
supermovetime = 9999
sprpriority = -26
ontop = 0
ownpal = 1
removeongethit = 0
remappal = 10,0+var(22)
[State 0, Stripes]
type = Explod
trigger1 = !time
anim = 1271
ID = 1271
pos= 160,Floor((1.33*GameHeight/GameWidth*230))
scale=.45,.45
postype = back
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 9999
supermovetime = 9999
sprpriority = -26
ontop = 0
ownpal = 1
removeongethit = 0
remappal = 10,0+var(22)
;Super Portrai

;charge
[State 0, Aura]
type = Explod
trigger1 = time = 0
anim = 790
ID = 790
pos = 7*const(size.xscale),-110*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,39
supermovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 5
anim = 790
ID = 790
pos = 7*const(size.xscale),-110*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,37
supermovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 0||time = 5
anim = 790
ID = 790
pos = 7*const(size.xscale),-110*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33
supermovetime = 30
;charge

;charge2

[State 1500, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 58
movetime = 58
anim = -1
sound = -1
pos = 32,-80
darken = 0
unhittable = 1

[State 1500, VarAdd]
type = VarAdd
trigger1 = time < 19 && Var(12) > -80
v = 12
value = -4
[State 1500, VarSet]
type = Varset
trigger1 = time = 20
v = 12
value = -80
[State 1500, VarSet]
type = Varset
trigger1 = time = 50
v = 12
value = 0
[State 1500, VarAdd]
type = VarAdd
triggerall = Var(12) < 0
trigger1 = time = [40,49]
v = 12
value = 4
[State 1500, BGColorFX]
type = BGPalFX
trigger1 = time > 0
time = 1
add = Var(12),Var(12),Var(12)
ignorehitpause = 1

[State 3000, PlaySnd - Super Charge]
type = PlaySnd
trigger1 = Time = 0
value = S1,2
volume = 100
[State 3000, PlaySnd - Super Charge]
type = PlaySnd
trigger1 = Time = 0
value = S950,1
volume = 200
[State 3000, PlaySnd - Super Charge]
type = PlaySnd
trigger1 = Time = 0
value = S950,0
volume = 100
[State 3000, Super Charge]
type = Explod
trigger1 = Time = 0
anim = 7405
ID = 7400
pos = 7*const(size.xscale),-110*const(size.yscale)
sprpriority = -6
supermove = 1
removetime = -2
postype = p1
bindtime = -1
ownpal = 1
scale = .5*const(size.xscale),.5*const(size.xscale)
removeongethit = 1
ontop = 0
supermovetime 	= 999
ignorehitpause  = 1
remappal = 0,33
trans = sub
[State 3000, Super Charge]
type = Explod
trigger1 = Time = 0
anim = 7405
ID = 7400
pos = 7*const(size.xscale),-110*const(size.yscale)
sprpriority = -5
supermove = 1
removetime = -2
postype = p1
bindtime = -1
ownpal = 1
scale = .5*const(size.xscale),.5*const(size.xscale)
removeongethit = 1
ontop = 0
supermovetime 	= 999
ignorehitpause  = 1
remappal = 10,0+var(22)

[State 183, Zoom1]
type = Zoom
triggerall = p2bodydist x = [0,100]
trigger1 = time = [0,45]
pos = ((pos x)+facing*10 / (1/Camerazoom*1.5)) * CameraZoom, (pos y)-5 / (1/Camerazoom*1.5) * CameraZoom
scale = 1.2+time*.0001/camerazoom
space = screen
lag = .4
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom1]
type = Zoom
triggerall = p2bodydist x != [0,100]
trigger1 = time = [0,45]
pos = ((pos x)+facing*20 / (1/Camerazoom*1.5)) * CameraZoom, (pos y)-5 / (1/Camerazoom*1.5) * CameraZoom
scale = 1.2+time*.0001
space = screen
lag = .4
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom2]
type = Zoom
trigger1 = time = [45,55]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y +cond(statetype = A,40,0)) / (1/Camerazoom*1.5) * CameraZoom
scale = 1
lag = .6
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
;charge2

[State 200, 1]
type = HitDef
triggerall = !numexplod(3000)
trigger1 = !movecontact
attr = S, HA
animtype  = Hard
damage    = 60,10
hitflag = MAFD
guardflag = MA
pausetime = 0,0
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,8
guardsound = S4,1
ground.type = High
ground.slidetime = 20
ground.hittime  = 23
air.hittime = 80
ground.velocity = -6+var(54)*.008,-3+var(54)*.008
air.velocity = -7+var(54)*.008,-6+var(54)*.1
Fall = 1
air.fall = 1
kill = 0
guard.kill = 0
fall.recover = 0
Envshake.time = 18
guard.cornerpush.veloff = -17
airguard.cornerpush.veloff = -14
ground.cornerpush.veloff = -22
air.cornerpush.veloff = -18
hitonce = 1
p1stateno = 1501
p2stateno = 82765
yaccel = .4
id = 1500
p2facing = 1

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 96*const(size.xscale),-8*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .27*const(size.xscale)
size.yscale = .27*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 59
value = S5,3
volume = 50

[State 0, Explod]
type = Explod
trigger1 = animelem = 12
anim = 1411
ID = 1511
pos = -1*const(size.xscale),-50*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 3*const(size.xscale),3*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
remappal = 10,0+var(22)

[State 0, 1330 Fix]
type = TargetState
triggerall = NumTarget(1330)
triggerall = !target(1330),ishelper
triggerall = target(1330),stateno = [82761,82763]
trigger1 = !time
value = 82764
ID = 1330
ignorehitpause = 1
persistent = 0

[State 200, End]
type = ChangeState
trigger1 = animtime = 0
value = 1509
ctrl = 0

;===============================================================================
; Succes
;-------------------------------------------------------------------------------
[Statedef 1501]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1501
sprpriority = -4

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 25   
value = 1
ignorehitpause = 1

[State 0, Suelo Roto]
type = Helper
triggerall = p2movetype = H
triggerall = numhelper(295) = 0
trigger1 = p2stateno = 82767
helpertype = normal
name = "Suelo Roto"
ID = 295
stateno = 295
pos = 0,-30
postype = p2
ownpal = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = timemod = 30,0
helpertype = normal ;player
name = "AfterImage"
ID = 9925
stateno = 9925
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
sprpriority = 4
supermovetime = 99999999
pausemovetime = 99999999
size.xscale = 1;*const(size.xscale)
size.yscale = 1;*const(size.yscale)

[State 0, Helper]
type = Helper
triggerall = NumTarget(1500)
trigger1 =!time
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 96*const(size.xscale),-8*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .28*const(size.xscale)
size.yscale = .28*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget(1500)
trigger1 = !time
time = 1
id = 1500
pos = 100*const(size.xscale),0
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = animelemtime(4)>3
anim = 1524
ID = 1524
pos = 49*const(size.xscale),-8*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
persistent = 0
remappal = 10,0+var(22)

[State 0, TargetLifeAdd]
type = TargetLifeAdd
triggerall = numtarget(1500)
trigger1 = animelem = 5
value = (cond(var(54) >= 70,-45,floor(-90+var(54)*.01)))+floor(var(2)*.1)
ID = 1500
kill = 0
absolute = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 5
value = S0,154
volumescale = 100
channel = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S5,7
volume = 50

[State 0, TargetState]
type = TargetState
triggerall = NumTarget(1500)
trigger1 = animelem = 5
value = 82766
ID = 1500
ignorehitpause = 1
[State 0, HitAdd]
type = HitAdd
triggerall = NumTarget(1500)
trigger1 = animelem = 5
value = 1
[State 0, EnvShake]
type = EnvShake
triggerall = NumTarget(1500)
trigger1 = animelem = 5
time = 10
freq = 70
ampl = -7
phase = 110
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
triggerall = NumTarget(1500)
trigger1 = animelem = 5
value = S1,9
volumescale = 150

[State 0, Helper]
type = Helper
triggerall = NumTarget(1500)
trigger1 = animelem = 5
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 15*const(size.xscale),-15*const(size.yscale)
postype = p2
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .3*const(size.xscale)
size.yscale = .3*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget(1500)
trigger1 = animelemtime(8)>0
time = 1
id = 1500
pos = 29*const(size.xscale),-71*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, TargetState]
type = TargetState
triggerall = NumTarget(1500)
trigger1 = animelem = 8
value = 82768
ID = 1500
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S2,1
volume = 50

[State 0, TargetLifeAdd]
type = TargetLifeAdd
triggerall = numtarget(1500)
trigger1 = animelem = 9||animelem = 10
value = cond(var(54) >= 70,-2,floor(-4+var(54)*.001))+floor(var(2)*.1)
ID = 1500
kill = 0
absolute = 1
ignorehitpause = 1

[State 0, HitAdd]
type = HitAdd
triggerall = numtarget(1500)
trigger1 = animelem = 9||animelem = 10
value = 1
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = NumTarget(1500)
trigger1 = animelem = 9||animelem = 10
value = 82769
ID = 1500
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = NumTarget(1500)
trigger1 = animelem = 9||animelem = 10
value = S7,28
volume = 50

[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 9||animelem = 10
time = 2

[State 0, Helper]
type = Helper
trigger1 = animelem = 9||animelem = 10
helpertype = normal
name = "sparkpeta"
ID = 023
stateno = 800
pos = 32*const(size.xscale),-91*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .22*const(size.xscale)
size.yscale = .22*const(size.yscale)
ignorehitpause = 1

[State 0, Explod]
type = Explod
triggerall = NumTarget(1500)
trigger1 = (animelemtime(8)>0) && (timemod = 2,0)
anim = 1503
ID = 1503
pos = 32*const(size.xscale),-91*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 6
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
angle = random%180
remappal = 10,0+var(22)

[State 183, Zoom1]
type = Zoom
triggerall = teammode != simul && enemynear,teammode != simul
trigger1 = animelemtime(5) < 0
pos = ((target(1500),pos x)+facing*15 / (1/Camerazoom*1.5)) * CameraZoom, ((target(1500),pos y) +50) / (1/Camerazoom*1.5) * CameraZoom
scale = 1/camerazoom*1.6+time*.0001
space = screen
lag = .4
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom2]
type = Zoom
triggerall = teammode != simul && enemynear,teammode != simul
trigger1 = animelemtime(5) > 0
pos = ((target(1500),pos x)+facing*15 / (1/Camerazoom*1.5)) * CameraZoom, ((target(1500),pos y) +50) / (1/Camerazoom*1.5) * CameraZoom
scale = 1/camerazoom*1.2
lag = .6
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 200, End]
type = ChangeState
trigger1 = !numtarget(1500)
value = 1509
ctrl = 0
[State 200, End]
type = ChangeState
trigger1 = time=140
value = 1505
ctrl = 0
;-------------------------------------------------------------------------------
; Helper
[Statedef 1502]
type    = S
movetype= I
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1502
sprpriority = -5

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 1411
ID = 1511
pos = -1*const(size.xscale),-50*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 3*const(size.xscale),3*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
remappal = 10,0+root,var(22)

[State 0, Helper]
type = Helper
triggerall = animelemtime(7)<0||var(4)=0
trigger1 = !numhelper(9930)
helpertype = normal ;player
name = "aura titan a"
ID = 9930
stateno = 9930
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999999
pausemovetime = 99999999
size.xscale = 1;*const(size.xscale)
size.yscale = 1;*const(size.yscale)
[State 0, Helper]
type = Helper
triggerall = animelemtime(7)<0||var(4)=0
trigger1 = !numhelper(9935)
helpertype = normal ;player
name = "aura titan b"
ID = 9935
stateno = 9935
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99999999
pausemovetime = 99999999
size.xscale = 1;*const(size.xscale)
size.yscale = 1;*const(size.yscale)

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 7
v = 4    
value = 1
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
ignorehitpause = 1
;-------------------------------------------------------------------------------
; Golpe
[Statedef 1505]
type    = S
movetype= A
physics = S
juggle  = 0
velset = -3,0
ctrl = 0
anim = 1505
sprpriority = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S0,153
volumescale = 100
channel = 5

[State 0, Aura]
type = Explod
trigger1 = numexplod(1526) = 0
anim = 1526
ID = 1526
pos = 0,-74*const(size.yscale)
postype = p1 
facing = facing
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1*const(size.xscale),1.1*const(size.yscale)
sprpriority = 6
ontop = 0
ownpal = 1
persistent = 0
removeongethit = 1
remappal = 10,0+var(22)
pausemovetime = 9999999
supermovetime = 9999999

[State 0, Helper]
type = Helper
trigger1 = !time
helpertype = normal ;player
name = "Titan Puppet"
ID = 1502
stateno = 1502
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 99
pausemovetime = 99
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 6   ;fv = 10
value = 0
ignorehitpause = 1

[State 183, Zoom1]
type = Zoom
trigger1 = time = [0,50]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y +cond(statetype = A,80,0)) / (1/Camerazoom*1.5) * CameraZoom;((pos x)/(1/camerazoom))* CameraZoom,((pos y)/(1/camerazoom))* CameraZoom
scale = 1/camerazoom*1.3
lag = .40
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999
[State 183, Zoom2]
type = Zoom
trigger1 = time = [50,60]
pos = ((pos x) / (1/Camerazoom*1.5)) * CameraZoom, (pos y +cond(statetype = A,80,0)) / (1/Camerazoom*1.5) * CameraZoom;pos x,pos y +camerazoom
scale = 1
lag = .82
ignorehitpause = 1
persistent = 1
supermovetime = 99999
pausemovetime = 99999

[State 0, Helper]
type = Helper
triggerall = NumTarget(1500)
trigger1 = animelem = 5
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = -2*const(size.xscale),-3*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .32*const(size.xscale)
size.yscale = .32*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
triggerall = NumTarget(1500)
trigger1 = animelemtime(5)
helpertype = normal
name = "sparkpeta"
ID = 027
stateno = 800
pos = -2*const(size.xscale),-3*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.02*const(size.xscale))+var(56)*.03
size.yscale = (.02*const(size.yscale))+var(56)*.03
ignorehitpause = 1
persistent = 8
[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 56    
value = 0
ignorehitpause = 1 
[State 0, VarAdd]
type = VarAdd
trigger1 = animelemtime(5)
v = 56
value = 1
ignorehitpause = 1

[State 0, TargetLifeAdd]
type = TargetLifeAdd
triggerall = numtarget(1500)
trigger1 = animelem = 4
value = cond(var(54) >= 70,-50,floor(-100+var(54)*.01))+floor(var(2)*.1)
ID = 1500
kill = 1
absolute = 1
ignorehitpause = 1

[State 0, HitAdd]
type = HitAdd
triggerall = NumTarget(1500)
trigger1 = animelem = 4
value = 1
[State 0, EnvShake]
type = EnvShake
triggerall = NumTarget(1500)
trigger1 = animelem = 4
time = 20
freq = 110
ampl = -15
phase = 160
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
triggerall = NumTarget(1500)
trigger1 = animelem = 4
value = S1,14
volumescale = 150

[State 0, PosSet]
type = PosSet
triggerall = numtarget(1500)
trigger1 = animelem = 4
x = (target(1500),pos x)+10
y = (target(1500),pos y)-15
ignorehitpause = 1
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = N         ;A,C,S,N
ignorehitpause = 1
[State 0, TargetState]
type = TargetState
triggerall = NumTarget(1500)
trigger1 = animelem = 4
value = 82770
ID = 1500
ignorehitpause = 1
[State 0, TargetBind]
type = TargetBind
triggerall = NumTarget(1500)
trigger1 = target(1500),stateno= 82770
time = 1
id = 1500
pos = 5*const(size.xscale),-5*const(size.yscale)
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = NumTarget(1500)
trigger1 = animelem = 6
value = 82771
ID = 1500
ignorehitpause = 1
[State 0, TargetDrop]
type = TargetDrop
trigger1 = animelem = 7
keepone = 0
ignorehitpause = 1

[State 0, Ay Caramba]
type = Helper
triggerall = NumTarget(1500)
triggerall = p2movetype = H
triggerall = numhelper(1530) = 0
trigger1 = target(1500),stateno = 82771
helpertype = normal
name = "Suelo Roto"
ID = 1530
stateno = 1530
pos = 0,-30
postype = p2
ownpal = 1
persistent = 0

;impact frame
[State 0, Trans]
type = Explod
triggerall = NumTarget(1500)
trigger1 = animelem = 4
anim = 1520
ID = 1520
pos= 160,Floor((1.33*GameHeight/GameWidth)*120)
scale=20,20
postype = back
facing = 1
bindtime = -1
removetime = -2
vel = 0,0
accel = 0,0
pausemovetime = 9999
supermovetime = 9999
sprpriority = 130
ontop = 1
ownpal = 1
removeongethit = 0
[State 0, Explod]
type = Explod
triggerall = NumTarget(1500)
trigger1 = animelem = 4
anim = 1521
ID = 1521
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 131
ontop = 1
ownpal = 1
removeongethit = 1
remappal = 1,100
[State 0, Explod]
type = Explod
triggerall = NumTarget(1500)
trigger1 = animelem = 4
anim = 1523
ID = 1523
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 132
ontop = 1
ownpal = 1
removeongethit = 1
remappal = 0,33

[State 0, Explod]
type = Explod
triggerall = NumTarget(1500)
trigger1 = animelem = 4
anim = 18002
ID = 18002
pos = 6*const(size.xscale),-8*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 8
pausemovetime = 0
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 133
removeongethit = 0
ontop = 1
ownpal = 1
remappal = 0,33

[State 0, Speedlines]
type = Explod
triggerall = NumTarget(1500)
trigger1 = animelem = 4
anim = 1522
ID = 1522
pos=160,Floor((1.33*GameHeight/GameWidth)*120)
scale=.54,.54
postype = back
facing = 1
bindtime = -1
removetime = -2
pausemovetime = 9999
supermovetime = 9999
sprpriority = 140
ontop = 1
ownpal = 1
persistent = 0
removeongethit = 0
remappal = 0,33

;impact frame

[State 0, PosAdd]
type = PosAdd
trigger1 = !animtime
x = 0
y = 57
ignorehitpause = 1

[State 0, Limitador]
type = Explod
trigger1 = !animtime
anim = 9999
ID = 1500
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 70
pausemovetime = 0
scale = 1,1
sprpriority = 0
persistent = 0
ownpal = 1
removeongethit = 1

[State 200, End]
type = ChangeState
trigger1 = !animtime
value = 50
ctrl = 0
[State 200, End]
type = ChangeState
triggerall = animelemtime(4)<0
trigger1 = !numtarget(1500)
value = 1509
ctrl = 0
;-------------------------------------------------------------------------------
; Fin
[Statedef 1509]
type    = S
movetype= I
physics = N
velset = 0,0
ctrl = 0
anim = 1509
sprpriority = 3

[State 200, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; puppet
[Statedef 1510]
type    = A
movetype= A
physics = N
juggle  = 0
Velset = 0,0
ctrl = 0
anim = 1510
facep2 = 0
sprpriority = 2

[State 5201, 5] 
type = PalFX
trigger1 = Time = 0
time = 4
add = 128,128,128 

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
time = 1
pos = 0,0
ignorehitpause = 1

[State 200, DestroySelf]
type = DestroySelf
trigger1 = (parent,stateno !=[1500,1501])
ignorehitpause= 1

;-------------------------------------------------------------------------------
; P2 - 1500-Hacia arriba
[Statedef 82765]
type    = A
movetype= H
physics = N
velset = -.1,-8
anim = 5050
ctrl = 0
sprpriority = 4
;Facep2 = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -1+time*4

[State 0, Gravity]
type = Gravity
trigger1 = time>2
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1
ignorehitpause = 1

[State 0, SprPriority]
type = SprPriority
trigger1 = 1
value = 3
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = (5050);+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 200, End]
type = SelfState
trigger1 = time = 120
value = 5050
ctrl = 0

;-------------------------------------------------------------------------------
; P2 - 1500-Hacia el Suelo
[Statedef 82766]
type    = A
movetype= H
physics = N
juggle  = 1
anim = 5050
velset = .15,8
ctrl = 0
sprpriority = 4
Facep2 = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 0
value = 5061;+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 5

[State 200, End]
type = ChangeState
trigger1 = pos y >= -10
value = 82767
;-------------------------------------------------------------------------------
; P2 - 1500-Empotrado en el Suelo
[Statedef 82767]
type    = S
movetype= H
physics = N
juggle  = 1
anim = 5110
velset = 0,0
ctrl = 0
sprpriority = 5

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time>4
value = 10-time

[State 0, AngleDraw]
type = AngleDraw
trigger1 = !time
value = 0
scale = 0,0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time <5
value = 5170;+cond(authorname = "Burako",0,var(10))
elem = 1
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time >4
value = 5050;+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, PosSet]
type = PosSet
trigger1 = time < 5
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 5
x = 1.5
y = -7
[State 0, VelAdd]
type = VelAdd
trigger1 = time>3
y = .24
ignorehitpause = 1

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 5
statetype = A
movetype = H
physics = N

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 5

[State 0, EnvShake]
type = EnvShake
trigger1 = time = 0
time = 9

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 200, End]
type = Selfstate
trigger1 = time = 160
value = 5050
;-------------------------------------------------------------------------------
; P2 - 1500-SUELTAMEEE
[Statedef 82768]
type    = A
movetype= H
physics = N
juggle  = 1
anim = 5000
velset = 0,0
ctrl = 0
sprpriority = 4

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5300;+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 5

[State 200, End]
type = Selfstate
trigger1 = time = 160
value = 5050

;-------------------------------------------------------------------------------
; P2 - 1500- AHHHH
[Statedef 82769]
type    = A
movetype= H
physics = N
juggle  = 1
anim = 5000
velset = 0,0
ctrl = 0
sprpriority = cond(random<500,4,5)

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = (cond(random<500,5002,5001));+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = time%3=0
value = 10-random%20
ignorehitpause = 1
[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
scale = 1,1
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 5

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 200, End]
type = Selfstate
trigger1 = time = 160
value = 5050

;-------------------------------------------------------------------------------
; P2 - 1500- Moro Putaso
[Statedef 82770]
type    = A
movetype= H
physics = N
juggle  = 1
anim = 5110
velset = 0,0
ctrl = 0
sprpriority = 6

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = (5101);+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = 199
scale = 1,1
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 5

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0
ignorehitpause = 1

[State 200, End]
type = Selfstate
trigger1 = time = 160
value = 5050

;-------------------------------------------------------------------------------
; P2 - AYUDAME
[Statedef 82771]
type    = A
movetype= H
physics = N
juggle  = 0
ctrl = 0
sprpriority = 1
Facep2 = 0

;---

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -15
y = -30

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = time < 30
trigger1 = time > 0 && ScreenPos Y <= 0
x = -40;cond(random<500,30,-30)
y = 30

[State 0, VelSet]
type = VelSet
triggerall = time < 30
trigger1 = time > 0 && pos y >= -5
x = 40;cond(random<500,30,-30)
y = -30

[State 0, VelSet]
type = VelSet
triggerall = time < 30
trigger1 = time > 0 && backedgedist < 0
x = 40
y = 30;cond(random<500,30,-30)

[State 0, VelSet]
type = VelSet
triggerall = time < 30
trigger1 = time > 0 && frontedgedist < 0
x = -40
y = -30;cond(random<500,30,-30)

[State 0, EnvShake]
type = EnvShake
triggerall = time < 30
trigger1 = time > 0 && pos y >= -5
trigger2 = time > 0 && ScreenPos Y <= 0
trigger3 = time > 0 && backedgebodydist < 0
trigger4 = time > 0 && frontedgebodydist < 0
time = 2
ampl = -2
ignorehitpause = 1

[State 0,LifeAdd]
type = LifeAdd
triggerall = time < 30
trigger1 = time > 0 && pos y >= -5
trigger2 = time > 0 && ScreenPos Y <= 0
trigger3 = time > 0 && backedgebodydist < 0
trigger4 = time > 0 && frontedgebodydist < 0
value = -2
ignorehitpause = 1

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = time >= 30
y = 9
x = cond(vel x >= 0,26,-26)
;---
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = 1
value = 5050;+cond(authorname = "Burako",0,var(10))
elem = 1

[State 0, AngleDraw]
type = AngleDraw
trigger1 = 1
value = -1-(time*20)

[State 0, PlayerPush]
type = PlayerPush
trigger1 = 1
value = 0

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 5

[State 200, End]
type = ChangeState
trigger1 = time >= 30 && pos y >=-5
value = 82737

;-------------------------------------------------------------------------------
; desmadre en P2
[Statedef 1530]
type    = S
movetype= I
physics = N
ctrl = 0
anim = 9999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time > 0 && pos y >= -5
trigger2 = time > 0 && ScreenPos Y <= 0
trigger3 = time > 0 && backedgebodydist < 0
trigger4 = time > 0 && frontedgebodydist < 0
value = S1,13
volumescale = 50
persistent = 3

[State 2001, PosAdd]
type = PosAdd
trigger1 = 1
x = p2dist x
y = p2dist y

[State 0, Down]
type = Explod
trigger1 = time > 0 && pos y >= -5
anim = 8280
ID = 8280
pos = 0,-14*const(size.yscale)
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .2*const(size.xscale),.2*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 0
trans = add
remappal = 10,0+root,var(22)
persistent = 3
[State 0, Down]
type = Explod
trigger1 = time > 0 && pos y >= -5
anim = 8280
ID = 8280
pos = 0,-14*const(size.yscale)
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .2*const(size.xscale),.2*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 0
trans = sub
remappal = 0,33
persistent = 3

[State 0, Up]
type = Explod
trigger1 = time > 0 && ScreenPos Y <= 0
anim = 8280
ID = 8280
pos = 0,-14*const(size.yscale)
postype = p1
facing = -1
vfacing = -1
bindtime = 1
removetime = -2
scale = .2*const(size.xscale),.2*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 0
trans = add
remappal = 10,0+root,var(22)
persistent = 3
[State 0, Up]
type = Explod
trigger1 = time > 0 && ScreenPos Y <= 0
anim = 8280
ID = 8280
pos = 0,-14*const(size.yscale)
postype = p1
facing = -1
vfacing = -1
bindtime = 1
removetime = -2
scale = .2*const(size.xscale),.2*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 0
trans = sub
remappal = 0,33
persistent = 3

[State 0, Back]
type = Explod
trigger1 = time > 0 && backedgebodydist < 0
anim = 8280
ID = 8280
pos = 0,-25*const(size.yscale)
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .2*const(size.xscale),.2*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 0
trans = add
remappal = 10,0+root,var(22)
angle = 90
persistent = 3
[State 0, Back]
type = Explod
trigger1 = time > 0 && backedgebodydist < 0
anim = 8280
ID = 8280
pos = 0,-25*const(size.yscale)
postype = p1
facing = -1
vfacing = 1
bindtime = 1
removetime = -2
scale = .2*const(size.xscale),.2*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 0
trans = sub
remappal = 0,33
angle = 90
persistent = 3

[State 0, Fwd]
type = Explod
trigger1 = time > 0 && frontedgebodydist < 0
anim = 8280
ID = 8280
pos = 0,-25*const(size.yscale)
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .2*const(size.xscale),.2*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 0
trans = add
remappal = 10,0+root,var(22)
angle = 90
persistent = 3
[State 0, Fwd]
type = Explod
trigger1 = time > 0 && frontedgebodydist < 0
anim = 8280
ID = 8280
pos = 0,-25*const(size.yscale)
postype = p1
facing = 1
vfacing = 1
bindtime = 1
removetime = -2
scale = .2*const(size.xscale),.2*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 0
trans = sub
remappal = 0,33
angle = 90
persistent = 3

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
movecamera = 0,0
ignorehitpause = 1

[State 200, End]
type = Destroyself
trigger1 = enemy,stateno != 82771
;===============================================================================
; Kamehameha
;-------------------------------------------------------------------------------
; Charging/Shooting
[Statedef 1600]
type    = S
movetype= A
physics = S
juggle  = 0
velset = -4.5,0
ctrl = 0
anim = 1600
poweradd = -400
sprpriority = 2

[State 0, PosAdd]
type = PosAdd
triggerall = !cond(facing = 1,pos x > enemynear,pos x+7,pos x < enemynear,pos x-7)
triggerall = animtime < 12
trigger1 = frontedgedist < 50+var(55);11
x = -2
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
triggerall = !cond(facing = 1,pos x > enemynear,pos x+7,pos x < enemynear,pos x-7)
trigger1 = frontedgebodydist < 60 && animelem = 5
x = -3
y = 0
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S3,1
volumescale = 140
channel = 9

[State 0, PowerAdd]
type = PowerAdd
trigger1 = animelem = 5
value = -400-var(55)*2
ignorehitpause = 1

;:____ CHARGE
[State 0, ChangeAnim]
type = ChangeAnim
triggerall =  animelemtime(3)>=0&&animelemtime(4)<=0
trigger1 = (time<20) || (command ="hold_z"&&time<100)  && !(ailevel)
trigger2 = (time<20) || (command ="hold_z"&&time<100)  && (ailevel) && (prevstateno != [200,430])
value = anim
elem = 3
[State 0, VarAdd]
type = VarAdd
triggerall = animelem = 3 && time > 24
trigger1 = timemod = 3,0
v = 55
value = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 55    
value = 0
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 2||time = 55 && animelem = 3
anim = 1606
ID = 1606
pos = 0,-25*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = (.3+var(55)*.01)*const(size.xscale),(.3+var(55)*.01)*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 11,0+var(22)

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 2
ID = 1606
pos = 0,-25*const(size.yscale)
postype = p1  ;p2,front,back,left,right
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 3
ID = 1606
pos = -10*const(size.xscale),-26.4*const(size.yscale)
postype = p1  ;p2,front,back,left,right
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 4
ID = 1606
pos = -4*const(size.xscale),-27.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 5
id = 1606
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 1605
ID = 1605
pos = 26*const(size.xscale),-25.4*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 11,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = animelem = 1
anim = 1605
ID = 1605
pos = 26*const(size.xscale),-25.4*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,33
trans = sub

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 2
ID = 1605
pos = 0,-25*const(size.yscale)
postype = p1  ;p2,front,back,left,right
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 3
ID = 1605
pos = -10*const(size.xscale),-27.4*const(size.yscale)
postype = p1  ;p2,front,back,left,right
scale = (.3+var(55)*.002)*const(size.xscale),(.3+var(55)*.002)*const(size.yscale)
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 4
ID = 1605
pos = -4*const(size.xscale),-27.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = animelem = 5
id = 1605
ignorehitpause = 1
;:____ CHARGE

;:____ VFX
[State 0, Viento Grande]
type = Explod
trigger1 = animelem = 5
anim = 7022
ID = 7022
pos = -10*const(size.xscale),0
postype = p1
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 2
ontop = 0
ownpal = 1
vel = -.2,0
accel = -.01,0
removeongethit = 1
persistent = 0
remappal = 0,38
[State 0, Fly Lines]
type = Helper
trigger1 = animelem = 5||animelem = 6||animelem = 7
helpertype = normal
name = "Fly Lines"
ID = 6000
stateno = 6000
pos = (-15+random%8)*const(size.xscale),(-5-random%35)*const(size.yscale)
postype = p1
facing = 1
ownpal = 1
Size.Xscale = .155*const(size.xscale)
Size.Yscale = .12*const(size.yscale)
size.shadowoffset = 0;angulo

[State 0, Viento Pequeo]
type = Explod
trigger1 = animelem = 5||animelem = 7
anim = 7022
ID = 7022
pos = (-1-random%11)*const(size.xscale),0
postype = p1
scale = .1*const(size.xscale),.1*const(size.yscale)
sprpriority = 1+random%4
ontop = 0
ownpal = 1
removeongethit = 1
vel = (-1-random%3)*.3,0
accel = -.005,0
remappal = 0,38
;:____ VFX

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 4
value = S0,100
volumescale = 100
channel = 5

[State 0, Helper]
type = Helper
trigger1 = animelem = 5
helpertype = normal ;player
name = "BEAM"
ID = 1610
stateno = 1610
pos = (24+var(55)*.11)*const(size.xscale),-30*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 1
pausemovetime = 0
size.xscale = (1+var(55)*.009)*const(size.xscale)
size.yscale = (1+var(55)*.009)*const(size.yscale)
persistent = 0
size.shadowoffset = var(55) ;poder del ataque
ignorehitpause = 1

;charge
[State 0, PosSet]
type = PosSet
trigger1 = !time
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = !time
y = 0
ignorehitpause = 1

[State 5201, 5] 
type = PalFX
trigger1 = Time = 0
time = 4
add = 128,128,128 
[State 3000, PlaySnd - Super Charge]
type = PlaySnd
trigger1 = Time = 0
value = S1,2
volume = 100

[State 0, Aura]
type = Explod
trigger1 = time = 0
anim = 790
ID = 790
pos = -10*const(size.xscale),-26.4*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,36
supermovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 5
anim = 790
ID = 790
pos = -10*const(size.xscale),-26.4*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,37
supermovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 0||time = 5
anim = 790
ID = 790
pos = -10*const(size.xscale),-26.4*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33
supermovetime = 30
;charge

[State 0, Vanish]
type = Helper
Triggerall = !numhelper(701)
triggerall = numhelper(1610)
trigger1 = helper(1610),var(12)=1
helpertype = normal
name = "Helper de Conexiones"
ID = 701
stateno = 700
pos = 999999,999999
postype = p1

[State 0, Supers]
type = Explod
Triggerall = numexplod(700) = 0
triggerall = numhelper(1610)
trigger1 = helper(1610),var(12)=1
anim = 9999
ID = 700
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 10
pausemovetime = 0
scale = 1,1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 950, Y]
type = ChangeState
triggerall = numhelper(1610)
triggerall = numhelper(953) = 0
trigger1 = ailevel = 0 && command = "y" && helper(1610),var(12)=1
trigger2 = ailevel > 0 && helper(1610),var(12)=1 && random < (ailevel * 100)/4
value = 950

[State 200, End]
type = ChangeState
trigger1 = animelemtime(5)>0 && !numhelper(1610)
value = 1601
ctrl = 0
[State 200, End]
type = ChangeState
triggerall = numhelper(1610)
trigger1 = animelemtime(5)>0 && helper(1610),stateno = 1615
value = 1601
ctrl = 0
;-------------------------------------------------------------------------------
; Back to Idle
[Statedef 1601]
type    = S
movetype= A
physics = S
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1601
sprpriority = 2

[State 950, Y]
type = ChangeState
triggerall = numhelper(1610)
triggerall = numhelper(953) = 0
trigger1 = ailevel = 0 && command = "y" && helper(1610),var(12)=1
trigger2 = ailevel > 0 && helper(1610),var(12)=1 && random < (ailevel * 100)/4
value = 950

[State 200, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; Beam BALLS
[Statedef 1610]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1622
sprpriority = 2

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = (24+const(size.shadowoffset)*.08)*parent,const(size.xscale),-30*parent,const(size.yscale)
ignorehitpause = 1

[State 0, Life]
type = VarSet
trigger1 = !time
v = 1   
value = 90+parent,const(size.shadowoffset)*2
ignorehitpause = 1

;----hit
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = movecontact
value = 9999
persistent = 0
ignorehitpause = 1
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = numhelper(1612)
trigger1 = helper(1612),movecontact
value = 9999
persistent = 0
ignorehitpause = 1

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,SP       
hitflag = MAF        
guardflag = MA       
animtype = hard      
air.animtype = medium
damage = 2+floor(parent,const(size.shadowoffset)*.2),1+floor(parent,const(size.shadowoffset)*.1)
pausetime = 0,0
guard.pausetime = 3,2
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,18
guardsound = S4,0
ground.type = high      
ground.slidetime = 20
ground.hittime = 30
air.hittime = 40
guard.dist = 205
ground.velocity = (-8-parent,const(size.shadowoffset)*.05)*const(size.xscale),0
guard.velocity = (-10-parent,const(size.shadowoffset)*.05)*const(size.xscale)
air.velocity = (-6-parent,const(size.shadowoffset)*.05)*const(size.xscale),cond(enemynear,pos y > -10,-1,.5)
airguard.velocity = (-10-parent,const(size.shadowoffset)*.05)*const(size.xscale),-3
ground.cornerpush.veloff = -4-parent,const(size.shadowoffset)*.05
air.cornerpush.veloff = -4-parent,const(size.shadowoffset)*.05
guard.cornerpush.veloff = -5-parent,const(size.shadowoffset)*.05
airguard.cornerpush.veloff = -5-parent,const(size.shadowoffset)*.05
forcestand = 1
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 20
down.bounce = 0
envshake.time = 3+ceil(parent,const(size.shadowoffset))
yaccel = .4

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = (30+const(size.shadowoffset)*.08)*const(size.xscale),0
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .16+parent,const(size.shadowoffset)*.002*const(size.xscale)
size.yscale = .16+parent,const(size.shadowoffset)*.002*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 023
stateno = 800
pos = (30+const(size.shadowoffset)*.08)*const(size.xscale),0
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .16+parent,const(size.shadowoffset)*.002*const(size.xscale)
size.yscale = .16+parent,const(size.shadowoffset)*.002*const(size.yscale)
ignorehitpause = 1
persistent = 0
;----hit

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S3,2
volumescale = 140
channel = 9

[State 0, BALLS]
type = Explod
trigger1 = !time
anim = 1610
ID = 1610
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 6
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 11,0+root,var(22)
[State 0, BALLS]
type = Explod
trigger1 = !time
anim = 1610
ID = 1710
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = -10
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 0,33
trans = sub

[State 0, SHAFT]
type = Explod
trigger1 = !time
anim = 1611
ID = 1611
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = .020,const(size.yscale)
sprpriority = 6
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 11,0+root,var(22)
[State 0, SHAFT]
type = Explod
trigger1 = !time
anim = 1611
ID = 1711
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = .020,const(size.yscale)
sprpriority = -10
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 0,33
trans = sub

[State 0, Add]
type = ModifyExplod
triggerall = numhelper(1612)
trigger1 = (helper(1612),Cond(1,(Helper(1612),parentdist x <0),0))
ID = 1611
scale = .02*abs(Pos x - (helper(1612), Pos x))+(helper(1612),vel x*.02),const(size.yscale)
[State 0, Sub]
type = ModifyExplod
triggerall = numhelper(1612)
trigger1 = (helper(1612),Cond(1,(Helper(1612),parentdist x <0),0))
ID = 1711
scale = .02*abs(Pos x - (helper(1612), Pos x))+(helper(1612),vel x*.02),const(size.yscale)

[State 0, Add]
type = ModifyExplod
triggerall = numhelper(1612)
trigger1 = !(helper(1612),Cond(1,(Helper(1612),parentdist x <0),0))
ID = 1611
scale = .02,const(size.yscale)
[State 0, Sub]
type = ModifyExplod
triggerall = numhelper(1612)
trigger1 = !(helper(1612),Cond(1,(Helper(1612),parentdist x <0),0))
ID = 1711
scale = .02,const(size.yscale)

[State 0, Glow]
type = Explod
trigger1 = !time
anim = 1614
ID = 1611
pos = 0,-pos y
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = cond(random < 500,1,-1)
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = .020,const(size.yscale)
sprpriority = -2
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 11,0+root,var(22)
[State 0, TornadoVFX]
type = Explod
trigger1 = !time
anim = 1613
ID = 1611
pos = -10*const(size.xscale),2*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = .020,const(size.yscale)
sprpriority = 6
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 11,0+root,var(22)

[State 0, Helper]
type = Helper
triggerall = numhelper(1612)
triggerall = !helper(1612),movecontact
triggerall = !helper(1612),movereversed
trigger1 = timemod = 4,0
helpertype = normal ;player
name = "SHAFT PARTS"
ID = 1621
stateno = 1621
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)

[State 0, Helper]
type = Helper
trigger1 = !time
helpertype = normal ;player
name = "HEAD"
ID = 1612
stateno = 1612
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = var(2) = 1
value = 1615
ctrl = 0
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = helper(1612),movehit && helper(1612),hitcount > 7
trigger2 = helper(1612),moveguarded && time > 60
trigger3 = root,stateno != 1600
trigger4 = helper(1612),time = 160
trigger5 = helper(1612),frontedgedist < -90
trigger6 = !numhelper(1612)
trigger7 = var(1) <= 1
trigger8 = time > 5 && facing = 1 && pos x > helper(1612),pos x +((43+const(size.shadowoffset)*.11)*root,const(size.xscale));(1+parent,const(size.shadowoffset)*.08)
trigger9 = time > 5 && facing != 1 && pos x < helper(1612),pos x -((43+const(size.shadowoffset)*.11)*root,const(size.xscale));(1+parent,const(size.shadowoffset)*.08)
trigger10 = helper(1612),movereversed && time > 40
v = 2    ;fv = 10
value = 1
ignorehitpause = 1
;-------------------------------------------------------------------------------
; Beam HEAD
[Statedef 1612]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 6+parent,const(size.shadowoffset)*.08,0
ctrl = 0
anim = 1620
sprpriority = 2

;Active Damage Scaling
[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = 1
value = (cond(var(54) >= 70,.1,1-var(54)*.009))+var(2)*.2
ignorehitpause = 1

;LiFE
[State 0, ParentVarAdd]
type = ParentVarAdd
triggerall = numhelper(1630)
trigger1 = helper(1630),gethitvar(damage)
v = 1
value = -helper(1630),gethitvar(damage)
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
triggerall = numhelper(1630)
trigger1 = helper(1630),gethitvar(damage)
x = (-7-parent,const(size.shadowoffset)*.01)*vel x*.8
y = 0
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = numhelper(1630)
trigger1 = helper(1630),gethitvar(damage)
x = (-vel x*.3)-parent,const(size.shadowoffset)*.009
y = 0
ignorehitpause = 1

;StrUGGLE
[State 0, PosAdd]
type = PosAdd
triggerall = numhelper(1630)
trigger1 =ailevel = 0 && helper(1630),gethitvar(damage) && root,command = "z"
trigger2 =ailevel > 0 && helper(1630),gethitvar(damage) && random < (ailevel * 50)
x = (7+parent,const(size.shadowoffset)*.006)*helper(1630),gethitvar(damage)/100
y = 0
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = numhelper(1630)
trigger1 =ailevel = 0 && helper(1630),gethitvar(damage) && root,command = "z"
trigger2 =ailevel > 0 && helper(1630),gethitvar(damage) && random < (ailevel * 50)
x = (.6+parent,const(size.shadowoffset)*.006)*helper(1630),gethitvar(damage)/100
y = 0
ignorehitpause = 1
[State 0, ParentVarAdd]
type = ParentVarAdd
triggerall = numhelper(1630)
trigger1 =ailevel = 0 && helper(1630),gethitvar(damage) && root,command = "z"
trigger2 =ailevel > 0 && helper(1630),gethitvar(damage) && random < (ailevel * 50)
v = 1
value = ceil(helper(1630),gethitvar(damage)*.4)
[State 0, MoveHitReset]
type = MoveHitReset
triggerall = numhelper(1630) 
trigger1 = helper(1630),gethitvar(damage); && hitcount >= 6
ignorehitpause = 1
[State 0, Onda]
type = Helper
triggerall = !movehit = 1||!moveguarded = 1
triggerall = numhelper(1630) 
trigger1 = helper(1630),gethitvar(damage)
helpertype = normal
name = "sparkpeta"
ID = 027
stateno = 800
pos = (30+parent,const(size.shadowoffset)*.08)*const(size.xscale),0
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.21+parent,const(size.shadowoffset)*.002)*const(size.xscale)
size.yscale = (.21+parent,const(size.shadowoffset)*.002)*const(size.yscale)
ignorehitpause = 1
persistent = 4

;CollISion
[State 0, VelAdd]
type = VelAdd
trigger1 = movecontact=1
trigger2 = parent,numhelper(1621)
trigger2 = Parent,Cond(1,(Helper(1621),movehit),0)
x = (-vel x*.45)-parent,const(size.shadowoffset)*.009
y = 0
ignorehitpause = 1
persistent = 4
[State 0, VelAdd]
type = VelAdd
trigger1 = vel x < 7+parent,const(size.shadowoffset)*.09
x = .3+parent,const(size.shadowoffset)*.006
y = 0
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = frontedgebodydist < 20+const(size.shadowoffset)*.08 && movecontact = 1
x = -6*vel x*.6
y = 0
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
triggerall = numtarget(1600)
trigger1 = target(1600),movetype = H
value = 1
movecamera = 0,0
ignorehitpause = 1
persistent = 4
[State 0, ScreenBound]
type = ScreenBound
triggerall = parent,numhelper(1621)
triggerall = frontedgebodydist > 25
trigger1 = Parent,Cond(1,(Helper(1621),MoveContact=1),0)
value = 1
movecamera = 0,0
ignorehitpause = 1
persistent = 4

[State 0, HEAD]
type = Explod
trigger1 = !time
anim = 1612
ID = 1612
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 11,0+root,var(22)
[State 0, HEAD]
type = Explod
trigger1 = !time
anim = 1612
ID = 1712
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 7
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 0,33
trans = sub

[State 0, Speedlines VFX]
type = Explod
trigger1 = timemod = 13,0 || !time;!time
anim = 1615
ID = 1612
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = cond(random < 500,1,-1)
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 9
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 11,0+root,var(22)

[State 0, TargetBind]
type = TargetBind
triggerall = numtarget(1600)
triggerall = movehit&&target(1600),movetype = H
triggerall = !target(1600),ishelper
triggerall = target(1600),statetype = A
trigger1 = target(1600),pos y > -10
time = 1
id = 1600
pos = (30+parent,const(size.shadowoffset)*.08)*const(size.xscale),0
ignorehitpause = 1
persistent = 0

[State 0, HitDef]
type = HitDef
triggerall = !cond(facing = 1,pos x > enemynear,pos x -(15+parent,const(size.shadowoffset)*.08),pos x < enemynear,pos x +(15+parent,const(size.shadowoffset)*.08))
triggerall = hitcount < 7
trigger1 = time%5=0;timemod = 5,0
attr = S,SP        
hitflag = MAF        
guardflag = MA       
animtype = hard      
air.animtype = medium
damage = 7+floor(parent,const(size.shadowoffset)*.2),2+floor(parent,const(size.shadowoffset)*.1)
pausetime = 2,4
guard.pausetime = 3,2
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,18
guardsound = S4,0
ground.type = high      
ground.slidetime = 20
ground.hittime = 30
air.hittime = 40
guard.dist = 205
ground.velocity = (-5-parent,const(size.shadowoffset)*.05)*const(size.xscale),0
guard.velocity = (-7-parent,const(size.shadowoffset)*.05)*const(size.xscale)
air.velocity = (-5-parent,const(size.shadowoffset)*.05)*const(size.xscale),.1
airguard.velocity = (-7-parent,const(size.shadowoffset)*.05)*const(size.xscale),-3
ground.cornerpush.veloff = -4-parent,const(size.shadowoffset)*.05
air.cornerpush.veloff = -4-parent,const(size.shadowoffset)*.05
guard.cornerpush.veloff = -5-parent,const(size.shadowoffset)*.05
airguard.cornerpush.veloff = -5-parent,const(size.shadowoffset)*.05
forcestand = 1
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 10
down.bounce = 0
id = 1600
envshake.time = 3+ceil(parent,const(size.shadowoffset))
yaccel = .4
[State 0, HitDef]
type = HitDef
triggerall = cond(facing = 1,pos x > enemynear,pos x -(15+parent,const(size.shadowoffset)*.08),pos x < enemynear,pos x +(15+parent,const(size.shadowoffset)*.08))
triggerall = hitcount < 7
trigger1 = time%5=0;timemod = 5,0
attr = S,SP        
hitflag = MAF        
guardflag = MA       
animtype = hard      
air.animtype = medium
damage = 7+floor(parent,const(size.shadowoffset)*.2),2+floor(parent,const(size.shadowoffset)*.1)
pausetime = 2,4
guard.pausetime = 3,2
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,18
guardsound = S4,0
ground.type = high      
ground.slidetime = 20
ground.hittime = 30
air.hittime = 40
guard.dist = 205
ground.velocity = (-14-parent,const(size.shadowoffset)*.05)*const(size.xscale),0
guard.velocity = (-17-parent,const(size.shadowoffset)*.05)*const(size.xscale)
air.velocity = (-14-parent,const(size.shadowoffset)*.05)*const(size.xscale),.1
airguard.velocity = (-17-parent,const(size.shadowoffset)*.05)*const(size.xscale),-3
ground.cornerpush.veloff = -4-parent,const(size.shadowoffset)*.05
air.cornerpush.veloff = -4-parent,const(size.shadowoffset)*.05
guard.cornerpush.veloff = -5-parent,const(size.shadowoffset)*.05
airguard.cornerpush.veloff = -5-parent,const(size.shadowoffset)*.05
forcestand = 1
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 10
down.bounce = 0
id = 1600
envshake.time = 3+ceil(parent,const(size.shadowoffset))
yaccel = .4
[State 0, HitDef]
type = HitDef
triggerall = hitcount > 6
trigger1 = time%5=0;timemod = 5,0
attr = S,SP        
hitflag = MAF        
guardflag = MA       
animtype = hard      
air.animtype = medium
damage = 30+floor(parent,const(size.shadowoffset)*.2),10+floor(parent,const(size.shadowoffset)*.1)
pausetime = 1,2
guard.pausetime = 3,2
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,19
guardsound = S4,0
ground.type = high      
ground.slidetime = 20
ground.hittime = 30
air.hittime = 40
guard.dist = 205
ground.velocity = -2,0
guard.velocity = -5*const(size.xscale)
air.velocity = -3*const(size.xscale),.2
airguard.velocity = -7*const(size.xscale),-3
ground.cornerpush.veloff = -2
air.cornerpush.veloff = -2
guard.cornerpush.veloff = -4
airguard.cornerpush.veloff = -4
forcestand = 1
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 16
down.bounce = 0
envshake.time = 12
persistent = 0
id = 1601
p2facing = 1
yaccel = .4
;p2stateno = ;82750

[State 0, TargetState]
type = TargetState
triggerall = numtarget(1601)
triggerall = movehit
trigger1 = !target(1601),ishelper
value = 82741
ID = 1601
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = (30+parent,const(size.shadowoffset)*.08)*const(size.xscale),0
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.21+parent,const(size.shadowoffset)*.002)*const(size.xscale)
size.yscale = (.21+parent,const(size.shadowoffset)*.002)*const(size.yscale)
ignorehitpause = 1
persistent = 4
[State 0, Helper]
type = Helper
triggerall = hitcount < 8
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 023
stateno = 800
pos = (30+parent,const(size.shadowoffset)*.08)*const(size.xscale),0
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = ((.21+hitcount*.0008)+parent,const(size.shadowoffset)*.002)*const(size.xscale)
size.yscale = ((.21+hitcount*.0008)+parent,const(size.shadowoffset)*.002)*const(size.yscale)
ignorehitpause = 1
persistent = 4
[State 0, Helper]
type = Helper
triggerall = hitcount > 7
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 024
stateno = 800
pos = (30+parent,const(size.shadowoffset)*.08)*const(size.xscale),0
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.4+parent,const(size.shadowoffset)*.002)*const(size.xscale)
size.yscale = (.4+parent,const(size.shadowoffset)*.002)*const(size.yscale)
ignorehitpause = 1
persistent = 5

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = hitcount > 7
trigger1 = movehit = 1 && numtarget(1601)
trigger2 = time>=160
v = 12   
value = 1
ignorehitpause = 1

[State 0, CLASH]
type = Helper
trigger1 = !time
helpertype = normal ;player
name = "CLASH"
ID = 1630
stateno = 1630
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
persistent = 0
size.ground.back = 15+ceil(parent,const(size.shadowoffset)*.08)
size.ground.front = 40+ceil(parent,const(size.shadowoffset)*.08)
size.air.back = 15+ceil(parent,const(size.shadowoffset)*.08)
size.air.front = 40+ceil(parent,const(size.shadowoffset)*.08)
size.height = 20+ceil(parent,const(size.shadowoffset)*.08)

[State 0, ChangeState]
type = ChangeState
trigger1 = parent,var(2) = 1
trigger2 = root,stateno != 1600
value = 1615
ctrl = 0
ignorehitpause = 1
;-------------------------------------------------------------------------------
; Beam End 
[Statedef 1615]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 9999
sprpriority = 2

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 1610
scale = const(size.xscale),const(size.yscale)-(time*.07*const(size.yscale))
trans = addalpha
alpha = 256-time*18,256
ignorehitpause = 1
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = numhelper(1612)
ID = 1611
scale = .02*abs(Pos x - (helper(1612), Pos x))+(helper(1612),vel x*.02),const(size.yscale)-(time*.07*const(size.yscale))
trans = addalpha
alpha = 256-time*19,256
ignorehitpause = 1
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 1612
scale = const(size.xscale),const(size.yscale)-(time*.07*const(size.yscale))
trans = addalpha
alpha = 256-time*18,256
ignorehitpause = 1
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = numhelper(1612)
ID = 1614
scale = .02*abs(Pos x - (helper(1612), Pos x))+(helper(1612),vel x*.02),const(size.yscale)
trans = addalpha
alpha = 30-time*3,256
ignorehitpause = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1710
ignorehitpause = 1
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1711
ignorehitpause = 1
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1712
ignorehitpause = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 30
id = 1610
ignorehitpause = 1
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 30
id = 1611
ignorehitpause = 1
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 30
id = 1612
ignorehitpause = 1
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 30
id = 1614
ignorehitpause = 1
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 30
id = 1615
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 30
trigger2 = root,stateno != [1600,1601]
removeexplods = 1
ignorehitpause = 1
;-------------------------------------------------------------------------------
; Beam SPARE SHAFT PARTS
[Statedef 1621]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 18+parent,const(size.shadowoffset)*.08,0
ctrl = 0
anim = 1621
sprpriority = 2

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = (Parent,Cond(1,(Helper(1612),frontedgedist <-10),0))
trigger1 = movehit = 1
v = 12   
value = 1
ignorehitpause = 1

[State 0, HitDef]
type = HitDef
triggerall = !(Parent,Cond(1,(Helper(1612),frontedgedist <-10),0))
trigger1 = !movecontact
attr = S,SP        
hitflag = MAF        
guardflag = MA       
animtype = hard      
air.animtype = medium
damage = 7+floor(parent,const(size.shadowoffset)*.2),2+floor(parent,const(size.shadowoffset)*.1)
pausetime = 0,0
guard.pausetime = 3,2
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,18
guardsound = S4,0
ground.type = high      
ground.slidetime = 20
ground.hittime = 30
air.hittime = 40
guard.dist = 205
ground.velocity = (-16-parent,const(size.shadowoffset)*.05)*const(size.xscale),0
guard.velocity = (-12-parent,const(size.shadowoffset)*.05)*const(size.xscale)
air.velocity = (-8-parent,const(size.shadowoffset)*.05)*const(size.xscale),cond(enemynear,pos y > -10,-1,1)
airguard.velocity = (-10-parent,const(size.shadowoffset)*.05)*const(size.xscale),-3
ground.cornerpush.veloff = -4-parent,const(size.shadowoffset)*.05
air.cornerpush.veloff = -4-parent,const(size.shadowoffset)*.05
guard.cornerpush.veloff = -5-parent,const(size.shadowoffset)*.05
airguard.cornerpush.veloff = -5-parent,const(size.shadowoffset)*.05
forcestand = 1
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 20
down.bounce = 0
envshake.time = 3+ceil(parent,const(size.shadowoffset))

[State 0, HitDef]
type = HitDef
triggerall = (Parent,Cond(1,(Helper(1612),frontedgedist <-10),0))
trigger1 = !movecontact
attr = S,SP        
hitflag = MAF        
guardflag = MA       
animtype = hard      
air.animtype = medium
damage = 7+floor(parent,const(size.shadowoffset)*.2),2+floor(parent,const(size.shadowoffset)*.1)
pausetime = 0,4
guard.pausetime = 3,2
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,18
guardsound = S4,0
ground.type = high      
ground.slidetime = 20
ground.hittime = 30
air.hittime = 40
guard.dist = 205
ground.velocity = (-3-parent,const(size.shadowoffset)*.05)*const(size.xscale),0
guard.velocity = (-6-parent,const(size.shadowoffset)*.05)*const(size.xscale)
air.velocity = (-2-parent,const(size.shadowoffset)*.05)*const(size.xscale),-4
airguard.velocity = (-6-parent,const(size.shadowoffset)*.05)*const(size.xscale),-3
ground.cornerpush.veloff = -4-parent,const(size.shadowoffset)*.05
air.cornerpush.veloff = -4-parent,const(size.shadowoffset)*.05
guard.cornerpush.veloff = -5-parent,const(size.shadowoffset)*.05
airguard.cornerpush.veloff = -5-parent,const(size.shadowoffset)*.05
forcestand = 1
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 20
down.bounce = 0
envshake.time = 3+ceil(parent,const(size.shadowoffset))

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = (30+const(size.shadowoffset)*.08)*const(size.xscale),0
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .16+parent,const(size.shadowoffset)*.002*const(size.xscale)
size.yscale = .16+parent,const(size.shadowoffset)*.002*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 023
stateno = 800
pos = (30+const(size.shadowoffset)*.08)*const(size.xscale),0
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .16+parent,const(size.shadowoffset)*.002*const(size.xscale)
size.yscale = .16+parent,const(size.shadowoffset)*.002*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = movecontact
trigger2 = Parent,Cond(1,(Helper(1612),stateno = 1615),0)
trigger3 = !parent,numhelper(1612)
trigger4 = facing = 1 && pos x > (Parent,Cond(1,(Helper(1612),Pos X),0)) -(15+parent,const(size.shadowoffset)*.08)
trigger5 = facing != 1 && pos x < (Parent,Cond(1,(Helper(1612),Pos X),0)) +(15+parent,const(size.shadowoffset)*.08)
trigger6 = Parent,Cond(1,(Helper(1612),MoveContact),0) ;&& !Parent,Cond(1,(Helper(1612),target,ishelper),0)
ignorehitpause = 1
;-------------------------------------------------------------------------------
; BEAM CLASH SYSTEM
[Statedef 1630]
type    = S
movetype= I
physics = N
juggle  = 0
ctrl = 0
anim = 1630
poweradd = 0
sprpriority = 2
velset = 0,0

[State 0, Width]
type = Width
trigger1 =1 
player = 5,8
ignorehitpause =1 
persistent = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT        
stateno = 1630
ignorehitpause = 1
[State 0, NotHitBy]
type = NotHitBy
trigger1 = prevstateno != 1630 && time < 5
trigger2 = prevstateno = 1630 && time < 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

;[State 0, Width]
;type = Width
;trigger1 = 1
;value = const(size.ground.front),const(size.ground.back)
;player = const(size.ground.front),const(size.ground.back)
;edge = const(size.ground.front),const(size.ground.back)
;ignorehitpause = 1
;persistent = 1

[State 0, PlayerPush]
type = PlayerPush
triggerall = prevstateno = 1630
trigger1 = time < 7
value = 1
ignorehitpause = 1
persistent = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0
ignorehitpause = 1
persistent = 1

[State 0, Turn]
type = Turn
trigger1 = parent,facing != facing
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = root,stateno != 1600
trigger2 = Parent,Cond(1,(Helper(1612),stateno = 1615),0)
trigger3 = !parent,numhelper(1612)
ignorehitpause = 1

;-------------------------------------------------------------------------------
; Beam BALLS ANGLE
[Statedef 1640]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1652
sprpriority = 2

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = (22+const(size.shadowoffset)*.08)*parent,const(size.xscale),-16*parent,const(size.yscale)
ignorehitpause = 1

[State 0, Life]
type = VarSet
trigger1 = !time
v = 1   
value = 90+parent,const(size.shadowoffset)*2
ignorehitpause = 1

;----hit
[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = movecontact
value = 9999
persistent = 0
ignorehitpause = 1
[State 0, ChangeAnim]
type = ChangeAnim
triggerall = numhelper(1642)
trigger1 = helper(1642),movecontact
value = 9999
persistent = 0
ignorehitpause = 1

[State 0, HitDef]
type = HitDef
trigger1 = !movecontact
attr = S,SP       
hitflag = MAF        
guardflag = MA       
animtype = hard      
air.animtype = medium
damage = 2+floor(parent,const(size.shadowoffset)*.2),1+floor(parent,const(size.shadowoffset)*.1)
pausetime = 0,0
guard.pausetime = 3,2
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,18
guardsound = S4,0
ground.type = high      
ground.slidetime = 20
ground.hittime = 30
air.hittime = 40
guard.dist = 205
ground.velocity = (-8-parent,const(size.shadowoffset)*.05)*const(size.xscale),0
guard.velocity = (-10-parent,const(size.shadowoffset)*.05)*const(size.xscale)
air.velocity = (-6-parent,const(size.shadowoffset)*.05)*const(size.xscale),cond(enemynear,pos y > -10,-1,.5)
airguard.velocity = (-10-parent,const(size.shadowoffset)*.05)*const(size.xscale),-3
ground.cornerpush.veloff = -4-parent,const(size.shadowoffset)*.05
air.cornerpush.veloff = -4-parent,const(size.shadowoffset)*.05
guard.cornerpush.veloff = -5-parent,const(size.shadowoffset)*.05
airguard.cornerpush.veloff = -5-parent,const(size.shadowoffset)*.05
forcestand = 1
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 20
down.bounce = 0
envshake.time = 3+ceil(parent,const(size.shadowoffset))

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = (25+const(size.shadowoffset)*.08)*const(size.xscale),(8+const(size.shadowoffset)*.08)*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .16+parent,const(size.shadowoffset)*.002*const(size.xscale)
size.yscale = .16+parent,const(size.shadowoffset)*.002*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 023
stateno = 800
pos = (25+const(size.shadowoffset)*.08)*const(size.xscale),(8+const(size.shadowoffset)*.08)*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .16+parent,const(size.shadowoffset)*.002*const(size.xscale)
size.yscale = .16+parent,const(size.shadowoffset)*.002*const(size.yscale)
ignorehitpause = 1
persistent = 0
;----hit

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S3,2
volumescale = 140
channel = 9

[State 0, BALLS]
type = Explod
trigger1 = numhelper(1642)
persistent = 0
anim = 1610
ID = 1610
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 7
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 11,0+root,var(22)
angle = -(atan(helper(1642),vel x/helper(1642),vel y)*180)/pi
[State 0, BALLS]
type = Explod
trigger1 = numhelper(1642)
persistent = 0
anim = 1610
ID = 1710
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 6
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 0,33
trans = sub
angle = -(atan(helper(1642),vel x/helper(1642),vel y)*180)/pi

[State 0, SHAFT]
type = Explod
trigger1 = numhelper(1642)
persistent = 0
anim = 1611
ID = 1611
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = .020,const(size.yscale)
sprpriority = 6
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 11,0+root,var(22)
angle = -(atan(helper(1642),vel x/helper(1642),vel y)*180)/pi
[State 0, SHAFT]
type = Explod
trigger1 = numhelper(1642)
persistent = 0
anim = 1611
ID = 1711
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = .020,const(size.yscale)
sprpriority = -10
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 0,33
trans = sub
angle = -(atan(helper(1642),vel x/helper(1642),vel y)*180)/pi

[State 0, Null]
type = Null
triggerall = numhelper(1642)
trigger1 =fvar(2):=((pos y)-helper(1642),pos y)
ignorehitpause =1
persistent = 1
[State 0, Null]
type = Null
triggerall = numhelper(1642)
trigger1 =fvar(1):=((pos x*facing)-helper(1642),pos x*facing)
ignorehitpause =1
persistent = 1
[State 0, Null]
type = Null
triggerall = numhelper(1642)
trigger1 =fvar(4):=-(atan(fvar(2)/fvar(1))*180)/pi
ignorehitpause =1
persistent = 1

[State 0, Add]
type = ModifyExplod
trigger1 = numexplod(1610)
ID = 1610
angle = fvar(4)
[State 0, Sub]
type = ModifyExplod
trigger1 = numexplod(1710)
ID = 1710
angle = fvar(4)

[State 0, Add]
type = ModifyExplod
triggerall = numhelper(1642)
trigger1 = (helper(1642),Cond(1,(Helper(1642),parentdist x <0),0))
ID = 1611
scale = (.015)*abs((Pos x*facing - (helper(1642), Pos x*facing))+(Pos y - (helper(1642), Pos y))),const(size.yscale)
angle = fvar(4)
[State 0, Sub]
type = ModifyExplod
triggerall = numhelper(1642)
trigger1 = (helper(1642),Cond(1,(Helper(1642),parentdist x <0),0))
ID = 1711
scale = (.015)*abs((Pos x*facing - (helper(1642), Pos x*facing))+(Pos y - (helper(1642), Pos y))),const(size.yscale)
angle = fvar(4)

[State 0, Add]
type = ModifyExplod
triggerall = numhelper(1642)
trigger1 = !(helper(1642),Cond(1,(Helper(1642),parentdist x <0),0))
ID = 1611
scale = .02,const(size.yscale)
angle = fvar(4)
[State 0, Sub]
type = ModifyExplod
triggerall = numhelper(1642)
trigger1 = !(helper(1642),Cond(1,(Helper(1642),parentdist x <0),0))
ID = 1711
scale = .02,const(size.yscale)
angle = fvar(4)

[State 0, TornadoVFX]
type = Explod
trigger1 = numhelper(1642)
persistent = 0
anim = 1613
ID = 1611
pos = -2.5*const(size.xscale),0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = .020,const(size.yscale)
sprpriority = 6
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 11,0+root,var(22)
angle = -(atan(helper(1642),vel x/helper(1642),vel y)*180)/pi

[State 0, Helper]
type = Helper
triggerall = numhelper(1642)
triggerall = !helper(1642),movecontact
triggerall = !helper(1642),movecontact
trigger1 = timemod = 4,0
helpertype = normal ;player
name = "SHAFT PARTS"
ID = 1651
stateno = 1651
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
size.height = const(size.height) ;angulo del rayo

[State 0, Helper]
type = Helper
trigger1 = !time
helpertype = normal ;player
name = "HEAD"
ID = 1642
stateno = 1642
pos = -300,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
size.height = const(size.height)
ignorehitpause = 1
persistent = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = var(2) = 1
value = 1645
ctrl = 0
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = helper(1642),movehit && helper(1642),hitcount > 3
trigger2 = helper(1642),moveguarded && time > 60
trigger3 = root,stateno != 1660
trigger4 = helper(1642),time = 150
trigger5 = helper(1642),frontedgedist < -90
trigger6 = helper(1642),pos y >=-20 && helper(1642),var(14) > 4
trigger7 = !numhelper(1642)
trigger8 = var(1) <= 1
trigger9 = time > 5 && facing = 1 && pos x > helper(1642),pos x +((43+const(size.shadowoffset)*.11)*root,const(size.xscale));(1+parent,const(size.shadowoffset)*.08)
trigger10 = time > 5 && facing != 1 && pos x < helper(1642),pos x -((43+const(size.shadowoffset)*.11)*root,const(size.xscale));(1+parent,const(size.shadowoffset)*.08)
trigger11 = helper(1642),movereversed && time > 40
trigger12 = numhelper(1651)
trigger12 = helper(1642),frontedgedist < -10 && helper(1651),movecontact
trigger13 = helper(1642),frontedgedist < -10 && helper(1642),movecontact
trigger14 = numhelper(1651)
trigger14 = helper(1642),pos y >=-20 && helper(1651),movecontact
v = 2    ;fv = 10
value = 1
ignorehitpause = 1
;-------------------------------------------------------------------------------
; Beam HEAD  ANGLE
[Statedef 1642]
type    = A
movetype= A
physics = N
juggle  = 0
velset = (const(size.height)/8),(const(size.height)/10)
ctrl = 0
anim = 1650
sprpriority = 2

;Active Damage Scaling
[State 0, AttackMulSet]
type = AttackMulSet
trigger1 = 1
value = (cond(var(54) >= 70,.1,1-var(54)*.009))+var(2)*.2
ignorehitpause = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = cond(facing = 1,pos x < parent,pos x,pos x > parent,pos x)
time = 2
persistent = 3

;LiFE
[State 0, ParentVarAdd]
type = ParentVarAdd
triggerall = numhelper(1655)
trigger1 = helper(1655),gethitvar(damage)
v = 1
value = -helper(1655),gethitvar(damage)
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
triggerall = numhelper(1655)
trigger1 = helper(1655),gethitvar(damage)
x = (-7-parent,const(size.shadowoffset)*.01)*vel x*.8
y = (-7-parent,const(size.shadowoffset)*.01)*vel y*.8
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = numhelper(1655)
trigger1 = helper(1655),gethitvar(damage)
x = (-vel x*.3)-parent,const(size.shadowoffset)*.009
y = (-vel y*.3)-parent,const(size.shadowoffset)*.009
ignorehitpause = 1

;StrUGGLE
[State 0, PosAdd]
type = PosAdd
triggerall = numhelper(1655)
trigger1 =ailevel = 0 && helper(1655),gethitvar(damage) && root,command = "z"
trigger2 =ailevel > 0 && helper(1655),gethitvar(damage) && random < (ailevel * 50)
x = (7+parent,const(size.shadowoffset)*.006)*helper(1655),gethitvar(damage)/100
y = (7+parent,const(size.shadowoffset)*.006)*helper(1655),gethitvar(damage)/100
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = numhelper(1655)
trigger1 =ailevel = 0 && helper(1655),gethitvar(damage) && root,command = "z"
trigger2 =ailevel > 0 && helper(1655),gethitvar(damage) && random < (ailevel * 50)
x = (.6+parent,const(size.shadowoffset)*.006)*helper(1655),gethitvar(damage)/100
y = (.6+parent,const(size.shadowoffset)*.006)*helper(1655),gethitvar(damage)/100
ignorehitpause = 1
[State 0, ParentVarAdd]
type = ParentVarAdd
triggerall = numhelper(1655)
trigger1 =ailevel = 0 && helper(1655),gethitvar(damage) && root,command = "z"
trigger2 =ailevel > 0 && helper(1655),gethitvar(damage) && random < (ailevel * 50)
v = 1
value = ceil(helper(1655),gethitvar(damage)*.4)
[State 0, MoveHitReset]
type = MoveHitReset
triggerall = numhelper(1655) 
trigger1 = helper(1655),gethitvar(damage); && hitcount >= 6
ignorehitpause = 1
[State 0, Onda]
type = Helper
triggerall = !movehit = 1||!moveguarded = 1
triggerall = numhelper(1655) 
trigger1 = helper(1655),gethitvar(damage)
helpertype = normal
name = "sparkpeta"
ID = 027
stateno = 800
pos = (30+parent,const(size.shadowoffset)*.08)*const(size.xscale),0
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.21+parent,const(size.shadowoffset)*.002)*const(size.xscale)
size.yscale = (.21+parent,const(size.shadowoffset)*.002)*const(size.yscale)
ignorehitpause = 1
persistent = 4

;CollISion
[State 0, VelAdd]
type = VelAdd
trigger1 = movecontact=1
trigger2 = parent,numhelper(1651)
trigger2 = Parent,Cond(1,(Helper(1651),movehit),0)
x = (-vel x*.55)-parent,const(size.shadowoffset)*.009
y = (-vel y*.65)-parent,const(size.shadowoffset)*.009
ignorehitpause = 1
persistent = 4

[State 0, PosAdd]
type = PosAdd
trigger1 = movehit=1
x = -5+(vel x*.3)
y = -6+(vel y*.35)
ignorehitpause = 1
persistent = 4
[State 0, PosAdd]
type = PosAdd
trigger1 = parent,numhelper(1651)
trigger1 = Parent,Cond(1,(Helper(1651),movehit),0)
trigger2 = movehit=1 && frontedgedist < 15
x = -5+(vel x*.25)
y = -6+(vel y*.3)
ignorehitpause = 1
persistent = 4

[State 0, VelAdd]
type = VelAdd
trigger1 = vel x < (const(size.height)/5)
x = .25+parent,const(size.shadowoffset)*.006
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
trigger1 = vel y < (const(size.height)/6)
y = .3+parent,const(size.shadowoffset)*.006
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = pos y > -30+const(size.shadowoffset)*.08 && movehit = 1
x = -10*vel x*.52
y = -10*vel y*.62
ignorehitpause = 1

;fX
[State 0, Polvo]
type = Explod
triggerall = frontedgedist > 5
trigger1 = pos y > -19
persistent = 5
anim = 1617
ID = 1617
pos = 6*const(size.xscale),-pos y
postype = p1
scale = 1*const(size.xscale),1*const(size.yscale)
sprpriority = 7+random%9
ontop = 0
bindtime = 0
ownpal = 1
removeongethit = 1
remappal = 0,35
[State 0, Polvo]
type = Explod
triggerall = frontedgedist > 5
trigger1 = pos y > -19
persistent = 5
anim = 1617
ID = 1617
pos = 6*const(size.xscale),-pos y
postype = p1
scale = 1*const(size.xscale),1*const(size.yscale)
sprpriority = -1
ontop = 0
bindtime = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33

[State 0, Ondas]
type = Explod
triggerall = frontedgedist > 5
trigger1 = pos y > -19
persistent = 9
anim = 7018
ID = 7018
pos = random%3,-pos y
postype = p1
scale = .4*const(size.xscale),.3*const(size.yscale)
sprpriority = -10
ontop = 0
bindtime = 0
ownpal = 1
removeongethit = 1
[State 0, Ondas]
type = Explod
triggerall = frontedgedist > 5
trigger1 = pos y > -19
persistent = 9
anim = 8220
ID = 8220
pos = random%3,-pos y
postype = p1
scale = .5*const(size.xscale),.4*const(size.yscale)
sprpriority = 3
ontop = 0
bindtime = 0
facing = cond(random<500,1,-1)
ownpal = 1
removeongethit = 1
;fX

[State 0, Suelo]
type = VarSet
trigger1 = !time
v = 14    
value = 0
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = pos y > -20
v =  14
value = 1
ignorehitpause = 1
persistent = 2

[State 0, VelAdd]
type = VelAdd
trigger1 = pos y > -20
x = (-vel x*.75)-parent,const(size.shadowoffset)*.009
y = (-vel y*.75)-parent,const(size.shadowoffset)*.009
ignorehitpause = 1
persistent = 2
[State 0, PosAdd]
type = PosAdd
trigger1 = pos y > -20
x = -9+(vel x*.32)
y = -9+(vel y*.3)
ignorehitpause = 1
persistent = 2

[State 0, PosSet]
type = PosSet
trigger1 = pos y > -20
y = -20
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = pos y > -20
x = 0
y = 0
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
triggerall = movehit=1
triggerall = numtarget(1600)
trigger1 = target(1600),movetype = H
value = 1
movecamera = 0,0
ignorehitpause = 1
persistent = 4
[State 0, ScreenBound]
type = ScreenBound
triggerall = parent,numhelper(1651)
triggerall = frontedgebodydist > 25
trigger1 = Parent,Cond(1,(Helper(1651),MoveContact=1),0)
value = 1
movecamera = 0,0
ignorehitpause = 1
persistent = 4

[State 0, HEAD]
type = Explod
trigger1 = !time
anim = 1612
ID = 1612
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 11,0+root,var(22)
angle = -45;-(atan(helper(1642),vel x/helper(1642),vel y)*180)/pi
[State 0, HEAD]
type = Explod
trigger1 = !time
anim = 1612
ID = 1712
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 7
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 0,33
trans = sub
angle = -45;-(atan(helper(1642),vel x/helper(1642),vel y)*180)/pi

[State 0, Add]
type = ModifyExplod
trigger1 = 1&&time>0
ID = 1612
angle = parent,fvar(4)
ignorehitpause = 1
[State 0, Sub]
type = ModifyExplod
trigger1 = 1&&time>0
ID = 1712
angle = parent,fvar(4)
ignorehitpause = 1

[State 0, Speedlines VFX]
type = Explod
trigger1 = timemod = 13,0 || time=0;!time
anim = 1615
ID = 1612
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 9
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 11,0+root,var(22)
angle = -45;-(atan(helper(1642),vel x/helper(1642),vel y)*180)/pi

[State 0, TargetBind]
type = TargetBind
triggerall = numtarget(1600)
triggerall = movehit&&target(1600),movetype = H
triggerall = !target(1600),ishelper
triggerall = target(1600),statetype = A
trigger1 = target(1600),pos y > pos y -25
time = 1
id = 1600
pos = (18+parent,const(size.shadowoffset)*.08)*const(size.xscale),30
ignorehitpause = 1
persistent = 0

[State 0, HitDef]
type = HitDef
triggerall = !cond(facing = 1,pos x > enemynear,pos x -(15+parent,const(size.shadowoffset)*.08),pos x < enemynear,pos x +(15+parent,const(size.shadowoffset)*.08))
triggerall = hitcount < 3
trigger1 = time%5=0;timemod = 5,0
attr = S,SP        
hitflag = MAF        
guardflag = MA       
animtype = hard      
air.animtype = medium
damage = 12+floor(parent,const(size.shadowoffset)*.2),2+floor(parent,const(size.shadowoffset)*.1)
pausetime = 2,3
guard.pausetime = 1,3
guard.hittime = 22
airguard.hittime = 22
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,18
guardsound = S4,0
ground.type = high      
ground.slidetime = 20
ground.hittime = 30
air.hittime = 40
guard.dist = 165
ground.velocity = (cond(p2dist x <0,-1,.7)-parent,const(size.shadowoffset)*.05)*const(size.xscale),0
guard.velocity = (-2-parent,const(size.shadowoffset)*.05)*const(size.xscale)
air.velocity = (-1-parent,const(size.shadowoffset)*.05)*const(size.xscale),cond(p2dist y >20,-1,2)
airguard.velocity = (-2-parent,const(size.shadowoffset)*.05)*const(size.xscale),2
ground.cornerpush.veloff = -2-parent,const(size.shadowoffset)*.05
air.cornerpush.veloff = -2-parent,const(size.shadowoffset)*.05
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
forcestand = 1
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 10
down.bounce = 0
id = 1600
envshake.time = 3+ceil(parent,const(size.shadowoffset))
[State 0, HitDef]
type = HitDef
triggerall = cond(facing = 1,pos x > enemynear,pos x -(15+parent,const(size.shadowoffset)*.08),pos x < enemynear,pos x +(15+parent,const(size.shadowoffset)*.08))
triggerall = hitcount < 3
trigger1 = time%5=0;timemod = 5,0
attr = S,SP        
hitflag = MAF        
guardflag = MA       
animtype = hard      
air.animtype = medium
damage = 12+floor(parent,const(size.shadowoffset)*.2),2+floor(parent,const(size.shadowoffset)*.1)
pausetime = 2,4
guard.pausetime = 1,3
guard.hittime = 22
airguard.hittime = 22
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,18
guardsound = S4,0
ground.type = high      
ground.slidetime = 20
ground.hittime = 30
air.hittime = 40
guard.dist = 165
ground.velocity = (-2-parent,const(size.shadowoffset)*.05)*const(size.xscale),0
guard.velocity = (-5-parent,const(size.shadowoffset)*.05)*const(size.xscale)
air.velocity = (-1-parent,const(size.shadowoffset)*.05)*const(size.xscale),cond(p2dist y >20,-1,2)
airguard.velocity = (-5-parent,const(size.shadowoffset)*.05)*const(size.xscale),2
ground.cornerpush.veloff = -2-parent,const(size.shadowoffset)*.05
air.cornerpush.veloff = -2-parent,const(size.shadowoffset)*.05
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
forcestand = 1
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 10
down.bounce = 0
id = 1600
envshake.time = 3+ceil(parent,const(size.shadowoffset))
[State 0, HitDef]
type = HitDef
triggerall = hitcount > 2
trigger1 = time%5=0;timemod = 5,0
attr = S,SP        
hitflag = MAF        
guardflag = MA       
animtype = hard      
air.animtype = medium
damage = 50+floor(parent,const(size.shadowoffset)*.2),10+floor(parent,const(size.shadowoffset)*.1)
pausetime = 2,8
guard.pausetime = 3,2
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,19
guardsound = S4,0
ground.type = high      
ground.slidetime = 20
ground.hittime = 30
air.hittime = 40
guard.dist = 165
ground.velocity = -2*const(size.xscale),-6*const(size.yscale)
guard.velocity = -5*const(size.xscale)
air.velocity = -2*const(size.xscale),-6*const(size.yscale)
yaccel = .36
airguard.velocity = -7*const(size.xscale),-3
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
guard.cornerpush.veloff = 0
airguard.cornerpush.veloff = 0
forcestand = 1
fall = 1
air.fall = 1
fall.recover = 1
fall.recovertime = 40
down.bounce = 0
envshake.time = 12
persistent = 0
id = 1601
p2facing = 1
;p2stateno = 82741;82750

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = (26+parent,const(size.shadowoffset)*.08)*const(size.xscale),(15+const(size.shadowoffset)*.08)*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.21+parent,const(size.shadowoffset)*.002)*const(size.xscale)
size.yscale = (.21+parent,const(size.shadowoffset)*.002)*const(size.yscale)
ignorehitpause = 1
persistent = 4
[State 0, Helper]
type = Helper
triggerall = hitcount < 4
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 023
stateno = 800
pos = (26+parent,const(size.shadowoffset)*.08)*const(size.xscale),(15+const(size.shadowoffset)*.08)*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = ((.21+hitcount*.0008)+parent,const(size.shadowoffset)*.002)*const(size.xscale)
size.yscale = ((.21+hitcount*.0008)+parent,const(size.shadowoffset)*.002)*const(size.yscale)
ignorehitpause = 1
persistent = 4
[State 0, Helper]
type = Helper
triggerall = hitcount > 3
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 024
stateno = 800
pos = (26+parent,const(size.shadowoffset)*.08)*const(size.xscale),(15+const(size.shadowoffset)*.08)*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.4+parent,const(size.shadowoffset)*.002)*const(size.xscale)
size.yscale = (.4+parent,const(size.shadowoffset)*.002)*const(size.yscale)
ignorehitpause = 1
persistent = 5

[State 0, ParentVarSet]
type = ParentVarSet
trigger1 = hitcount > 3
trigger1 = movehit = 1 && numtarget(1601)
trigger2 = time>=150
v = 12   
value = 1
ignorehitpause = 1

[State 0, CLASH]
type = Helper
trigger1 = !time
helpertype = normal ;player
name = "CLASH"
ID = 1655
stateno = 1655
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
persistent = 0
size.ground.back = 15+ceil(parent,const(size.shadowoffset)*.08)
size.ground.front = 40+ceil(parent,const(size.shadowoffset)*.08)
size.air.back = 15+ceil(parent,const(size.shadowoffset)*.08)
size.air.front = 40+ceil(parent,const(size.shadowoffset)*.08)
size.height = 20+ceil(parent,const(size.shadowoffset)*.08)

[State 0, ChangeState]
type = ChangeState
trigger1 = parent,var(2) = 1
trigger2 = root,stateno != 1660
value = 1645
ctrl = 0
ignorehitpause = 1
;-------------------------------------------------------------------------------
; Beam End  ANGLE
[Statedef 1645]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 9999
sprpriority = 2

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 1610
scale = const(size.xscale),const(size.yscale)-(time*.07*const(size.yscale))
trans = addalpha
alpha = 256-time*18,256
angle = cond(ishelper(1642),parent,fvar(4),fvar(4))
ignorehitpause = 1
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = numhelper(1642)
ID = 1611
scale = (.015)*abs((Pos x*facing - (helper(1642), Pos x*facing))+(Pos y - (helper(1642), Pos y))),const(size.yscale)-(time*.07*const(size.yscale))
trans = addalpha
alpha = 256-time*19,256
angle = cond(ishelper(1642),parent,fvar(4),fvar(4))
ignorehitpause = 1
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = 1
ID = 1612
scale = const(size.xscale),const(size.yscale)-(time*.07*const(size.yscale))
trans = addalpha
alpha = 256-time*18,256
angle = cond(ishelper(1642),parent,fvar(4),fvar(4))
ignorehitpause = 1
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = numhelper(1642)
ID = 1614
scale = (.015)*abs((Pos x*facing - (helper(1642), Pos x*facing))+(Pos y - (helper(1642), Pos y))),const(size.yscale)
trans = addalpha
alpha = 30-time*3,256
angle = cond(ishelper(1642),parent,fvar(4),fvar(4))
ignorehitpause = 1

[State 0, Null]
type = Null
triggerall = !ishelper(1642)
triggerall = numhelper(1642)
trigger1 =fvar(2):=((pos y)-helper(1642),pos y)
ignorehitpause =1
persistent = 1
[State 0, Null]
type = Null
triggerall = !ishelper(1642)
triggerall = numhelper(1642)
trigger1 =fvar(1):=((pos x*facing)-helper(1642),pos x*facing)
ignorehitpause =1
persistent = 1
[State 0, Null]
type = Null
triggerall = !ishelper(1642)
triggerall = numhelper(1642)
trigger1 =fvar(4):=-(atan(fvar(2)/fvar(1))*180)/pi
ignorehitpause =1
persistent = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1710
ignorehitpause = 1
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1711
ignorehitpause = 1
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = !time
id = 1712
ignorehitpause = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 30
id = 1610
ignorehitpause = 1
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 30
id = 1611
ignorehitpause = 1
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 30
id = 1612
ignorehitpause = 1
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 30
id = 1614
ignorehitpause = 1
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 30
id = 1615
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = time = 30
trigger2 = root,stateno != [1660,1661]
removeexplods = 1
ignorehitpause = 1
;-------------------------------------------------------------------------------
; Beam SPARE SHAFT PARTS  ANGLE
[Statedef 1651]
type    = A
movetype= A
physics = N
juggle  = 0
velset = -parent,fvar(1)/3,-parent,fvar(2)/3;(const(size.height)/1.8),(const(size.height)/2)
ctrl = 0
anim = 1621
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = -parent,fvar(1)/3
y = -parent,fvar(2)/3
ignorehitpause = 1

[State 0, ParentVarSet]
type = ParentVarSet
triggerall = (Parent,Cond(1,(Helper(1642),frontedgedist <-10),0))
trigger1 = movehit = 1
v = 12   
value = 1
ignorehitpause = 1

[State 0, HitDef]
type = HitDef
triggerall = !(Parent,Cond(1,(Helper(1642),frontedgedist <-10),0))
trigger1 = !movecontact
attr = S,SP        
hitflag = MAF        
guardflag = MA       
animtype = hard      
air.animtype = medium
damage = 7+floor(parent,const(size.shadowoffset)*.2),2+floor(parent,const(size.shadowoffset)*.1)
pausetime = 0,0
guard.pausetime = 3,2
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,18
guardsound = S4,0
ground.type = high      
ground.slidetime = 20
ground.hittime = 30
air.hittime = 40
guard.dist = 205
ground.velocity = (-2-parent,const(size.shadowoffset)*.05)*const(size.xscale),0
guard.velocity = (-12-parent,const(size.shadowoffset)*.05)*const(size.xscale)
air.velocity = (-4-parent,const(size.shadowoffset)*.05)*const(size.xscale),cond(enemynear,pos y > -10,-1,1)
airguard.velocity = (-10-parent,const(size.shadowoffset)*.05)*const(size.xscale),-3
ground.cornerpush.veloff = -4-parent,const(size.shadowoffset)*.05
air.cornerpush.veloff = -4-parent,const(size.shadowoffset)*.05
guard.cornerpush.veloff = -5-parent,const(size.shadowoffset)*.05
airguard.cornerpush.veloff = -5-parent,const(size.shadowoffset)*.05
forcestand = 1
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 20
down.bounce = 0
envshake.time = 3+ceil(parent,const(size.shadowoffset))

[State 0, HitDef]
type = HitDef
triggerall = (Parent,Cond(1,(Helper(1642),frontedgedist <-10),0))
trigger1 = !movecontact
attr = S,SP        
hitflag = MAF        
guardflag = MA       
animtype = hard      
air.animtype = medium
damage = 7+floor(parent,const(size.shadowoffset)*.2),2+floor(parent,const(size.shadowoffset)*.1)
pausetime = 0,4
guard.pausetime = 3,2
sparkno = -1
guard.sparkno = -1
sparkxy = 0,0
hitsound = S1,18
guardsound = S4,0
ground.type = high      
ground.slidetime = 20
ground.hittime = 30
air.hittime = 40
guard.dist = 205
ground.velocity = (-3-parent,const(size.shadowoffset)*.05)*const(size.xscale),0
guard.velocity = (-6-parent,const(size.shadowoffset)*.05)*const(size.xscale)
air.velocity = (-2-parent,const(size.shadowoffset)*.05)*const(size.xscale),-4
airguard.velocity = (-6-parent,const(size.shadowoffset)*.05)*const(size.xscale),-3
ground.cornerpush.veloff = -4-parent,const(size.shadowoffset)*.05
air.cornerpush.veloff = -4-parent,const(size.shadowoffset)*.05
guard.cornerpush.veloff = -5-parent,const(size.shadowoffset)*.05
airguard.cornerpush.veloff = -5-parent,const(size.shadowoffset)*.05
forcestand = 1
fall = 0
air.fall = 1
fall.recover = 1
fall.recovertime = 20
down.bounce = 0
envshake.time = 3+ceil(parent,const(size.shadowoffset))

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = (30+const(size.shadowoffset)*.08)*const(size.xscale),0
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .16+parent,const(size.shadowoffset)*.002*const(size.xscale)
size.yscale = .16+parent,const(size.shadowoffset)*.002*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 023
stateno = 800
pos = (30+const(size.shadowoffset)*.08)*const(size.xscale),0
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .16+parent,const(size.shadowoffset)*.002*const(size.xscale)
size.yscale = .16+parent,const(size.shadowoffset)*.002*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = movecontact
trigger2 = Parent,Cond(1,(Helper(1642),stateno = 1645),0)
trigger3 = !parent,numhelper(1642)
trigger4 = facing = 1 && pos x > (Parent,Cond(1,(Helper(1642),Pos X),0)) -(15+parent,const(size.shadowoffset)*.08)
trigger5 = facing != 1 && pos x < (Parent,Cond(1,(Helper(1642),Pos X),0)) +(15+parent,const(size.shadowoffset)*.08)
trigger6 = Parent,Cond(1,(Helper(1642),MoveContact),0) ;&& !Parent,Cond(1,(Helper(1642),target,ishelper),0)
ignorehitpause = 1
;-------------------------------------------------------------------------------
; BEAM CLASH SYSTEM ANGLE
[Statedef 1655]
type    = S
movetype= I
physics = N
juggle  = 0
ctrl = 0
anim = 1655
poweradd = 0
sprpriority = 2
velset = 0,0

[State 0, Width]
type = Width
trigger1 =1 
player = 5,8
ignorehitpause =1 
persistent = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT        
stateno = 1655
ignorehitpause = 1
[State 0, NotHitBy]
type = NotHitBy
trigger1 = prevstateno != 1655 && time < 5
trigger2 = prevstateno = 1655 && time < 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

;[State 0, Width]
;type = Width
;trigger1 = 1
;value = const(size.ground.front),const(size.ground.back)
;player = const(size.ground.front),const(size.ground.back)
;edge = const(size.ground.front),const(size.ground.back)
;ignorehitpause = 1
;persistent = 1

[State 0, PlayerPush]
type = PlayerPush
triggerall = prevstateno = 1655
trigger1 = time < 7
value = 1
ignorehitpause = 1
persistent = 1

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0
ignorehitpause = 1
persistent = 1

[State 0, Turn]
type = Turn
trigger1 = parent,facing != facing
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = root,stateno != 1660
trigger2 = Parent,Cond(1,(Helper(1642),stateno = 1645),0)
trigger3 = !parent,numhelper(1642)
ignorehitpause = 1

;-------------------------------------------------------------------------------
; Leap Back
[Statedef 1658]
type    = A
movetype= I
physics = N
velset = -3.5,-7+cond((prevstateno =650),1,0)
ctrl = 0
anim = 1658
poweradd = cond((prevstateno = [1300,1305]),0,-800)
sprpriority = 2

[State 0, Width]
type = Width
trigger1 = 1
edge = 20,0
player = 20,0
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
x = 0
y = .04
ignorehitpause = 1

[State 0, Gravity]
type = Gravity
trigger1 = 1

;charge
[State 5201, 5] 
type = PalFX
trigger1 = Time = 0
time = 4
add = 128,128,128 
[State 3000, PlaySnd - Super Charge]
type = PlaySnd
trigger1 = Time = 0
value = S1,2
volume = 100

[State 0, Aura]
type = Explod
trigger1 = time = 0
anim = 790
ID = 790
pos = -10*const(size.xscale),-26.4*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,36
supermovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 5
anim = 790
ID = 790
pos = -10*const(size.xscale),-26.4*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,37
supermovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 0||time = 5
anim = 790
ID = 790
pos = -10*const(size.xscale),-26.4*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33
supermovetime = 30
;charge

;:____ CHARGE
[State 0, ChangeAnim]
type = ChangeAnim
triggerall =  !time && anim = 1658
trigger1 = prevstateno = [1300,1305]
value = anim
elem = 2
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 1606
ID = 1665
pos = -1*const(size.xscale),2*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = (.3+var(55)*.01)*const(size.xscale),(.3+var(55)*.01)*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 1605
ID = 1665
pos = 2*const(size.xscale),-27*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = !time
anim = 1605
ID = 1665
pos = 2*const(size.xscale),-27*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,33
trans = sub

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 2
ID = 1665
pos = -10*const(size.xscale),-26*const(size.yscale)
postype = p1  ;p2,front,back,left,right
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 3
ID = 1665
pos = -20*const(size.xscale),-1*const(size.yscale)
postype = p1  ;p2,front,back,left,right
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 4
ID = 1665
pos = -1*const(size.xscale),2*const(size.yscale)
postype = p1  ;p2,front,back,left,right
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 5
ID = 1665
pos = 23*const(size.xscale),-6*const(size.yscale)
postype = p1  ;p2,front,back,left,right
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 6
ID = 1665
pos = 26*const(size.xscale),-22*const(size.yscale)
postype = p1  ;p2,front,back,left,right
sprpriority = 4
;:____ CHARGE

[State 0, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 1660
ctrl = 0
;-------------------------------------------------------------------------------
; Leap Fwd
[Statedef 1659]
type    = A
movetype= I
physics = N
velset = cond((prevstateno = [1300,1305]),3,3.7),cond((prevstateno = [1300,1305]),-6,(-7+cond((prevstateno =650),1.1,0)))
ctrl = 0
anim = 1659
poweradd = cond((prevstateno = [1300,1305]),0,-800)
facep2 = cond((prevstateno = [1300,1305]),1,0)
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = pos y > -90 && vel y >0
y = 0
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = pos y > -90 && (prevstateno = [1300,1305])
x = 0
y = -2
ignorehitpause = 1

[State 0, Width]
type = Width
trigger1 = 1
edge = 30,0
player = 25,0
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
triggerall = !(pos y > -90 && vel y >0)
triggerall = !(prevstateno = [1300,1305])
trigger1 = 1
x = 0
y = .04
ignorehitpause = 1

[State 0, Gravity]
type = Gravity
triggerall = !(pos y > -90 && vel y >0)
trigger1 = 1

;charge
[State 5201, 5] 
type = PalFX
triggerall = !(prevstateno = [1300,1305])
trigger1 = Time = 0
time = 4
add = 128,128,128 
[State 3000, PlaySnd - Super Charge]
type = PlaySnd
triggerall = !(prevstateno = [1300,1305])
trigger1 = Time = 0
value = S1,2
volume = 100

[State 0, Aura]
type = Explod
triggerall = !(prevstateno = [1300,1305])
trigger1 = time = 0
anim = 790
ID = 790
pos = -10*const(size.xscale),-26.4*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,36
supermovetime = 30
[State 0, Aura]
type = Explod
triggerall = !(prevstateno = [1300,1305])
trigger1 = time = 5
anim = 790
ID = 790
pos = -10*const(size.xscale),-26.4*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,37
supermovetime = 30
[State 0, Aura]
type = Explod
triggerall = !(prevstateno = [1300,1305])
trigger1 = time = 0||time = 5
anim = 790
ID = 790
pos = -10*const(size.xscale),-26.4*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33
supermovetime = 30
;charge

;:____ CHARGE
[State 0, ChangeAnim]
type = ChangeAnim
triggerall =  !time && anim = 1658
trigger1 = prevstateno = [1300,1305]
value = anim
elem = 2
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 1606
ID = 1665
pos = 1*const(size.xscale),2*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = (.3+var(55)*.01)*const(size.xscale),(.3+var(55)*.01)*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)

[State 0, Explod]
type = Explod
trigger1 = !time
anim = 1605
ID = 1665
pos = -2*const(size.xscale),-27*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = !time
anim = 1605
ID = 1665
pos = -2*const(size.xscale),-27*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = .3*const(size.xscale),.3*const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,33
trans = sub

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 2
ID = 1665
pos = 10*const(size.xscale),-26*const(size.yscale)
postype = p1  ;p2,front,back,left,right
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 3
ID = 1665
pos = 20*const(size.xscale),-1*const(size.yscale)
postype = p1  ;p2,front,back,left,right
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 4
ID = 1665
pos = 1*const(size.xscale),2*const(size.yscale)
postype = p1  ;p2,front,back,left,right
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 5
ID = 1665
pos = -23*const(size.xscale),-6*const(size.yscale)
postype = p1  ;p2,front,back,left,right
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 6
ID = 1665
pos = -26*const(size.xscale),-22*const(size.yscale)
postype = p1  ;p2,front,back,left,right
sprpriority = 4
;:____ CHARGE

[State 0, VelSet]
type = VelSet
triggerall = !cond(facing = 1,pos x > enemynear,pos x+7,pos x < enemynear,pos x-7)
trigger1 = frontedgebodydist < 50 
x = vel x*.97
ignorehitpause = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 1660
ctrl = 0
;===============================================================================
; Kamehameha Air
;-------------------------------------------------------------------------------
; Charging/Shooting
[Statedef 1660]
type    = A
movetype= A
physics = N
juggle  = 0
velset = cond((prevstateno = [1300,1305]),3,.1),cond((prevstateno = [1300,1305]),-3.5,.1)
ctrl = 0
anim = 1660
poweradd = 0
sprpriority = 2

[State 0, Limitador]
type = Explod
trigger1 = !time
anim = 9999
ID = 1660
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = 1,1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 1
ID = 1665
pos = -6*const(size.xscale),-37*const(size.yscale)
postype = p1  ;p2,front,back,left,right
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 2
ID = 1665
pos = -2*const(size.xscale),-42*const(size.yscale)
postype = p1  ;p2,front,back,left,right
[State 0, ModifyExplod]
type = ModifyExplod
trigger1 = animelem = 3
ID = 1665
pos = 19*const(size.xscale),-17.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 =  animelem = 3
id = 1665
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = -.001
y = -.01
ignorehitpause = 1
persistent = 0
[State 0, VelSet]
type = VelSet
triggerall = !cond(facing = 1,pos x > enemynear,pos x+7,pos x < enemynear,pos x-7)
trigger1 = frontedgebodydist < 40 && animelem = 5
x = -4.2;3
y = 0
ignorehitpause = 1
persistent = 0
[State 0, VelSet]
type = VelSet
trigger1 = frontedgebodydist > 40 && animelem = 5
x = -.0001
y = 0
ignorehitpause = 1
persistent = 0

[State 0, Width]
type = Width
trigger1 = 1
edge = 25,0
player = 20,0
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = pos y > -90 && (prevstateno = [1300,1305])
x = 0
y = -2
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
triggerall = !cond(facing = 1,pos x > enemynear,pos x+7,pos x < enemynear,pos x-7)
triggerall = numhelper(1640)
triggerall = helper(1640),Cond(1,(Helper(1642),movecontact),0)
triggerall = animtime < 12
trigger1 = frontedgedist < 80+var(55);11
x = -3.4
y = 0
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
triggerall = !cond(facing = 1,pos x > enemynear,pos x+7,pos x < enemynear,pos x-7)
triggerall = numhelper(1640)
triggerall = helper(1640),Cond(1,(Helper(1642),movecontact),0)
trigger1 = frontedgebodydist < 90 && animelem = 5
x = -3.4
y = 0
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S3,1
volumescale = 140
channel = 9

;:____ VFX
[State 0, Fly Lines]
type = Helper
trigger1 = animelem = 3||animelem = 4
helpertype = normal
name = "Fly Lines"
ID = 6003
stateno = 6003
pos = (-15+random%8)*const(size.xscale),(-5-random%35)*const(size.yscale)
postype = p1
facing = 1
ownpal = 1
Size.Xscale = .155*const(size.xscale)
Size.Yscale = .12*const(size.yscale)
size.shadowoffset = -30;angulo
;:____ VFX

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S0,100
volumescale = 100
channel = 5

[State 0, Helper]
type = Helper
trigger1 = animelem = 3
helpertype = normal ;player
name = "BEAM ANGULO"
ID = 1640
stateno = 1640
pos = (22+var(55)*.08)*const(size.xscale),-16*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 1
pausemovetime = 0
size.xscale = (1+var(55)*.009)*const(size.xscale)
size.yscale = (1+var(55)*.009)*const(size.yscale)
persistent = 0
size.shadowoffset = var(55) ;poder del ataque
size.height = 40 ;velocidad de la cabeza
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 55    
value = 0
ignorehitpause = 1

[State 0, Vanish]
type = Helper
Triggerall = !numhelper(701)
triggerall = numhelper(1640)
trigger1 = helper(1640),var(12)=1
helpertype = normal
name = "Helper de Conexiones"
ID = 701
stateno = 700
pos = 999999,999999
postype = p1

[State 0, Supers]
type = Explod
Triggerall = numexplod(700) = 0
triggerall = numhelper(1640)
trigger1 = helper(1640),var(12)=1
anim = 9999
ID = 700
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 10
pausemovetime = 0
scale = 1,1
sprpriority = 0
ownpal = 1
removeongethit = 1

[State 950, Y]
type = ChangeState
triggerall = numhelper(1640)
triggerall = numhelper(953) = 0
trigger1 = ailevel = 0 && command = "y" && helper(1640),var(12)=1
trigger2 = ailevel > 0 && helper(1640),var(12)=1 && random < (ailevel * 100)/3
value = 950

[State 200, End]
type = ChangeState
trigger1 = animelemtime(4)>0 && !numhelper(1640)
value = 1661
ctrl = 0
[State 200, End]
type = ChangeState
triggerall = numhelper(1640)
trigger1 = animelemtime(3)>0 && helper(1640),stateno = 1645
value = 1661
ctrl = 0
;-------------------------------------------------------------------------------
; Kamehameha Air Fin
[Statedef 1661]
type    = A
movetype= I
physics = A
velset = 1,-1
ctrl = 0
anim = 1661
sprpriority = 2

[State 950, Y]
type = ChangeState
triggerall = numhelper(1640)
triggerall = numhelper(953) = 0
trigger1 = ailevel = 0 && command = "y" && helper(1640),var(12)=1
trigger2 = ailevel > 0 && helper(1640),var(12)=1 && random < (ailevel * 100)/3
value = 950

[State 0, ChangeState]
type = ChangeState
trigger1 = !animtime
value = 50
ctrl = 1
;===============================================================================
; Unrestrained Will:
;-------------------------------------------------------------------------------
; Start
[Statedef 1700]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 1700
poweradd = -800
sprpriority = 2

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = prevstateno != 5120
value = 1700
elem = 3
ignorehitpause = 1
persistent = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem=3
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = N         ;A,C,S,N
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem=3
x = -2
y = -2
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 6   ;fv = 10
value = 1
ignorehitpause = 1

;charge
[State 5201, 5] 
type = PalFX
trigger1 = Time = 0
time = 4
add = 128,128,128 
[State 3000, PlaySnd - Super Charge]
type = PlaySnd
trigger1 = Time = 0
value = S1,2
volume = 100

[State 0, Aura]
type = Explod
trigger1 = time = 0
anim = 790
ID = 790
pos = 3*const(size.xscale),-24*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,36
supermovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 5
anim = 790
ID = 790
pos = 3*const(size.xscale),-24*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,37
supermovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 0||time = 5
anim = 790
ID = 790
pos = 3*const(size.xscale),-24*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
pausemovetime = 0
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33
supermovetime = 30
;charge

[State 200, End]
type = ChangeState
trigger1 = time = 18
value = 1701
ctrl = 0

;-------------------------------------------------------------------------------
; Golpe
[Statedef 1701]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 1701
facep2 = 1
poweradd = -200
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,116
volumescale = 100
channel = 5

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !time
value = SCA,NA,SA
time = 15
ignorehitpause = 1
[State 0, HitBy]
type = HitBy
trigger1 = !time
time = 15
value = SCA,NP,SP,HA,HP,NT,ST,HT
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = time < 5
helpertype = normal ;player
name = "soru"
ID = 6010
stateno = 6010
pos = (-9+random%19)*const(size.xscale),(-5-random%44)*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .09*const(size.xscale)
size.yscale = .09*const(size.yscale)
size.height = 90 ;Angle
pausemovetime = 20
persistent = 1
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time 
value = S1,11
volumescale = 70

[State 0, PosAdd]
type = PosAdd
triggerall = p2dist x = [-70,180]
trigger1 = !time
x = (p2dist x)-35
persistent = 0

[State 0, PosAdd]
type = PosAdd
triggerall = p2dist x != [-70,180]
trigger1 = !time
x = -20
persistent = 0

[State 0, PosSet]
type = PosSet
triggerall = p2dist y = [-150,150]
trigger1 = !time
y = cond( enemynear,pos y > -5,-10,enemynear, pos y+5)
persistent = 0

[State 0, PosAdd]
type = PosAdd
triggerall = p2dist y != [-150,150]
trigger1 = !time
y = cond( pos y > -35,(-pos y+15),15)
persistent = 0

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 9
v = 6   ;fv = 10
value = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = vel y > 0
trigger1 = pos y >= -15
y = 0
ignorehitpause = 1
[State 0, PosSet]
type = PosSet
triggerall = vel y > 0
trigger1 = pos y >= -15
y = -15
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 9.5
y = 0
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = movecontact
trigger2 = animelem = 7
x = 1
y = 0
ignorehitpause = 1
persistent = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = time < 10
value = 0
movecamera = 0,1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,4
volume = 50
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem=2
value = S7,27
volume = 70

[State 200, 1]
type = HitDef
triggerall = !movereversed
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = Medium
damage    = 85
guardflag = HA
pausetime = 14,15
guard.pausetime = 15,12
guard.hittime = 40
airguard.hittime = 40
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,8+random%2
guardsound = S4,1
ground.type = High
ground.slidetime = 35
ground.hittime  = 35
air.hittime = 40
ground.velocity = -3*const(size.xscale),-4
air.velocity = -3*const(size.xscale),-4*const(size.yscale);.3
Fall = 1
fall.recover = 1
fall.recovertime = 35
air.fall = 1 
Envshake.time = 19
down.bounce = 1
id = 1700
p2facing = 1

[State 0, Smash Hit]
type = VarSet
trigger1 = !movecontact
v = 4   
value = cond(enemynear,movetype = H,1,0)
ignorehitpause = 1

[State 0, TargetState]
type = TargetState
triggerall = time
triggerall = numtarget(1700)
triggerall = target(1700),prevstateno  != 82737
triggerall = movehit = 1 
trigger1 = !target(1700),ishelper
value = cond(var(4)=1,82754,82732)
ID = 1700
ignorehitpause = 0

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 33*const(size.xscale),-28*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .25*const(size.xscale)
size.yscale = .28*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 33*const(size.xscale),-28*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .25*const(size.xscale)
size.yscale = .28*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 1702
ID = 1699
pos = 35*const(size.xscale),-24*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
removetime = -2
pausemovetime = 0
persistent = 0
scale = .6*const(size.xscale),.6*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,33
trans = sub
angle = 90
accel = -.1,0
[State 0, Explod]
type = Explod
trigger1 = animelem = 2
anim = 1702
ID = 1699
pos = 35*const(size.xscale),-24*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 0
removetime = -2
pausemovetime = 0
persistent = 0
scale = .6*const(size.xscale),.6*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
angle = 90
accel = -.1,0

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 961
ID = 1700
pos = 5*const(size.xscale),-24*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 40
pausemovetime = 0
scale = .3*const(size.xscale),.25*const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,33
trans = sub
angle = 90
[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 961
ID = 1700
pos = 5*const(size.xscale),-24*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 40
pausemovetime = 0
scale = .3*const(size.xscale),.25*const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
angle = 90
[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 960
ID = 1700
pos = 5*const(size.xscale),-24*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 40
pausemovetime = 0
scale = .3*const(size.xscale),.25*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,33
trans = sub
angle = 90
[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 960
ID = 1700
pos = 5*const(size.xscale),-24*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = 40
pausemovetime = 0
scale = .3*const(size.xscale),.25*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
angle = 90

[State 0, Explod]
type = Explod
trigger1 = animelemtime(3)>0 && !numexplod(1700)
anim = 963
ID = 1701
pos = 5*const(size.xscale),-24*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
persistent = 0
scale = .5*const(size.xscale),.46*const(size.yscale)
sprpriority = 3
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,33
trans = sub
angle = 90
[State 0, Explod]
type = Explod
trigger1 = animelemtime(3)>0 && !numexplod(1700)
anim = 963
ID = 1701
pos = 5*const(size.xscale),-24*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
persistent = 0
scale = .5*const(size.xscale),.46*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 10,0+var(22)
angle = 90

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 6999
ID = 6999
pos = 35*const(size.xscale),-24*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 5
angle = 0
removetime = -2
pausemovetime = 99
supermovetime = 99
scale = .6*const(size.xscale),.4*const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 200, End]
type = ChangeState
trigger1 = !animtime
value = 50
ctrl = 1

;===============================================================================
; Autonomous Fist:
;-------------------------------------------------------------------------------
[Statedef 1800]
type    = A
movetype= A
physics = A
juggle  = 0
velset = vel x*.6,vel y *.6
ctrl = 0
anim = 1800
poweradd = -800
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !time
v = 48    ;fv = 10
value = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
triggerall = numhelper(1810)
trigger1 = helper(1810),gethitvar(damage)
v = 48    ;fv = 10
value = 1
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
triggerall = numhelper(1810)
trigger1 = helper(1810),gethitvar(damage)
value = SA,NA
time = 8
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
triggerall = numhelper(1810)
trigger1 = helper(1810),gethitvar(damage)
x = -5*vel x*.8
y = 0
ignorehitpause = 1
[State 0, VelAdd]
type = VelAdd
triggerall = numhelper(1810)
trigger1 = helper(1810),gethitvar(damage)
x = -1*vel x
y = 0
persistent = 4
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = !time
helpertype = normal ;player
name = "CLASH"
ID = 1810
stateno = 1810
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = const(size.xscale)
size.yscale = const(size.yscale)
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,96
volumescale = 100
channel = 5

[State 0, PosAdd]
type = PosAdd
trigger1 = pos y >-6
x = 0
y = -2
ignorehitpause = 1

[State 1800, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S7,24
volume = 100

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 5+var(56)
y = 0
ignorehitpause = 1
[State 0, VelSet]
type = VelAdd
trigger1 = animelemtime(3)>0 && vel x > cond(movecontact=1,1,1.6)
x = -.7
y = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelAdd
trigger1 = animelemtime(3)>0 && vel x < cond(movecontact=1,1,1.6)
x = .2
y = 0
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
triggerall = !ailevel
triggerall = command!= "hold_b"
triggerall = command!= "hold_c"
trigger1 = !time && command="hold_a"
trigger2 =( var(56)!=[1,3]) && (command="hold_a")
v = 56   
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
triggerall = !ailevel
triggerall = command!= "hold_a"
trigger1 = !time && command="hold_b"||!time && command="hold_c"
trigger2 =( var(56)!=[1,3]) && (command = "hold_b"||command="hold_c")
v = 56   
value = 2
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
triggerall = !ailevel
triggerall = command!= "hold_b"
triggerall = command!= "hold_c"
trigger1 = !time && command="hold_a"
trigger2 =( var(56)!=[1,3]) && (command="hold_a")
v = 56   
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
triggerall = !ailevel
triggerall = command!= "hold_a"
trigger1 = !time && command="hold_b"||!time && command="hold_c"
trigger2 =( var(56)!=[1,3]) && (command = "hold_b"||command="hold_c")
v = 56   
value = 2
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
triggerall = ailevel
trigger1 = !time 
v = 56   
value = cond(power >=4000,2,1)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = var(56)>2
v = 56   
value = 2
ignorehitpause = 1

;charge
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = !time && pos y < 0
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = N         ;A,C,S,N
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = !time && pos y = 0
y = 0
ignorehitpause = 1

[State 5201, 5] 
type = PalFX
trigger1 = Time = 0
time = 4
add = 128,128,128 
[State 3000, PlaySnd - Super Charge]
type = PlaySnd
trigger1 = Time = 0
value = S1,2
volume = 100

[State 0, Aura]
type = Explod
trigger1 = time = 0
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,cond(var(56)=1,36,39)
supermovetime = 30
pausemovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 5
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
remappal = 0,37
supermovetime = 30
pausemovetime = 30
[State 0, Aura]
type = Explod
trigger1 = time = 0||time = 5
anim = 790
ID = 790
pos = 3*const(size.xscale),-32.5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
bindtime = -1
removetime = -2
scale = .22*const(size.xscale),.23*const(size.yscale)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
trans = sub
remappal = 0,33
supermovetime = 30
pausemovetime = 30
;charge

[State 1800, 1]
type = HitDef
triggerall = animelem = 4|| animelem = 5
trigger1 = 1
attr = A, NA
animtype  = Medium
damage    = 7-var(56),1
guardflag = MA
pausetime = 1,2
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,3+random%3
guardsound = S4,1
ground.type = High
ground.slidetime = 30
ground.hittime  = 35
guard.velocity = (-4+random%3)*const(size.xscale)
airguard.velocity = (-3+random%3)*const(size.xscale),(-1-random%3)*const(size.yscale)
ground.velocity = (-2+random%5)*const(size.xscale);-random%3
air.velocity = ((-2+random%5)*.6)*const(size.xscale),(-2-random%3)*const(size.yscale);-1-random%3
Fall = 0
air.fall = 1
fall.recover = 0
Envshake.time = 5+floor(hitcount*.5)
id = 1800
priority = 2,hit

[State 0, TargetBind]
type = TargetBind
triggerall = movehit
triggerall = numtarget(1800)
triggerall = !target(1800),ishelper
trigger1 = target(1800),statetype = A
time = 1
pos = 40*const(size.xscale),-4*const(size.yscale)
id = 1800
ignorehitpause = 1
persistent = 8

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = (35+random%10)*const(size.xscale),(-25-random%25)*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .15*const(size.xscale)+hitcount*.004
size.yscale = .15*const(size.yscale)+hitcount*.004
ignorehitpause = 1
persistent = 8
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = (35+random%10)*const(size.xscale),(-25-random%25)*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .15*const(size.xscale)+hitcount*.004
size.yscale = .15*const(size.yscale)+hitcount*.004
ignorehitpause = 1
persistent = 8

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 1811
ID = 1810
pos = 3*const(size.xscale),-33*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = const(size.xscale)+(var(56)*.02),const(size.yscale)+(var(56)*.05)
sprpriority = 4
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 1810
ID = 1810
pos = 3*const(size.xscale),-31*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = const(size.xscale)+(var(56)*.02),const(size.yscale)+(var(56)*.05)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = animelem = 3
anim = 1810
ID = 1810
pos = 3*const(size.xscale),-31*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -1
pausemovetime = 0
scale = const(size.xscale)+(var(56)*.02),const(size.yscale)+(var(56)*.05)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
trans = sub

[State 0, PosSet]
type = PosSet
trigger1 = pos y >-7
y = -8
ignorehitpause = 1

[State 200, End]
type = ChangeState
trigger1 = time = cond(var(56)=1,30,45)
value = 1801;cond((prevstateno = 625),1304,1301)
ctrl = 0

;-------------------------------------------------------------------------------
; Remate 1
[Statedef 1801]
type    = A
movetype= A
physics = A
juggle  = 0
velset = 3,-.001
ctrl = 0
;anim = 1801
facep2 = 0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = !time && var(56)=2
v = 25   
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 7
value = S0,98
volumescale = 100
channel = 5

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = cond(var(48)=1,var(56)*3,var(56))
y = -.01
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 8
x = cond(var(48)=1,var(56)*2,var(56))
y = -.01
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
triggerall = animelem != 8
triggerall = animelemtime(2)>1 && animelemtime(11)<0
trigger1 = vel x > .3
x = -.2
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
trigger1 = prevstateno != 8010
trigger1 = animelemtime(2)>1 && animelemtime(11)<0
trigger2 = prevstateno = 8010
trigger2 = time > 0 && animelemtime(11)<0
y = .001
ignorehitpause = 0

[State 0, VelSet]
type = VelSet
triggerall = var(56)<2
trigger1 = animelem = 11
x = -.2
y = -.5
ignorehitpause = 1
[State 0, VelSet]
type = VelSet
triggerall = var(56)>1
trigger1 = animelemtime(11)>0
x = -.1
y = -.03
ignorehitpause = 1

;-CLASH
[State 0, NotHitBy]
type = NotHitBy
trigger1 = var(48) = 1
value = SA,NA
time = 1
ignorehitpause = 1
persistent = 0

[State 0, CLASH HIT]
type = HitOverride
triggerall = enemynear,facing != facing
triggerall = !cond(facing = 1,pos x > enemynear,pos x,pos x < enemynear,pos x)
triggerall = (!enemynear,ishelper)
trigger1 = animelem = 4||animelem = 9
attr = SCA,NA       
stateno = 8010
forceair = 0
ignorehitpause = 1

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = anim != 1801
value = 1801
elem = 1
ignorehitpause = 1
persistent = 0
;-ClASH

[State 0, TargetBind]
type = TargetBind
triggerall = numtarget(1800)
triggerall = !target(1800),ishelper
triggerall = target(1800),statetype = A
trigger1 = !movecontact
id = 1800
pos = 32*const(size.xscale),0
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time
value = S0,49
volumescale = 100
channel = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 3
value = S5,2
volume = 50
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 8
value = S5,1
volume = 50

[State 200, 1]
type = HitDef
trigger1 = animelem = 4
attr = A, NA
animtype  = Medium
damage    = 20,5
guardflag = HA
pausetime = 8,10
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,5
guardsound = S4,1
ground.type = High
ground.slidetime = 28
ground.hittime  = 36
air.hittime = 60
ground.velocity = -.5*const(size.xscale),-2
air.velocity = -.5*const(size.xscale),-1*const(size.yscale);.3
yaccel = .2
Fall = 1
fall.recover = 0
air.fall = 1 
Envshake.time = 8
down.bounce = 1
id = 1801

[State 200, 1]
type = HitDef
trigger1 = animelem = 9
attr = A, NA
animtype  = Medium
damage    = 30,5
guardflag = HA
pausetime = 17,16
guard.pausetime = 15,15
guard.hittime = 14
airguard.hittime = 15
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,9
guardsound = S4,1
ground.type = High
ground.slidetime = 28
ground.hittime  = cond(var(56)=2,150,70)
air.hittime = cond(var(56)=2,150,70)
ground.velocity = -3*const(size.xscale),9
air.velocity = -3*const(size.xscale),9*const(size.yscale);.3
Fall = 1
fall.recover = cond(var(56)>1,0,1)
air.fall = 1 
fall.recovertime = 30
Envshake.time = 8
down.bounce = 1
;chainid = 1801
p2facing = 1
id = 1802
[State 0, TargetState]
type = TargetState
triggerall = time
triggerall = !numexplod(1802)
triggerall = numtarget(1802)
triggerall = target(1802),prevstateno  != 82737
triggerall = movehit = 1 
trigger1 = !target(1802),ishelper
value = 82736
ID = 1802
ignorehitpause = 0

[State 0, Explod]
type = Explod
trigger1 = numtarget(1801) && movehit
anim = 1311
ID = 1801
pos = 23*const(size.xscale),-44*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0
angle = 55
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = numtarget(1801) && movehit
anim = 1311
ID = 1801
pos = 23*const(size.xscale),-44*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0
angle = 55
trans = sub

[State 0, Helper]
type = Helper
trigger1 = numtarget(1801) && moveguarded
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 23*const(size.xscale),-44*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.22+var(56)*.02)*const(size.xscale)
size.yscale = (.23+var(56)*.02)*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = numtarget(1801) && movehit
helpertype = normal
name = "sparkpeta"
ID = 020
stateno = 800
pos = 23*const(size.xscale),-44*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = ((.23+hitcount*.01)*const(size.xscale))+var(56)*.02
size.yscale = ((.22+hitcount*.03)*const(size.yscale))+var(56)*.02
ignorehitpause = 1
persistent = 0


[State 0, Explod]
type = Explod
trigger1 = numtarget(1802) && movehit
anim = 1311
ID = 1802
pos = 23*const(size.xscale),-14*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0
angle = -55
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = numtarget(1802) && movehit
anim = 1311
ID = 1802
pos = 23*const(size.xscale),-14*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = 1,const(size.yscale)
sprpriority = 0
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
persistent = 0
angle = -55
trans = sub

[State 0, Explod]
type = Explod
trigger1 = animelem = 9
anim = 6999
ID = 6999
pos = 23*const(size.xscale),-14*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 5
angle = -55
removetime = -2
pausemovetime = 99
supermovetime = 99
scale = .4*const(size.xscale),.4*const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = numtarget(1802) && moveguarded
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 23*const(size.xscale),-14*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = (.22+var(56)*.02)*const(size.xscale)
size.yscale = (.23+var(56)*.02)*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = numtarget(1802) && movehit
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 23*const(size.xscale),-14*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = ((.23+hitcount*.01)*const(size.xscale))+var(56)*.02
size.yscale = ((.22+hitcount*.03)*const(size.yscale))+var(56)*.02
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
triggerall = teammode != simul && enemynear,teammode != simul
trigger1 = numtarget(1802) && movehit
helpertype = normal
name = "zoom"
ID = 9900
stateno = 9900
pos = 15*const(size.xscale),-64*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 1812
ID = 1812
pos = 22*const(size.xscale),-44*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = -1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
persistent = 0
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 1812
ID = 1812
pos = 22*const(size.xscale),-44*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = -1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
persistent = 0
trans = sub

[State 0, Explod]
type = Explod
trigger1 = animelem = 9
anim = 1812
ID = 1812
pos = 21*const(size.xscale),-14*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 5
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
persistent = 0
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = animelem = 9
anim = 1812
ID = 1812
pos = 21*const(size.xscale),-14*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 1
ontop = 0
ownpal = 1
removeongethit = 1
ignorehitpause = 1
persistent = 0
trans = sub

[State 200, End]
type = ChangeState
triggerall = movehit
triggerall = var(56) =2
trigger1 = animelem = 12;AnimTime = 0
value = 1802
ctrl = 0
[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;-------------------------------------------------------------------------------
; Remate 2
[Statedef 1802]
type    = A
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 1802
facep2 = 1
poweradd = -200
sprpriority = 2

[State 0, NotHitBy]
type = NotHitBy
trigger1 = !time
value = SCA,NP,SP
time = 5
ignorehitpause = 1
[State 0, HitBy]
type = HitBy
trigger1 = !time
time = 5
value = SCA,NA,SA,HA,HP,NT,ST,HT
ignorehitpause = 1

[State 0, Helper]
type = Helper
trigger1 = time < 5
helpertype = normal ;player
name = "soru"
ID = 6010
stateno = 6010
pos = (-9+random%19)*const(size.xscale),(-5-random%44)*const(size.yscale)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = .09*const(size.xscale)
size.yscale = .09*const(size.yscale)
size.height = 90 ;Angle
pausemovetime = 20
persistent = 1
ignorehitpause = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = !time 
value = S1,11
volumescale = 70

[State 0, Pause]
type = Pause
trigger1 = !time
time = 8
movetime = 8
persistent = 0

[State 0, PosSet]
type = PosAdd
triggerall = !numtarget(1802)
trigger1 = !time
x = 40
persistent = 0
[State 0, PosSet]
type = PosAdd
triggerall = !numtarget(1802)
trigger1 = !time
y = -65
persistent = 0

[State 0, PosSet]
type = PosSet
triggerall = numtarget(1802)
trigger1 = !time
x = target(1802),pos x +cond(facing=1,40,-40)
persistent = 0
[State 0, PosSet]
type = PosSet
triggerall = numtarget(1802)
trigger1 = !time
y = target(1802),pos y -65
persistent = 0

[State 0, Turn]
type = Turn
trigger1 = time = 1 && cond(facing = 1,pos x > enemynear,pos x +1,pos x < enemynear,pos x -1)
ignorehitpause = 1

[State 0, VarSet]
type = VarSet
trigger1 = animelem = 1
v = 6   ;fv = 10
value = 1
ignorehitpause = 1
[State 0, VarSet]
type = VarSet
trigger1 = animelem = 3
v = 6   ;fv = 10
value = 0
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
triggerall = vel y > 0
trigger1 = pos y >= -1
y = 0
ignorehitpause = 1
[State 0, PosSet]
type = PosSet
triggerall = vel y > 0
trigger1 = pos y >= -1
y = -1
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 7
x = -1
y = -2
ignorehitpause = 0
persistent = 0
[State 0, VelSet]
type = VelSet
trigger1 = movecontact
x = -.01
y = -.01
ignorehitpause = 0
persistent = 0

[State 0, VelSet]
type = VelSet
triggerall = numtarget(1802)
trigger1 = animelem = 3
x = p2dist x / 6
y = p2dist y / 5
ignorehitpause = 1
persistent = 0
[State 0, VelSet]
type = VelSet
triggerall = !numtarget(1802)
trigger1 = animelem = 3
x = 2
y = 9
ignorehitpause = 1
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,4
volume = 50

[State 200, 1]
type = HitDef
triggerall = !movereversed
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = Medium
hitflag = MAFD
damage    = 55
guardflag = HA
pausetime = 14,15
sparkno = -1
guard.sparkno = -1
sparkxy = -8,-25
hitsound   = S1,8+random%2
guardsound = S4,1
ground.type = High
ground.slidetime = 28
ground.hittime  = 40
air.hittime = 58
ground.velocity = -2*const(size.xscale),8
air.velocity = -2*const(size.xscale),10*const(size.yscale);.3
Fall = 0
fall.recover = 1
air.fall = 1 
Envshake.time = 19
down.bounce = 0
id = 1803
p2facing = 1
[State 0, TargetState]
type = TargetState
triggerall = time
triggerall = numtarget(1803)
triggerall = movehit = 1 
trigger1 = !target(1803),ishelper
value = 82732
ID = 1803
ignorehitpause = 0

[State 0, Helper]
type = Helper
trigger1 = moveguarded = 1
helpertype = normal
name = "sparkpeta"
ID = 019
stateno = 800
pos = 19*const(size.xscale),-9*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .22*const(size.xscale)
size.yscale = .23*const(size.yscale)
ignorehitpause = 1
persistent = 0
[State 0, Helper]
type = Helper
trigger1 = movehit = 1
helpertype = normal
name = "sparkpeta"
ID = 025
stateno = 800
pos = 19*const(size.xscale),-9*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .26*const(size.xscale)
size.yscale = .26*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, Helper]
type = Helper
triggerall = teammode != simul && enemynear,teammode != simul
trigger1 = movehit = 1
helpertype = normal
name = "zoom"
ID = 9900
stateno = 9900
pos = 15*const(size.xscale),-64*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 999
pausemovetime = 999
ignorehitpause = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = animelem=4
anim = 1410
ID = 1809
pos = 15*const(size.xscale),-5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = 9
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
angle = 60
remappal = 10,0+var(22)
[State 0, Explod]
type = Explod
trigger1 = animelem=4
anim = 1410
ID = 1809
pos = 15*const(size.xscale),-5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
removetime = -2
pausemovetime = 0
scale = const(size.xscale),const(size.yscale)
sprpriority = -3
ontop = 0
ownpal = 1
removeongethit = 1
supermovetime = 99
angle = 60
remappal = 0,33
trans = sub

[State 0, Explod]
type = Explod
trigger1 = animelem = 4
anim = 6999
ID = 6999
pos = 15*const(size.xscale),-5*const(size.yscale)
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 5
angle = 40
removetime = -2
pausemovetime = 99
supermovetime = 99
scale = .5*const(size.xscale),.5*const(size.yscale)
sprpriority = 8
ontop = 0
ownpal = 1
removeongethit = 0
ignorehitpause = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 0

;-------------------------------------------------------------------------------
; CLASH SYSTEM
[Statedef 1810]
type    = S
movetype= I
physics = N
juggle  = 0
ctrl = 0
anim = 1820
poweradd = 0
sprpriority = 2
velset = 0,0

[State 0, Helper]
type = Helper
trigger1 = gethitvar(damage)
helpertype = normal
name = "sparkpeta"
ID = 018
stateno = 800
pos = (35+random%10)*const(size.xscale),(-25-random%25)*const(size.yscale)
postype = p1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = .15*const(size.xscale)
size.yscale = .15*const(size.yscale)
ignorehitpause = 1
persistent = 0

[State 0, BindToParent]
type = BindToParent
trigger1 = 1
pos = 0,0
ignorehitpause = 1
persistent = 1

[State 0, PlayerPush]
type = PlayerPush
triggerall = prevstateno = 1810
trigger1 = time < 7
value = 1
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = prevstateno != 1810 && time < 6
trigger2 = prevstateno = 1810 && time < 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
ignorehitpause = 1

[State 0, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,NA      
stateno = 1810
ignorehitpause = 1
[State 0, HitBy]
type = HitBy
trigger1 = prevstateno != 1810 && time > 6
trigger2 = prevstateno = 1810 && time > 1
value = SCA,NA
time = 1
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = root,facing != facing
ignorehitpause = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = root,stateno != 1800
ignorehitpause = 1